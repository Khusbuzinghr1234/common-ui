{"version":3,"sources":["../node_modules/react-dom/cjs/react-dom.production.js","../node_modules/react-dom/cjs/react-dom.development.js","../node_modules/react-dom/index.js","../node_modules/@tamagui/timer/src/index.ts","../node_modules/@tamagui/web/src/contexts/ComponentContext.tsx","../node_modules/@tamagui/web/src/helpers/createStyledContext.tsx","../node_modules/@tamagui/web/src/helpers/pseudoDescriptors.ts","../node_modules/@tamagui/web/src/helpers/mergeProps.ts","../node_modules/@tamagui/web/src/helpers/objectIdentityKey.tsx","../node_modules/@tamagui/web/src/contexts/GroupContext.tsx","../node_modules/@tamagui/is-equal-shallow/src/index.ts","../node_modules/@tamagui/constants/src/constants.ts","../node_modules/@tamagui/web/src/hooks/useMedia.tsx","../node_modules/@tamagui/web/src/constants/constants.ts","../node_modules/@tamagui/web/src/config.ts","../node_modules/@tamagui/web/src/helpers/mediaObjectToString.ts","../node_modules/@tamagui/web/src/helpers/mediaState.ts","../node_modules/@tamagui/web/src/helpers/getGroupPropParts.ts","../node_modules/@tamagui/web/src/helpers/createMediaStyle.ts","../node_modules/@tamagui/web/src/hooks/useTheme.tsx","../node_modules/@tamagui/simple-hash/src/index.ts","../node_modules/@tamagui/helpers/src/composeEventHandlers.ts","../node_modules/@tamagui/helpers/src/types.ts","../node_modules/@tamagui/helpers/src/webOnlyStyleProps.ts","../node_modules/@tamagui/helpers/src/validStyleProps.ts","../node_modules/@tamagui/helpers/src/withStaticProperties.tsx","../node_modules/@tamagui/web/src/createVariable.ts","../node_modules/@tamagui/web/src/hooks/getThemeProxied.ts","../node_modules/@tamagui/web/src/hooks/useThemeState.ts","../node_modules/@tamagui/compose-refs/src/compose-refs.tsx","../node_modules/@tamagui/web/src/createComponent.tsx","../node_modules/@tamagui/web/src/constants/isDevTools.ts","../node_modules/@tamagui/web/src/defaultComponentState.tsx","../node_modules/@tamagui/web/src/eventHandling.ts","../node_modules/@tamagui/web/src/helpers/getDefaultProps.ts","../node_modules/@tamagui/web/src/helpers/getSplitStyles.tsx","../node_modules/@tamagui/web/src/helpers/defaultOffset.ts","../node_modules/@tamagui/web/src/helpers/normalizeShadow.ts","../node_modules/@tamagui/web/src/helpers/expandStyles.ts","../node_modules/@tamagui/web/src/helpers/normalizeColor.ts","../node_modules/@tamagui/web/src/helpers/normalizeValueWithProperty.ts","../node_modules/@tamagui/web/src/helpers/transformsToString.ts","../node_modules/@tamagui/web/src/helpers/getCSSStylesAtomic.ts","../node_modules/@tamagui/web/src/helpers/insertStyleRule.tsx","../node_modules/@tamagui/web/src/helpers/isActivePlatform.ts","../node_modules/@tamagui/web/src/helpers/isActiveTheme.ts","../node_modules/@tamagui/web/src/helpers/log.ts","../node_modules/@tamagui/web/src/helpers/expandStyle.ts","../node_modules/@tamagui/web/src/helpers/getVariantExtras.tsx","../node_modules/@tamagui/web/src/helpers/getTokenForKey.ts","../node_modules/@tamagui/web/src/helpers/isObj.ts","../node_modules/@tamagui/web/src/helpers/normalizeStyle.ts","../node_modules/@tamagui/web/src/helpers/platformResolveValue.ts","../node_modules/@tamagui/web/src/helpers/resolveCompoundTokens.ts","../node_modules/@tamagui/web/src/helpers/resolveRem.ts","../node_modules/@tamagui/web/src/helpers/nativeOnlyProps.ts","../node_modules/@tamagui/web/src/helpers/skipProps.ts","../node_modules/@tamagui/web/src/helpers/propMapper.ts","../node_modules/@tamagui/web/src/helpers/sortString.ts","../node_modules/@tamagui/web/src/helpers/mergeSlotStyleProps.ts","../node_modules/@tamagui/web/src/helpers/mergeRenderElementProps.ts","../node_modules/@tamagui/web/src/helpers/pointerEvents.ts","../node_modules/@tamagui/web/src/helpers/pseudoTransitions.ts","../node_modules/@tamagui/web/src/setupHooks.ts","../node_modules/@tamagui/web/src/helpers/setElementProps.tsx","../node_modules/@tamagui/web/src/helpers/subscribeToContextGroup.tsx","../node_modules/@tamagui/web/src/helpers/themeable.tsx","../node_modules/@tamagui/web/src/views/Theme.tsx","../node_modules/@tamagui/use-did-finish-ssr/src/index.ts","../node_modules/@tamagui/use-did-finish-ssr/src/ClientOnly.tsx","../node_modules/@tamagui/web/src/views/ThemeDebug.tsx","../node_modules/@tamagui/web/src/helpers/wrapStyleTags.tsx","../node_modules/@tamagui/web/src/hooks/useComponentState.ts","../node_modules/@tamagui/web/src/views/Slot.tsx","../node_modules/@tamagui/web/src/createFont.ts","../node_modules/@tamagui/web/src/createVariables.ts","../node_modules/@tamagui/web/src/createTokens.ts","../node_modules/@tamagui/web/src/setupReactNative.ts","../node_modules/@tamagui/web/src/helpers/mergeVariants.ts","../node_modules/@tamagui/web/src/styled.tsx","../node_modules/@tamagui/web/src/hooks/useProps.tsx","../node_modules/@tamagui/web/src/views/View.tsx","../node_modules/@tamagui/web/src/views/Text.tsx","../node_modules/@tamagui/use-presence/src/PresenceContext.tsx","../node_modules/@tamagui/use-presence/src/usePresence.ts","../node_modules/@tamagui/start-transition/src/index.ts","../node_modules/@tamagui/stacks/src/Stacks.tsx","../node_modules/@tamagui/stacks/src/getElevation.tsx","../node_modules/@tamagui/stacks/src/ThemeableStack.tsx","../node_modules/@tamagui/stacks/src/variants.tsx","../node_modules/@tamagui/get-token/src/index.ts","../node_modules/@tamagui/get-button-sized/src/index.ts","../node_modules/@tamagui/stacks/src/NestingContext.tsx","../node_modules/@tamagui/get-font-sized/src/index.ts","../node_modules/@tamagui/text/src/SizableText.tsx","../node_modules/@tamagui/text/src/wrapChildrenInText.tsx","../node_modules/@tamagui/native/src/globalState.ts","../node_modules/@tamagui/native/src/portalState.ts","../node_modules/@tamagui/native/src/components.tsx","../node_modules/@tamagui/z-index-stack/src/context.ts","../node_modules/@tamagui/portal/src/GorhomPortal.tsx","../node_modules/@tamagui/portal/src/constants.ts","../node_modules/@tamagui/font-size/src/getFontSize.ts","../node_modules/@tamagui/helpers-tamagui/src/getIcon.tsx","../node_modules/@tamagui/button/src/Button.tsx","../node_modules/@tamagui/focusable/src/registerFocusable.ts","../node_modules/@tamagui/element/src/useWebRef.ts","../node_modules/tamagui/src/createTamagui.ts","../node_modules/tamagui/src/views/TamaguiProvider.tsx","../node_modules/@tamagui/input/src/Input.tsx","../node_modules/@tamagui/input/src/shared.tsx","../node_modules/tamagui/src/views/Text.tsx","../node_modules/tamagui/src/index.ts","../node_modules/@tamagui/colors/src/legacy/dark/blue.ts","../node_modules/@tamagui/colors/src/legacy/dark/gray.ts","../node_modules/@tamagui/colors/src/legacy/dark/green.ts","../node_modules/@tamagui/colors/src/legacy/dark/orange.ts","../node_modules/@tamagui/colors/src/legacy/dark/pink.ts","../node_modules/@tamagui/colors/src/legacy/dark/purple.ts","../node_modules/@tamagui/colors/src/legacy/dark/red.ts","../node_modules/@tamagui/colors/src/legacy/dark/yellow.ts","../node_modules/@tamagui/colors/src/legacy/light/blue.ts","../node_modules/@tamagui/colors/src/legacy/light/gray.ts","../node_modules/@tamagui/colors/src/legacy/light/green.ts","../node_modules/@tamagui/colors/src/legacy/light/orange.ts","../node_modules/@tamagui/colors/src/legacy/light/pink.ts","../node_modules/@tamagui/colors/src/legacy/light/purple.ts","../node_modules/@tamagui/colors/src/legacy/light/red.ts","../node_modules/@tamagui/colors/src/legacy/light/yellow.ts","../node_modules/@tamagui/create-theme/src/isMinusZero.tsx","../node_modules/@tamagui/create-theme/src/themeInfo.tsx","../node_modules/@tamagui/create-theme/src/createTheme.tsx","../node_modules/@tamagui/create-theme/src/helpers.tsx","../node_modules/@tamagui/create-theme/src/masks.tsx","../node_modules/@tamagui/create-theme/src/applyMask.tsx","../node_modules/@tamagui/theme-builder/src/ThemeBuilder.ts","../node_modules/@tamagui/themes/src/utils.ts","../node_modules/@tamagui/themes/src/v3-tokens.ts","../node_modules/@tamagui/themes/src/v3-themes.ts","../node_modules/@tamagui/animation-helpers/src/normalizeTransition.ts","../node_modules/@tamagui/animations-css/src/createAnimations.tsx","../node_modules/@tamagui/config/src/animationsCSS.ts","../node_modules/@tamagui/font-inter/src/index.ts","../node_modules/@tamagui/font-silkscreen/src/index.ts","../node_modules/@tamagui/config/src/createGenericFont.ts","../node_modules/@tamagui/config/src/fonts.ts","../node_modules/@tamagui/config/src/media.ts","../node_modules/@tamagui/config/src/v3.ts","../src/tamagui.config.ts","../src/provider/AppProvider.tsx","../src/components/Button/Button.tsx","../src/components/TextField/TextField.tsx","../src/components/Card/Card.tsx"],"sourcesContent":["/**\n * @license React\n * react-dom.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction formatProdErrorMessage(code) {\n  var url = \"https://react.dev/errors/\" + code;\n  if (1 < arguments.length) {\n    url += \"?args[]=\" + encodeURIComponent(arguments[1]);\n    for (var i = 2; i < arguments.length; i++)\n      url += \"&args[]=\" + encodeURIComponent(arguments[i]);\n  }\n  return (\n    \"Minified React error #\" +\n    code +\n    \"; visit \" +\n    url +\n    \" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"\n  );\n}\nfunction noop() {}\nvar Internals = {\n    d: {\n      f: noop,\n      r: function () {\n        throw Error(formatProdErrorMessage(522));\n      },\n      D: noop,\n      C: noop,\n      L: noop,\n      m: noop,\n      X: noop,\n      S: noop,\n      M: noop\n    },\n    p: 0,\n    findDOMNode: null\n  },\n  REACT_PORTAL_TYPE = Symbol.for(\"react.portal\");\nfunction createPortal$1(children, containerInfo, implementation) {\n  var key =\n    3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null;\n  return {\n    $$typeof: REACT_PORTAL_TYPE,\n    key: null == key ? null : \"\" + key,\n    children: children,\n    containerInfo: containerInfo,\n    implementation: implementation\n  };\n}\nvar ReactSharedInternals =\n  React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;\nfunction getCrossOriginStringAs(as, input) {\n  if (\"font\" === as) return \"\";\n  if (\"string\" === typeof input)\n    return \"use-credentials\" === input ? input : \"\";\n}\nexports.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =\n  Internals;\nexports.createPortal = function (children, container) {\n  var key =\n    2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null;\n  if (\n    !container ||\n    (1 !== container.nodeType &&\n      9 !== container.nodeType &&\n      11 !== container.nodeType)\n  )\n    throw Error(formatProdErrorMessage(299));\n  return createPortal$1(children, container, null, key);\n};\nexports.flushSync = function (fn) {\n  var previousTransition = ReactSharedInternals.T,\n    previousUpdatePriority = Internals.p;\n  try {\n    if (((ReactSharedInternals.T = null), (Internals.p = 2), fn)) return fn();\n  } finally {\n    (ReactSharedInternals.T = previousTransition),\n      (Internals.p = previousUpdatePriority),\n      Internals.d.f();\n  }\n};\nexports.preconnect = function (href, options) {\n  \"string\" === typeof href &&\n    (options\n      ? ((options = options.crossOrigin),\n        (options =\n          \"string\" === typeof options\n            ? \"use-credentials\" === options\n              ? options\n              : \"\"\n            : void 0))\n      : (options = null),\n    Internals.d.C(href, options));\n};\nexports.prefetchDNS = function (href) {\n  \"string\" === typeof href && Internals.d.D(href);\n};\nexports.preinit = function (href, options) {\n  if (\"string\" === typeof href && options && \"string\" === typeof options.as) {\n    var as = options.as,\n      crossOrigin = getCrossOriginStringAs(as, options.crossOrigin),\n      integrity =\n        \"string\" === typeof options.integrity ? options.integrity : void 0,\n      fetchPriority =\n        \"string\" === typeof options.fetchPriority\n          ? options.fetchPriority\n          : void 0;\n    \"style\" === as\n      ? Internals.d.S(\n          href,\n          \"string\" === typeof options.precedence ? options.precedence : void 0,\n          {\n            crossOrigin: crossOrigin,\n            integrity: integrity,\n            fetchPriority: fetchPriority\n          }\n        )\n      : \"script\" === as &&\n        Internals.d.X(href, {\n          crossOrigin: crossOrigin,\n          integrity: integrity,\n          fetchPriority: fetchPriority,\n          nonce: \"string\" === typeof options.nonce ? options.nonce : void 0\n        });\n  }\n};\nexports.preinitModule = function (href, options) {\n  if (\"string\" === typeof href)\n    if (\"object\" === typeof options && null !== options) {\n      if (null == options.as || \"script\" === options.as) {\n        var crossOrigin = getCrossOriginStringAs(\n          options.as,\n          options.crossOrigin\n        );\n        Internals.d.M(href, {\n          crossOrigin: crossOrigin,\n          integrity:\n            \"string\" === typeof options.integrity ? options.integrity : void 0,\n          nonce: \"string\" === typeof options.nonce ? options.nonce : void 0\n        });\n      }\n    } else null == options && Internals.d.M(href);\n};\nexports.preload = function (href, options) {\n  if (\n    \"string\" === typeof href &&\n    \"object\" === typeof options &&\n    null !== options &&\n    \"string\" === typeof options.as\n  ) {\n    var as = options.as,\n      crossOrigin = getCrossOriginStringAs(as, options.crossOrigin);\n    Internals.d.L(href, as, {\n      crossOrigin: crossOrigin,\n      integrity:\n        \"string\" === typeof options.integrity ? options.integrity : void 0,\n      nonce: \"string\" === typeof options.nonce ? options.nonce : void 0,\n      type: \"string\" === typeof options.type ? options.type : void 0,\n      fetchPriority:\n        \"string\" === typeof options.fetchPriority\n          ? options.fetchPriority\n          : void 0,\n      referrerPolicy:\n        \"string\" === typeof options.referrerPolicy\n          ? options.referrerPolicy\n          : void 0,\n      imageSrcSet:\n        \"string\" === typeof options.imageSrcSet ? options.imageSrcSet : void 0,\n      imageSizes:\n        \"string\" === typeof options.imageSizes ? options.imageSizes : void 0,\n      media: \"string\" === typeof options.media ? options.media : void 0\n    });\n  }\n};\nexports.preloadModule = function (href, options) {\n  if (\"string\" === typeof href)\n    if (options) {\n      var crossOrigin = getCrossOriginStringAs(options.as, options.crossOrigin);\n      Internals.d.m(href, {\n        as:\n          \"string\" === typeof options.as && \"script\" !== options.as\n            ? options.as\n            : void 0,\n        crossOrigin: crossOrigin,\n        integrity:\n          \"string\" === typeof options.integrity ? options.integrity : void 0\n      });\n    } else Internals.d.m(href);\n};\nexports.requestFormReset = function (form) {\n  Internals.d.r(form);\n};\nexports.unstable_batchedUpdates = function (fn, a) {\n  return fn(a);\n};\nexports.useFormState = function (action, initialState, permalink) {\n  return ReactSharedInternals.H.useFormState(action, initialState, permalink);\n};\nexports.useFormStatus = function () {\n  return ReactSharedInternals.H.useHostTransitionStatus();\n};\nexports.version = \"19.2.4\";\n","/**\n * @license React\n * react-dom.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function noop() {}\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function createPortal$1(children, containerInfo, implementation) {\n      var key =\n        3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null;\n      try {\n        testStringCoercion(key);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      JSCompiler_inline_result &&\n        (console.error(\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            key[Symbol.toStringTag]) ||\n            key.constructor.name ||\n            \"Object\"\n        ),\n        testStringCoercion(key));\n      return {\n        $$typeof: REACT_PORTAL_TYPE,\n        key: null == key ? null : \"\" + key,\n        children: children,\n        containerInfo: containerInfo,\n        implementation: implementation\n      };\n    }\n    function getCrossOriginStringAs(as, input) {\n      if (\"font\" === as) return \"\";\n      if (\"string\" === typeof input)\n        return \"use-credentials\" === input ? input : \"\";\n    }\n    function getValueDescriptorExpectingObjectForWarning(thing) {\n      return null === thing\n        ? \"`null`\"\n        : void 0 === thing\n          ? \"`undefined`\"\n          : \"\" === thing\n            ? \"an empty string\"\n            : 'something with type \"' + typeof thing + '\"';\n    }\n    function getValueDescriptorExpectingEnumForWarning(thing) {\n      return null === thing\n        ? \"`null`\"\n        : void 0 === thing\n          ? \"`undefined`\"\n          : \"\" === thing\n            ? \"an empty string\"\n            : \"string\" === typeof thing\n              ? JSON.stringify(thing)\n              : \"number\" === typeof thing\n                ? \"`\" + thing + \"`\"\n                : 'something with type \"' + typeof thing + '\"';\n    }\n    function resolveDispatcher() {\n      var dispatcher = ReactSharedInternals.H;\n      null === dispatcher &&\n        console.error(\n          \"Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\\n1. You might have mismatching versions of React and the renderer (such as React DOM)\\n2. You might be breaking the Rules of Hooks\\n3. You might have more than one copy of React in the same app\\nSee https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem.\"\n        );\n      return dispatcher;\n    }\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());\n    var React = require(\"react\"),\n      Internals = {\n        d: {\n          f: noop,\n          r: function () {\n            throw Error(\n              \"Invalid form element. requestFormReset must be passed a form that was rendered by React.\"\n            );\n          },\n          D: noop,\n          C: noop,\n          L: noop,\n          m: noop,\n          X: noop,\n          S: noop,\n          M: noop\n        },\n        p: 0,\n        findDOMNode: null\n      },\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      ReactSharedInternals =\n        React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;\n    (\"function\" === typeof Map &&\n      null != Map.prototype &&\n      \"function\" === typeof Map.prototype.forEach &&\n      \"function\" === typeof Set &&\n      null != Set.prototype &&\n      \"function\" === typeof Set.prototype.clear &&\n      \"function\" === typeof Set.prototype.forEach) ||\n      console.error(\n        \"React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\"\n      );\n    exports.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =\n      Internals;\n    exports.createPortal = function (children, container) {\n      var key =\n        2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null;\n      if (\n        !container ||\n        (1 !== container.nodeType &&\n          9 !== container.nodeType &&\n          11 !== container.nodeType)\n      )\n        throw Error(\"Target container is not a DOM element.\");\n      return createPortal$1(children, container, null, key);\n    };\n    exports.flushSync = function (fn) {\n      var previousTransition = ReactSharedInternals.T,\n        previousUpdatePriority = Internals.p;\n      try {\n        if (((ReactSharedInternals.T = null), (Internals.p = 2), fn))\n          return fn();\n      } finally {\n        (ReactSharedInternals.T = previousTransition),\n          (Internals.p = previousUpdatePriority),\n          Internals.d.f() &&\n            console.error(\n              \"flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task.\"\n            );\n      }\n    };\n    exports.preconnect = function (href, options) {\n      \"string\" === typeof href && href\n        ? null != options && \"object\" !== typeof options\n          ? console.error(\n              \"ReactDOM.preconnect(): Expected the `options` argument (second) to be an object but encountered %s instead. The only supported option at this time is `crossOrigin` which accepts a string.\",\n              getValueDescriptorExpectingEnumForWarning(options)\n            )\n          : null != options &&\n            \"string\" !== typeof options.crossOrigin &&\n            console.error(\n              \"ReactDOM.preconnect(): Expected the `crossOrigin` option (second argument) to be a string but encountered %s instead. Try removing this option or passing a string value instead.\",\n              getValueDescriptorExpectingObjectForWarning(options.crossOrigin)\n            )\n        : console.error(\n            \"ReactDOM.preconnect(): Expected the `href` argument (first) to be a non-empty string but encountered %s instead.\",\n            getValueDescriptorExpectingObjectForWarning(href)\n          );\n      \"string\" === typeof href &&\n        (options\n          ? ((options = options.crossOrigin),\n            (options =\n              \"string\" === typeof options\n                ? \"use-credentials\" === options\n                  ? options\n                  : \"\"\n                : void 0))\n          : (options = null),\n        Internals.d.C(href, options));\n    };\n    exports.prefetchDNS = function (href) {\n      if (\"string\" !== typeof href || !href)\n        console.error(\n          \"ReactDOM.prefetchDNS(): Expected the `href` argument (first) to be a non-empty string but encountered %s instead.\",\n          getValueDescriptorExpectingObjectForWarning(href)\n        );\n      else if (1 < arguments.length) {\n        var options = arguments[1];\n        \"object\" === typeof options && options.hasOwnProperty(\"crossOrigin\")\n          ? console.error(\n              \"ReactDOM.prefetchDNS(): Expected only one argument, `href`, but encountered %s as a second argument instead. This argument is reserved for future options and is currently disallowed. It looks like the you are attempting to set a crossOrigin property for this DNS lookup hint. Browsers do not perform DNS queries using CORS and setting this attribute on the resource hint has no effect. Try calling ReactDOM.prefetchDNS() with just a single string argument, `href`.\",\n              getValueDescriptorExpectingEnumForWarning(options)\n            )\n          : console.error(\n              \"ReactDOM.prefetchDNS(): Expected only one argument, `href`, but encountered %s as a second argument instead. This argument is reserved for future options and is currently disallowed. Try calling ReactDOM.prefetchDNS() with just a single string argument, `href`.\",\n              getValueDescriptorExpectingEnumForWarning(options)\n            );\n      }\n      \"string\" === typeof href && Internals.d.D(href);\n    };\n    exports.preinit = function (href, options) {\n      \"string\" === typeof href && href\n        ? null == options || \"object\" !== typeof options\n          ? console.error(\n              \"ReactDOM.preinit(): Expected the `options` argument (second) to be an object with an `as` property describing the type of resource to be preinitialized but encountered %s instead.\",\n              getValueDescriptorExpectingEnumForWarning(options)\n            )\n          : \"style\" !== options.as &&\n            \"script\" !== options.as &&\n            console.error(\n              'ReactDOM.preinit(): Expected the `as` property in the `options` argument (second) to contain a valid value describing the type of resource to be preinitialized but encountered %s instead. Valid values for `as` are \"style\" and \"script\".',\n              getValueDescriptorExpectingEnumForWarning(options.as)\n            )\n        : console.error(\n            \"ReactDOM.preinit(): Expected the `href` argument (first) to be a non-empty string but encountered %s instead.\",\n            getValueDescriptorExpectingObjectForWarning(href)\n          );\n      if (\n        \"string\" === typeof href &&\n        options &&\n        \"string\" === typeof options.as\n      ) {\n        var as = options.as,\n          crossOrigin = getCrossOriginStringAs(as, options.crossOrigin),\n          integrity =\n            \"string\" === typeof options.integrity ? options.integrity : void 0,\n          fetchPriority =\n            \"string\" === typeof options.fetchPriority\n              ? options.fetchPriority\n              : void 0;\n        \"style\" === as\n          ? Internals.d.S(\n              href,\n              \"string\" === typeof options.precedence\n                ? options.precedence\n                : void 0,\n              {\n                crossOrigin: crossOrigin,\n                integrity: integrity,\n                fetchPriority: fetchPriority\n              }\n            )\n          : \"script\" === as &&\n            Internals.d.X(href, {\n              crossOrigin: crossOrigin,\n              integrity: integrity,\n              fetchPriority: fetchPriority,\n              nonce: \"string\" === typeof options.nonce ? options.nonce : void 0\n            });\n      }\n    };\n    exports.preinitModule = function (href, options) {\n      var encountered = \"\";\n      (\"string\" === typeof href && href) ||\n        (encountered +=\n          \" The `href` argument encountered was \" +\n          getValueDescriptorExpectingObjectForWarning(href) +\n          \".\");\n      void 0 !== options && \"object\" !== typeof options\n        ? (encountered +=\n            \" The `options` argument encountered was \" +\n            getValueDescriptorExpectingObjectForWarning(options) +\n            \".\")\n        : options &&\n          \"as\" in options &&\n          \"script\" !== options.as &&\n          (encountered +=\n            \" The `as` option encountered was \" +\n            getValueDescriptorExpectingEnumForWarning(options.as) +\n            \".\");\n      if (encountered)\n        console.error(\n          \"ReactDOM.preinitModule(): Expected up to two arguments, a non-empty `href` string and, optionally, an `options` object with a valid `as` property.%s\",\n          encountered\n        );\n      else\n        switch (\n          ((encountered =\n            options && \"string\" === typeof options.as ? options.as : \"script\"),\n          encountered)\n        ) {\n          case \"script\":\n            break;\n          default:\n            (encountered =\n              getValueDescriptorExpectingEnumForWarning(encountered)),\n              console.error(\n                'ReactDOM.preinitModule(): Currently the only supported \"as\" type for this function is \"script\" but received \"%s\" instead. This warning was generated for `href` \"%s\". In the future other module types will be supported, aligning with the import-attributes proposal. Learn more here: (https://github.com/tc39/proposal-import-attributes)',\n                encountered,\n                href\n              );\n        }\n      if (\"string\" === typeof href)\n        if (\"object\" === typeof options && null !== options) {\n          if (null == options.as || \"script\" === options.as)\n            (encountered = getCrossOriginStringAs(\n              options.as,\n              options.crossOrigin\n            )),\n              Internals.d.M(href, {\n                crossOrigin: encountered,\n                integrity:\n                  \"string\" === typeof options.integrity\n                    ? options.integrity\n                    : void 0,\n                nonce:\n                  \"string\" === typeof options.nonce ? options.nonce : void 0\n              });\n        } else null == options && Internals.d.M(href);\n    };\n    exports.preload = function (href, options) {\n      var encountered = \"\";\n      (\"string\" === typeof href && href) ||\n        (encountered +=\n          \" The `href` argument encountered was \" +\n          getValueDescriptorExpectingObjectForWarning(href) +\n          \".\");\n      null == options || \"object\" !== typeof options\n        ? (encountered +=\n            \" The `options` argument encountered was \" +\n            getValueDescriptorExpectingObjectForWarning(options) +\n            \".\")\n        : (\"string\" === typeof options.as && options.as) ||\n          (encountered +=\n            \" The `as` option encountered was \" +\n            getValueDescriptorExpectingObjectForWarning(options.as) +\n            \".\");\n      encountered &&\n        console.error(\n          'ReactDOM.preload(): Expected two arguments, a non-empty `href` string and an `options` object with an `as` property valid for a `<link rel=\"preload\" as=\"...\" />` tag.%s',\n          encountered\n        );\n      if (\n        \"string\" === typeof href &&\n        \"object\" === typeof options &&\n        null !== options &&\n        \"string\" === typeof options.as\n      ) {\n        encountered = options.as;\n        var crossOrigin = getCrossOriginStringAs(\n          encountered,\n          options.crossOrigin\n        );\n        Internals.d.L(href, encountered, {\n          crossOrigin: crossOrigin,\n          integrity:\n            \"string\" === typeof options.integrity ? options.integrity : void 0,\n          nonce: \"string\" === typeof options.nonce ? options.nonce : void 0,\n          type: \"string\" === typeof options.type ? options.type : void 0,\n          fetchPriority:\n            \"string\" === typeof options.fetchPriority\n              ? options.fetchPriority\n              : void 0,\n          referrerPolicy:\n            \"string\" === typeof options.referrerPolicy\n              ? options.referrerPolicy\n              : void 0,\n          imageSrcSet:\n            \"string\" === typeof options.imageSrcSet\n              ? options.imageSrcSet\n              : void 0,\n          imageSizes:\n            \"string\" === typeof options.imageSizes\n              ? options.imageSizes\n              : void 0,\n          media: \"string\" === typeof options.media ? options.media : void 0\n        });\n      }\n    };\n    exports.preloadModule = function (href, options) {\n      var encountered = \"\";\n      (\"string\" === typeof href && href) ||\n        (encountered +=\n          \" The `href` argument encountered was \" +\n          getValueDescriptorExpectingObjectForWarning(href) +\n          \".\");\n      void 0 !== options && \"object\" !== typeof options\n        ? (encountered +=\n            \" The `options` argument encountered was \" +\n            getValueDescriptorExpectingObjectForWarning(options) +\n            \".\")\n        : options &&\n          \"as\" in options &&\n          \"string\" !== typeof options.as &&\n          (encountered +=\n            \" The `as` option encountered was \" +\n            getValueDescriptorExpectingObjectForWarning(options.as) +\n            \".\");\n      encountered &&\n        console.error(\n          'ReactDOM.preloadModule(): Expected two arguments, a non-empty `href` string and, optionally, an `options` object with an `as` property valid for a `<link rel=\"modulepreload\" as=\"...\" />` tag.%s',\n          encountered\n        );\n      \"string\" === typeof href &&\n        (options\n          ? ((encountered = getCrossOriginStringAs(\n              options.as,\n              options.crossOrigin\n            )),\n            Internals.d.m(href, {\n              as:\n                \"string\" === typeof options.as && \"script\" !== options.as\n                  ? options.as\n                  : void 0,\n              crossOrigin: encountered,\n              integrity:\n                \"string\" === typeof options.integrity\n                  ? options.integrity\n                  : void 0\n            }))\n          : Internals.d.m(href));\n    };\n    exports.requestFormReset = function (form) {\n      Internals.d.r(form);\n    };\n    exports.unstable_batchedUpdates = function (fn, a) {\n      return fn(a);\n    };\n    exports.useFormState = function (action, initialState, permalink) {\n      return resolveDispatcher().useFormState(action, initialState, permalink);\n    };\n    exports.useFormStatus = function () {\n      return resolveDispatcher().useHostTransitionStatus();\n    };\n    exports.version = \"19.2.4\";\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());\n  })();\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","// let it be called as a template string tag function\n\nexport function timer() {\n  let runs = 0\n  const typesOfRuns = new Set<string>()\n  const timings: Record<string, number> = {}\n\n  function print() {\n    const typeRuns = runs / typesOfRuns.size\n    let totalTime = 0\n\n    const out = [\n      `Ran ${typeRuns} per-type, ${runs} total`,\n      ...[...typesOfRuns].map((name) => {\n        if (name.endsWith('(ignore)')) {\n          // avoid counting (ignore) timings towards total\n          return\n        }\n        const avg = `avg ${`${timings[name] / typeRuns}`.slice(0, 9).padEnd(9)}ms`\n        const total = timings[name]\n        totalTime += total\n        return `${name.slice(0, 30).padStart(31)} | ${avg} | total ${total}ms`\n      }),\n      `                                    total ${totalTime}ms`,\n    ].join('\\n')\n\n    console.info(out)\n    return out\n  }\n\n  return {\n    start(opts?: { quiet?: boolean }) {\n      const quiet = opts?.quiet ?? true\n\n      function time(strings: TemplateStringsArray, ...vars: any[]) {\n        const elapsed = performance.now() - start\n        const tag = templateToString(strings, ...vars)\n        typesOfRuns.add(tag)\n        runs++\n        timings[tag] ??= 0\n        timings[tag] += elapsed\n        if (!quiet) {\n          let result = ''\n          strings.forEach((str, i) => {\n            result += `${str}${i === strings.length - 1 ? '' : vars[i]}`\n          })\n          console.info(`${`${elapsed}ms`.slice(0, 6).padStart(7)} |`, result)\n        }\n        start = performance.now()\n      }\n\n      let start = performance.now()\n      time['print'] = print\n\n      return time\n    },\n\n    profile() {\n      return {\n        timings,\n        runs,\n      }\n    },\n\n    print,\n  }\n}\n\nfunction templateToString(strings: TemplateStringsArray, ...vars: any[]): string {\n  return strings.reduce(\n    (result, str, i) => result + str + (vars[i] !== undefined ? vars[i] : ''),\n    ''\n  )\n}\n","import { useContext } from 'react'\nimport { createStyledContext } from '../helpers/createStyledContext'\nimport type { ComponentContextI } from '../types'\n\nexport const ComponentContext = createStyledContext<ComponentContextI>({\n  disableSSR: undefined,\n  inText: false,\n  language: null,\n  animationDriver: null,\n  setParentFocusState: null,\n  insets: null,\n})\n\nexport const useConfiguration = () => {\n  return useContext(ComponentContext)\n}\n","import type { Context, ReactNode } from 'react'\nimport React from 'react'\nimport type { StyledContext } from '../types'\nimport { mergeProps } from './mergeProps'\nimport { objectIdentityKey } from './objectIdentityKey'\n\nexport function createStyledContext<VariantProps extends Record<string, any>>(\n  defaultValues?: VariantProps,\n  namespace = ''\n): StyledContext<VariantProps> {\n  // avoid react compiler - we aren't breaking its rules but it mis-interprets\n  // how we change the context value\n  'use no memo'\n\n  // lazy initialization fixes vite ssr hmr - module-level assignments can fail\n  // when React is undefined during __esm re-initialization order issues.\n  // also React.createContext is optimized oddly by React compiler and our\n  // uncommon usage confuses it, so we use dynamic access\n  const createReactContext = React[\n    Math.random() ? 'createContext' : 'createContext'\n  ] as typeof React.createContext\n  const useReactMemo = React[\n    Math.random() ? 'useMemo' : 'useMemo'\n  ] as typeof React.useMemo\n  const useReactContext = React[\n    Math.random() ? 'useContext' : 'useContext'\n  ] as typeof React.useContext\n\n  const OGContext = createReactContext<VariantProps | undefined>(defaultValues)\n  const OGProvider = OGContext.Provider\n  const Context = OGContext as any as StyledContext<VariantProps>\n  const scopedContexts = new Map<string, Context<VariantProps | undefined>>()\n  const LastScopeInNamespace = createReactContext<string>(namespace)\n\n  function getOrCreateScopedContext(scope: string) {\n    let ScopedContext = scopedContexts.get(scope)\n    if (!ScopedContext) {\n      ScopedContext = createReactContext<VariantProps | undefined>(defaultValues)\n      scopedContexts.set(scope, ScopedContext)\n    }\n    return ScopedContext!\n  }\n\n  const getNamespacedScope = (scope: string) =>\n    namespace ? `${namespace}--${scope}` : scope\n\n  const Provider = ({\n    children,\n    scope: scopeIn,\n    // performance: avoid creating objects\n    __disableMergeDefaultValues,\n    ...values\n  }: VariantProps & { children?: ReactNode; scope: string }) => {\n    const scope = getNamespacedScope(scopeIn)\n\n    const next = useReactMemo(() => {\n      if (__disableMergeDefaultValues) {\n        // we already merged and want to keep ordering\n        return values\n      }\n      return mergeProps(defaultValues!, values)\n    }, [objectIdentityKey(values)])\n\n    let ScopedProvider = OGProvider\n    if (scope) {\n      ScopedProvider = getOrCreateScopedContext(scope).Provider\n    }\n    return (\n      <LastScopeInNamespace.Provider value={scope}>\n        <ScopedProvider value={next as VariantProps}>{children}</ScopedProvider>\n      </LastScopeInNamespace.Provider>\n    )\n  }\n\n  // use consumerComponent just to give a better error message\n  const useStyledContext = (scopeIn = '') => {\n    const lastScopeInNamespace = useReactContext(LastScopeInNamespace)\n    const scope = namespace\n      ? scopeIn\n        ? getNamespacedScope(scopeIn)\n        : lastScopeInNamespace\n      : scopeIn\n    const context = scope ? getOrCreateScopedContext(scope) : OGContext\n    const value = useReactContext(context!) as VariantProps\n    return value\n  }\n\n  // @ts-expect-error we are overriding default provider\n  Context.Provider = Provider\n  Context.props = defaultValues\n  Context.context = OGContext as Context<VariantProps>\n  Context.useStyledContext = useStyledContext\n\n  return Context\n}\n","// *0 order matches to *1\n\nexport const pseudoDescriptorsBase = {\n  // order of keys here important! in priority order\n  hoverStyle: {\n    name: 'hover',\n    priority: 2,\n  },\n  pressStyle: {\n    name: 'active',\n    stateKey: 'press',\n    priority: 3,\n  },\n  focusVisibleStyle: {\n    name: 'focus-visible',\n    priority: 4,\n    stateKey: 'focusVisible',\n  },\n  focusStyle: {\n    name: 'focus',\n    priority: 4,\n  },\n  focusWithinStyle: {\n    name: 'focus-within',\n    priority: 4,\n    stateKey: 'focusWithin',\n  },\n  disabledStyle: {\n    name: 'disabled',\n    priority: 5,\n    stateKey: 'disabled',\n  },\n} as const\n\nexport const pseudoPriorities = {\n  hover: pseudoDescriptorsBase.hoverStyle.priority,\n  press: pseudoDescriptorsBase.pressStyle.priority,\n  focus: pseudoDescriptorsBase.focusStyle.priority,\n  focusVisible: pseudoDescriptorsBase.focusVisibleStyle.priority,\n  focusWithin: pseudoDescriptorsBase.focusWithinStyle.priority,\n  disabled: pseudoDescriptorsBase.disabledStyle.priority,\n}\n\nexport type PseudoDescriptorKey = keyof typeof pseudoDescriptorsBase\n\nexport const pseudoDescriptors: Record<\n  PseudoDescriptorKey | 'enterStyle' | 'exitStyle',\n  PseudoDescriptor\n> = {\n  ...pseudoDescriptorsBase,\n  enterStyle: {\n    name: 'enter',\n    selector: '.t_unmounted',\n    priority: 4,\n  },\n  exitStyle: {\n    name: 'exit',\n    priority: 5,\n  },\n}\n\nexport type PseudoDescriptor = {\n  name: string\n  priority: number\n  stateKey?: string\n  selector?: string\n}\n\nexport type PseudoDescriptors = {\n  [Key in keyof typeof pseudoDescriptors]: PseudoDescriptor\n}\n\n// media always above pseudos\nexport const defaultMediaImportance = Object.keys(pseudoDescriptors).length\n","/**\n * Preserves prop ordering, so that the order most closely matches the last spread objects\n * Useful for having { ...defaultProps, ...props } that ensure props ordering is always kept\n *\n * Honestly this is somehwat backwards logically from Object.assign, reason was that we typically\n * are merging defaultProps, givenProps, but we started using it elsewhere and now its a bit confusing\n * Should look into refactoring this to match common usage\n *\n * Merges sub-objects if they start are pseudo-keys or media-key-like (start with \"$\")\n *\n *    Given:\n *      mergeProps({ a: 1, b: 2 }, { b: 1, a: 2 })\n *    The final key order will be:\n *      b, a\n *\n */\n\nimport { pseudoDescriptors } from './pseudoDescriptors'\n\nexport type GenericProps = Record<string, any>\n\nexport const mergeProps = (defaultProps: object, props: object) => {\n  const out: GenericProps = {}\n\n  // in general objects keys are sorted by order of insertion\n  // we merge \"defaultProps\" first as they should come first\n  // (so Object.keys(finalProps) will list [...defaultPropKeys] first)\n  // but we ignore any keys from props, and merge it after, that way\n  // final order is [...defaultPropKeys, ...propKeys]\n\n  // ⚠️ keep in sync with mergeComponentProps logic\n\n  for (const key in defaultProps) {\n    if (key in props) continue\n    out[key] = defaultProps[key]\n  }\n\n  for (const key in props) {\n    mergeProp(out, defaultProps, props, key)\n  }\n\n  return out\n}\n\n// merge props but also handles defaultProps + styledContext\nexport const mergeComponentProps = (\n  // this is \"a\" in mergeProps\n  defaultProps: object | null | undefined,\n  contextProps: object | undefined,\n  // this is \"b\" in mergeProps\n  props: object\n) => {\n  let overriddenContext: GenericProps | null = null\n\n  if (!defaultProps && !contextProps) {\n    return [props, overriddenContext] as const\n  }\n\n  if (defaultProps && !contextProps) {\n    return [mergeProps(defaultProps, props), overriddenContext] as const\n  }\n\n  // the only unique case is contextProps, we need to track overrides and do something a bit tricky\n  // since we respect prop order for styles, we want to preserve the object key order in overriddenContext\n\n  const out: GenericProps = {}\n\n  // ⚠️ keep in sync with mergeProps logic\n  // same logic as mergeProps but tracking overrides!\n\n  for (const key in defaultProps) {\n    if (key in props) continue\n    out[key] = defaultProps[key]\n  }\n\n  // styled context props go after defaultProps but before props\n  for (const key in contextProps) {\n    if (key in props) continue\n    const contextValue = contextProps[key]\n    // don't merge undefined context values to preserve inheritance\n    if (contextValue !== undefined) {\n      out[key] = contextValue\n    }\n  }\n\n  for (const key in props) {\n    mergeProp(out, defaultProps, props, key)\n    if (contextProps && key in contextProps) {\n      overriddenContext ||= {}\n      overriddenContext[key] = props[key]\n    }\n  }\n\n  return [out, overriddenContext] as const\n}\n\nfunction mergeProp(\n  out: object,\n  defaultProps: object | undefined | null,\n  props: object,\n  key: string\n) {\n  let val = props[key]\n\n  // one special case - we merge tamagui style sub-objects\n  if (\n    defaultProps &&\n    key in defaultProps &&\n    (key in pseudoDescriptors || key[0] === '$') &&\n    val &&\n    typeof val === 'object'\n  ) {\n    const defaultVal = defaultProps[key]\n    if (defaultVal && typeof defaultVal === 'object') {\n      // use merge props so we prefer the key ordering the the last merged\n      val = mergeProps(defaultVal, val)\n    }\n  }\n\n  out[key] = val\n}\n","export function objectIdentityKey(obj: object) {\n  let k = ''\n  for (const key in obj) {\n    k += key\n    const arg = obj[key]\n    let type = typeof arg\n    if (!arg || (type !== 'object' && type !== 'function')) {\n      k += type + arg\n    } else if (cache.has(arg)) {\n      k += cache.get(arg)\n    } else {\n      let v = Math.random()\n      cache.set(arg, v)\n      k += v\n    }\n  }\n  return k\n}\n\nconst cache = new WeakMap()\n","import { createContext } from 'react'\nimport type { AllGroupContexts } from '../types'\n\nexport const GroupContext = createContext<AllGroupContexts | null>(null)\n","import { useCallback } from 'react'\n\ntype DebugProp = null | undefined | boolean | 'profile' | 'verbose' | 'break'\n\nexport type CallbackSetState<State> = (next: (cb: State) => State) => void\n\nexport function useCreateShallowSetState<State extends Record<string, unknown>>(\n  setter: CallbackSetState<State>,\n  debug?: DebugProp\n): React.Dispatch<React.SetStateAction<Partial<State>>> {\n  // this must be memoized or it ruins performance in components\n  return useCallback(\n    (stateOrGetState) => {\n      setter((prev) => {\n        const next =\n          typeof stateOrGetState === 'function' ? stateOrGetState(prev) : stateOrGetState\n        const update = mergeIfNotShallowEqual(prev, next)\n\n        if (process.env.NODE_ENV === 'development') {\n          if (debug && update !== prev) {\n            console.groupCollapsed(`setStateShallow CHANGE`, '=>', update)\n            console.info(`previously`, prev)\n            console.trace()\n            console.groupEnd()\n            if (debug === 'break') {\n              // debugger is intentionally here for debugging\n            }\n          }\n        }\n        return update\n      })\n    },\n    [setter, debug]\n  )\n}\n\nexport function mergeIfNotShallowEqual<State extends Record<string, unknown>>(\n  prev: State,\n  next: Partial<State>\n): State {\n  if (!prev || !next || isEqualShallow(prev, next)) {\n    if (!prev) return next as State\n    return prev\n  }\n  return { ...prev, ...next }\n}\n\nexport function isEqualShallow(\n  prev: Record<string, unknown>,\n  next: Record<string, unknown>\n): boolean {\n  for (const key in next) {\n    if (prev[key] !== next[key]) {\n      return false\n    }\n  }\n  return true\n}\n","import { useEffect, useLayoutEffect } from 'react'\n\nexport const isWeb: boolean = true\nexport const isBrowser: boolean = typeof window !== 'undefined'\nexport const isServer: boolean = isWeb && !isBrowser\nexport const isClient: boolean = isWeb && isBrowser\n/** @deprecated use isBrowser instead */\nexport const isWindowDefined: boolean = isBrowser\n\nexport const useIsomorphicLayoutEffect: typeof useEffect = isServer\n  ? useEffect\n  : useLayoutEffect\n\nexport const isChrome: boolean =\n  typeof navigator !== 'undefined' && /Chrome/.test(navigator.userAgent || '')\n\nexport const isWebTouchable: boolean =\n  isClient && ('ontouchstart' in window || navigator.maxTouchPoints > 0)\n\nexport const isTouchable: boolean = !isWeb || isWebTouchable\n// set :boolean to avoid inferring type to false\nexport const isAndroid: boolean = false\nexport const isIos: boolean = process.env.TEST_NATIVE_PLATFORM === 'ios'\nexport const currentPlatform: 'web' | 'ios' | 'native' | 'android' = 'web'\n","import { isServer, isWeb } from '@tamagui/constants'\nimport { useRef, useSyncExternalStore } from 'react'\nimport { getSetting } from '../config'\nimport { resetMediaStyleCache } from '../helpers/createMediaStyle'\nimport { matchMedia } from '../helpers/matchMedia'\nimport { mediaObjectToString } from '../helpers/mediaObjectToString'\nimport {\n  getMedia,\n  mediaKeys,\n  mediaQueryConfig,\n  setMediaState,\n} from '../helpers/mediaState'\nimport type {\n  ComponentContextI,\n  DebugProp,\n  GetStyleState,\n  IsMediaType,\n  MediaQueryState,\n  TamaguiInternalConfig,\n  UseMediaState,\n  WidthHeight,\n} from '../types'\nimport { defaultMediaImportance } from '../helpers/pseudoDescriptors'\n\nconst mediaKeyRegex = /\\$(platform|theme|group)-/\n\nexport const isMediaKey = (key: string): boolean => {\n  if (key[0] !== '$') return false\n  if (mediaKeys.has(key)) return true\n  if (mediaKeyRegex.test(key)) return true\n  return false\n}\n\nexport const getMediaKey = (key: string): IsMediaType => {\n  if (key[0] !== '$') return false\n  if (mediaKeys.has(key)) return true\n  const match = key.match(mediaKeyRegex)\n  if (match) return match[1] as 'platform' | 'theme' | 'group'\n  return false\n}\n\n// for SSR capture it at time of startup\nlet initState: MediaQueryState\n\nlet mediaKeysOrdered: string[]\n\nexport const getMediaKeyImportance = (key: string) => {\n  if (process.env.NODE_ENV === 'development' && key[0] === '$') {\n    throw new Error('use short key')\n  }\n\n  // + 100 because we set base usedKeys=1, pseudos are 2-N (however many we have)\n  // all media go above all pseudos so we need to pad it based on that\n  // right now theres 5 pseudos but in the future could be a few more\n  return mediaKeysOrdered.indexOf(key) + 100\n}\n\nconst dispose = new Set<Function>()\n\nlet mediaVersion = 0\n\nexport const configureMedia = (config: TamaguiInternalConfig) => {\n  const { media } = config\n  const mediaQueryDefaultActive = getSetting('mediaQueryDefaultActive')\n  if (!media) return\n  mediaVersion++\n  // reset cached media style prefixes/selectors so they get recalculated with new key order\n  resetMediaStyleCache()\n  for (const key in media) {\n    getMedia()[key] = mediaQueryDefaultActive?.[key] || false\n    mediaKeys.add(`$${key}`)\n  }\n  Object.assign(mediaQueryConfig, media)\n  initState = { ...getMedia() }\n  mediaKeysOrdered = Object.keys(media)\n  setupMediaListeners()\n}\n\nfunction unlisten() {\n  dispose.forEach((cb) => cb())\n  dispose.clear()\n}\n\n/**\n * Note: This should *not* set the state on the first render!\n * Because to avoid hydration issues SSR must match the server\n * *and then* re-render with the actual media query state.\n */\nlet setupVersion = -1\nexport function setupMediaListeners() {\n  if (isWeb && isServer) return\n  if (process.env.IS_STATIC) return\n\n  // avoid setting up more than once per config\n  if (setupVersion === mediaVersion) return\n  setupVersion = mediaVersion\n\n  // hmr, undo existing before re-binding\n  unlisten()\n\n  for (const key in mediaQueryConfig) {\n    const str = mediaObjectToString(mediaQueryConfig[key])\n    const getMatch = () => matchMedia(str)\n    const match = getMatch()\n    if (!match) {\n      throw new Error('⚠️ No match')\n    }\n\n    // react native needs these deprecated apis for now\n    match.addListener(update)\n    dispose.add(() => {\n      match.removeListener(update)\n    })\n\n    function update() {\n      const next = !!getMatch().matches\n      if (next === getMedia()[key]) return\n      setMediaState({ ...getMedia(), [key]: next })\n      updateMediaListeners()\n    }\n\n    update()\n  }\n}\n\nconst listeners = new Set<any>()\n\nexport function updateMediaListeners() {\n  listeners.forEach((cb) => cb(getMedia()))\n}\n\ntype MediaState = {\n  enabled?: boolean\n  keys?: Set<string> | null\n}\n\nconst States = new WeakMap<any, MediaState>()\n\nexport function setMediaShouldUpdate(\n  ref: any,\n  enabled?: boolean,\n  keys?: MediaState['keys']\n) {\n  const cur = States.get(ref)\n\n  if (!cur || cur.enabled !== enabled || keys) {\n    States.set(ref, {\n      ...cur,\n      enabled,\n      keys,\n    })\n  }\n}\n\nfunction subscribe(subscriber: () => void) {\n  listeners.add(subscriber)\n  return () => {\n    listeners.delete(subscriber)\n  }\n}\n\nexport function useMedia(\n  componentContext?: ComponentContextI,\n  debug?: DebugProp\n): UseMediaState {\n  const componentState = componentContext ? States.get(componentContext) : null\n\n  const internalRef = useRef<{\n    keys: Set<string>\n    lastState: MediaQueryState\n    pendingState?: MediaQueryState\n  }>(null)\n  if (!internalRef.current) {\n    internalRef.current = {\n      keys: new Set(),\n      lastState: getMedia(),\n    }\n  }\n\n  // reset on next render\n  if (internalRef.current.pendingState) {\n    internalRef.current.lastState = internalRef.current.pendingState\n    internalRef.current.pendingState = undefined\n  }\n\n  const { keys } = internalRef.current\n\n  // clear each render to track only rendered touched keys\n  if (keys.size) {\n    keys.clear()\n  }\n\n  const state = useSyncExternalStore(\n    subscribe,\n    () => {\n      const curKeys = componentState?.keys || keys\n      const { lastState, pendingState } = internalRef.current!\n\n      if (!curKeys.size) {\n        return lastState\n      }\n\n      const ms = getMedia()\n      for (const key of curKeys) {\n        if (ms[key] !== (pendingState || lastState)[key]) {\n          if (process.env.NODE_ENV === 'development' && debug) {\n            console.warn(`useMedia() ✍️`, key, lastState[key], '=>', ms[key])\n          }\n\n          // in emitter mode (no-rerender) avoid changing state, instead emit\n          if (componentContext?.mediaEmit) {\n            componentContext.mediaEmit(ms)\n            internalRef.current!.pendingState = ms\n            return lastState\n          }\n\n          internalRef.current!.lastState = ms\n\n          return ms\n        }\n      }\n\n      return lastState\n    },\n    getServerSnapshot\n  )\n\n  return new Proxy(state, {\n    get(_, key) {\n      if (!disableMediaTouch && typeof key === 'string') {\n        keys.add(key)\n      }\n      return Reflect.get(state, key)\n    },\n  })\n}\n\nconst getServerSnapshot = () => initState\n\nlet disableMediaTouch = false\nexport function _disableMediaTouch(val: boolean) {\n  disableMediaTouch = val\n}\n\nexport function getMediaState(mediaGroups: Set<string>, layout: WidthHeight) {\n  disableMediaTouch = true\n  let res: Record<string, boolean>\n  try {\n    res = Object.fromEntries(\n      [...mediaGroups].map((mediaKey) => {\n        return [mediaKey, mediaKeyMatch(mediaKey, layout as any)]\n      })\n    )\n  } finally {\n    disableMediaTouch = false\n  }\n  return res\n}\n\nexport const getMediaImportanceIfMoreImportant = (\n  mediaKey: string,\n  key: string,\n  styleState: GetStyleState,\n  isSizeMedia: boolean\n) => {\n  const importance = isSizeMedia\n    ? getMediaKeyImportance(mediaKey)\n    : defaultMediaImportance\n  const usedKeys = styleState.usedKeys\n  return !usedKeys[key] || importance > usedKeys[key] ? importance : null\n}\n\nconst cachedMediaKeyToQuery: Record<string, string> = {}\n\nexport function mediaKeyToQuery(key: string) {\n  return (\n    cachedMediaKeyToQuery[key] ||\n    (cachedMediaKeyToQuery[key] = mediaObjectToString(mediaQueryConfig[key]))\n  )\n}\n\nexport function mediaKeyMatch(\n  key: string,\n  dimensions: { width: number; height: number }\n) {\n  const mediaQueries = mediaQueryConfig[key]\n  const result = Object.keys(mediaQueries).every((query) => {\n    const expectedVal = +mediaQueries[query]\n    const isMax = query.startsWith('max')\n    const isWidth = query.endsWith('Width')\n    const givenVal = dimensions[isWidth ? 'width' : 'height']\n    // if not max then min\n    return isMax ? givenVal < expectedVal : givenVal > expectedVal\n  })\n  return result\n}\n","import type { StackStyle } from '../types'\n\nexport const THEME_NAME_SEPARATOR = '_'\nexport const THEME_CLASSNAME_PREFIX = 't_'\nexport const FONT_DATA_ATTRIBUTE_NAME = 'data-tamagui-font'\n\nexport const viewDefaultStyles: StackStyle = {}\n\nexport const webViewFlexCompatStyles: StackStyle = {\n  display: 'flex',\n  alignItems: 'stretch',\n  flexDirection: 'column',\n  flexBasis: 'auto',\n  boxSizing: 'border-box',\n  minHeight: 0,\n  minWidth: 0,\n  flexShrink: 0,\n}\n\nif (process.env.TAMAGUI_TARGET === 'web') {\n  Object.assign(viewDefaultStyles, webViewFlexCompatStyles)\n}\n\nexport const MISSING_THEME_MESSAGE =\n  process.env.NODE_ENV === 'development'\n    ? `Can't find Tamagui configuration.\n    \nMost of the time this is due to having mis-matched versions of Tamagui dependencies, or bundlers somehow duplicating them.\nFirst step is to ensure every \"tamagui\" and \"@tamagui/*\" dependency is on the same version, we have a CLI tool to help: \n\n  npx @tamagui/cli check\n`\n    : `Missing theme.`\n","import { isWeb } from '@tamagui/constants'\nimport { MISSING_THEME_MESSAGE } from './constants/constants'\nimport type {\n  AnimationDriver,\n  ConfigListener,\n  GenericTamaguiSettings,\n  TamaguiInternalConfig,\n  Token,\n  Tokens,\n  TokensMerged,\n} from './types'\n\nlet conf: TamaguiInternalConfig | null\nlet setConfigCalledByThisInstance = false\n\nconst haventCalledErrorMessage =\n  process.env.NODE_ENV === 'development'\n    ? `\nHaven't called createTamagui yet. ${MISSING_THEME_MESSAGE}\n`\n    : `❌ Error 001`\n\n// helper to get config from module-scoped variable or globalthis fallback\n// this handles vite ssr bundling where multiple copies of tamagui may exist\nconst getConfigFromGlobalOrLocal = (): TamaguiInternalConfig | null => {\n  if (conf) {\n    return conf\n  }\n\n  // fall back to globalthis (for vite ssr bundling scenarios)\n  if (globalThis.__tamaguiConfig) {\n    // defer warning - if createTamagui runs in THIS instance, it's HMR (safe)\n    // if it never runs, it's a true duplicate (warn)\n    if (\n      process.env.NODE_ENV === 'development' &&\n      !globalThis.__tamaguiHasWarnedGlobalFallback &&\n      !globalThis.__tamaguiPendingCheck\n    ) {\n      globalThis.__tamaguiPendingCheck = true\n      setTimeout(() => {\n        if (\n          !setConfigCalledByThisInstance &&\n          !globalThis.__tamaguiHasWarnedGlobalFallback\n        ) {\n          globalThis.__tamaguiHasWarnedGlobalFallback = true\n          console.warn(\n            `Tamagui: Using global config fallback. This may indicate duplicate tamagui instances (e.g., from Vite SSR bundling). This is handled automatically, but may cause issues.`\n          )\n        }\n        globalThis.__tamaguiPendingCheck = false\n      }, 500)\n    }\n    return globalThis.__tamaguiConfig\n  }\n\n  return null\n}\n\nexport const getSetting = <Key extends keyof GenericTamaguiSettings>(\n  key: Key\n): GenericTamaguiSettings[Key] => {\n  const config = getConfigFromGlobalOrLocal()\n  if (process.env.NODE_ENV === 'development') {\n    if (!config) throw new Error(haventCalledErrorMessage)\n  }\n  return (\n    config!.settings[key] ??\n    // @ts-expect-error\n    config[key]\n  )\n}\n\nexport const setConfig = (next: TamaguiInternalConfig) => {\n  setConfigCalledByThisInstance = true\n  conf = next\n  globalThis.__tamaguiConfig = next\n}\n\nexport const setConfigFont = (name: string, font: any, fontParsed: any) => {\n  const config = getConfigFromGlobalOrLocal()\n  if (process.env.NODE_ENV === 'development') {\n    if (!config) throw new Error(haventCalledErrorMessage)\n  }\n  config!.fonts[name] = font\n  config!.fontsParsed[`$${name}`] = fontParsed\n}\n\nexport const getConfig = () => {\n  const config = getConfigFromGlobalOrLocal()\n  if (!config) {\n    throw new Error(\n      process.env.NODE_ENV !== 'production'\n        ? `Missing tamagui config, you either have a duplicate config, or haven't set it up. Be sure createTamagui is called before rendering. Also, make sure all of your tamagui dependencies are on the same version (\\`tamagui\\`, \\`@tamagui/package-name\\`, etc.) not just in your package.json, but in your lockfile.`\n        : 'Err0'\n    )\n  }\n  return config\n}\n\nexport const getConfigMaybe = () => {\n  return getConfigFromGlobalOrLocal()\n}\n\nlet tokensMerged: TokensMerged\nexport function setTokens(_: TokensMerged) {\n  tokensMerged = _\n}\n\nexport const getTokens = ({\n  prefixed,\n}: {\n  /**\n   * Force either with $ or without $ prefix\n   */\n  prefixed?: boolean\n} = {}): TokensMerged => {\n  const config = getConfigFromGlobalOrLocal()\n  if (process.env.NODE_ENV === 'development') {\n    if (!config) throw new Error(haventCalledErrorMessage)\n  }\n  const { tokens, tokensParsed } = config!\n  if (prefixed === false) return tokens as any\n  if (prefixed === true) return tokensParsed as any\n  return tokensMerged\n}\n\nexport const getTokenObject = (value: Token, group?: keyof Tokens) => {\n  const config = getConfigFromGlobalOrLocal()\n  return (\n    config!.specificTokens[value] ??\n    (group\n      ? tokensMerged[group]?.[value]\n      : tokensMerged[\n          Object.keys(tokensMerged).find((cat) => tokensMerged[cat][value]) || ''\n        ]?.[value])\n  )\n}\n\nexport const getToken = (value: Token, group?: keyof Tokens, useVariable = isWeb) => {\n  const token = getTokenObject(value, group)\n  return useVariable ? token?.variable : token?.val\n}\n\nexport const getTokenValue = (value: Token | 'unset' | 'auto', group?: keyof Tokens) => {\n  if (value === 'unset' || value === 'auto') return\n  return getToken(value, group, false)\n}\n\n/**\n * Note: this is the same as `getTokens`\n */\nexport const useTokens = getTokens\n\nexport const getThemes = () => getConfigFromGlobalOrLocal()!.themes\n\nexport const updateConfig = (key: string, value: any) => {\n  // for usage internally only\n  const config = getConfigFromGlobalOrLocal()\n  Object.assign(config![key], value)\n}\n\n// searches by value name or token name\nexport const getFont = (name: string) => {\n  const conf = getConfig()\n  return (\n    conf.fontsParsed[name] ??\n    Object.entries(conf.fontsParsed).find(\n      ([k]) => conf.fontsParsed[k]?.family?.['val'] === name\n    )?.[1]\n  )\n}\n\ntype DevConfig = {\n  visualizer?:\n    | boolean\n    | {\n        key?: string\n        delay?: number\n      }\n}\n\nexport let devConfig: DevConfig | undefined\n\nexport function setupDev(conf: DevConfig) {\n  if (process.env.NODE_ENV === 'development') {\n    devConfig = conf\n  }\n}\n\n/**\n * Dynamically load an animation driver at runtime.\n * Useful for lazy loading heavier animation drivers after initial page load.\n *\n * @example\n * ```tsx\n * // import loadAnimationDriver from tamagui\n * // import createAnimations from your preferred driver (e.g. animations-reanimated)\n *\n * const driver = createAnimations({ bouncy: { type: 'spring', damping: 10 } })\n * loadAnimationDriver('spring', driver)\n * ```\n */\nexport function loadAnimationDriver(name: string, driver: AnimationDriver) {\n  const config = getConfigFromGlobalOrLocal()\n  if (!config) {\n    if (process.env.NODE_ENV === 'development') {\n      console.warn('loadAnimationDriver called before createTamagui')\n    }\n    return\n  }\n\n  // Convert single driver to object format if needed\n  if (config.animations && !('default' in config.animations)) {\n    ;(config as any).animations = {\n      default: config.animations,\n    }\n  }\n\n  // Add the new driver\n  if (config.animations) {\n    ;(config.animations as Record<string, any>)[name] = driver\n  } else {\n    ;(config as any).animations = {\n      default: driver,\n      [name]: driver,\n    }\n  }\n}\n","import type { MediaQueryObject } from '../types'\n\nfunction camelToHyphen(str: string) {\n  return str.replace(/[A-Z]/g, (m) => `-${m.toLowerCase()}`).toLowerCase()\n}\n\nconst cache = new WeakMap<any, string>()\n\nexport function mediaObjectToString(query: string | MediaQueryObject) {\n  if (typeof query === 'string') {\n    return query\n  }\n  if (cache.has(query)) {\n    return cache.get(query)!\n  }\n  const res = Object.entries(query)\n    .map(([feature, value]) => {\n      feature = camelToHyphen(feature)\n      if (typeof value === 'string') {\n        return `(${feature}: ${value})`\n      }\n      if (typeof value === 'number' && /[height|width]$/.test(feature)) {\n        value = `${value}px`\n      }\n      return `(${feature}: ${value})`\n    })\n    .join(' and ')\n  cache.set(query, res)\n  return res\n}\n","import type { MediaQueries, MediaQueryState } from '../types'\n\nexport let mediaState: MediaQueryState =\n  // development only safeguard\n  process.env.NODE_ENV === 'development'\n    ? new Proxy(\n        {},\n        {\n          get(target, key) {\n            if (\n              typeof key === 'string' &&\n              key[0] === '$' &&\n              // dont error on $$typeof\n              key[1] !== '$'\n            ) {\n              throw new Error(`Access mediaState should not use \"$\": ${key}`)\n            }\n            return Reflect.get(target, key)\n          },\n        }\n      )\n    : ({} as any)\n\nexport const setMediaState = (next: MediaQueryState) => {\n  mediaState = next\n}\n\nexport const mediaQueryConfig: MediaQueries = {}\n\nexport const getMedia = () => mediaState\n\nexport const mediaKeys = new Set<string>() // with $ prefix\n","import { getMedia } from './mediaState'\nimport { pseudoPriorities } from './pseudoDescriptors'\n\nexport type GroupParts = { name: string; pseudo?: string; media?: string }\n\n// convert kebab-case to camelCase (e.g. \"focus-visible\" -> \"focusVisible\")\nfunction kebabToCamel(str: string): string {\n  return str.replace(/-([a-z])/g, (_, c) => c.toUpperCase())\n}\n\n// validate that a string is a known pseudo selector\nfunction isValidPseudo(str: string | undefined): str is string {\n  if (!str) return false\n  // pseudoPriorities uses camelCase keys, but parsed candidates may be kebab-case\n  return kebabToCamel(str) in pseudoPriorities\n}\n\nexport function getGroupPropParts(groupProp: string): GroupParts {\n  const m = getMedia()\n  const [_, name, a, b, c] = groupProp.split('-')\n  // check 2-part media key first (e.g. \"max-md\"), then 1-part\n  const m2 = a && b ? `${a}-${b}` : ''\n  const media = (m2 && m2 in m && m2) || (a && a in m && a) || undefined\n  let pseudoCandidate = media\n    ? media === m2\n      ? c\n      : b\n        ? `${b}${c ? `-${c}` : ''}`\n        : undefined\n    : a\n      ? `${a}${b ? `-${b}` : ''}${c ? `-${c}` : ''}`\n      : undefined\n\n  // only treat as pseudo if it's a known pseudo selector\n  // otherwise it might be an unrecognized media query\n  if (pseudoCandidate && !isValidPseudo(pseudoCandidate)) {\n    if (process.env.NODE_ENV === 'development') {\n      console.warn(\n        `Unknown group prop part \"${pseudoCandidate}\" in \"${groupProp}\". If this is a media query, ensure it's defined in your tamagui config.`\n      )\n    }\n    pseudoCandidate = undefined\n  }\n\n  return { name, pseudo: pseudoCandidate, media }\n}\n","import { getSetting } from '../config'\nimport { mediaObjectToString } from './mediaObjectToString'\nimport type { IsMediaType, MediaQueries, MediaStyleObject, StyleObject } from '../types'\nimport { getGroupPropParts, type GroupParts } from './getGroupPropParts'\n\n// TODO have this be used by extractMediaStyle in tamagui static\n// not synced to static/constants for now\nexport const MEDIA_SEP = '_'\n\nlet prefixes: Record<string, string> | null = null\nlet selectors: Record<string, string> | null = null\n\n// call this when media config changes to reset cached prefixes/selectors\nexport function resetMediaStyleCache() {\n  prefixes = null\n  selectors = null\n}\n\nconst groupPseudoToPseudoCSSMap = {\n  press: 'active',\n  focusVisible: 'focus-visible',\n  focusWithin: 'focus-within',\n}\n\nconst specificities = new Array(5)\n  .fill(0)\n  .map((_, i) => new Array(i).fill(':root').join(''))\n\nfunction getThemeOrGroupSelector(\n  name: string,\n  styleInner: string,\n  isGroup: boolean,\n  groupParts: GroupParts,\n  isTheme = false,\n  precedenceImportancePrefix = ''\n) {\n  const selectorStart = styleInner.lastIndexOf(':root') + 5\n  const selectorEnd = styleInner.lastIndexOf('{')\n  const selector = styleInner.slice(selectorStart, selectorEnd)\n  const precedenceSpace = getSetting('addThemeClassName') !== false && isTheme ? '' : ' '\n  const pseudoSelectorName = groupParts.pseudo\n    ? groupPseudoToPseudoCSSMap[groupParts.pseudo] || groupParts.pseudo\n    : undefined\n\n  const pseudoSelector = pseudoSelectorName ? `:${pseudoSelectorName}` : ''\n  const presedencePrefix = `:root${precedenceImportancePrefix}${precedenceSpace}`\n  const mediaSelector = `.t_${isGroup ? 'group_' : ''}${name}${pseudoSelector}`\n  return [\n    selector,\n    `${presedencePrefix}${mediaSelector} ${selector.replaceAll(':root', '')}`,\n  ] as const\n}\n\nexport const createMediaStyle = (\n  styleObject: StyleObject,\n  mediaKeyIn: string,\n  mediaQueries: MediaQueries,\n  type: IsMediaType,\n  negate?: boolean,\n  priority?: number\n): MediaStyleObject => {\n  const [property, , identifier, pseudoIn, rules] = styleObject\n  const isTheme = type === 'theme'\n  const isPlatform = type === 'platform'\n  const isGroup = type === 'group'\n  const isNonWindowMedia = isTheme || isPlatform || isGroup\n  const negKey = negate ? '0' : ''\n  const ogPrefix = identifier.slice(0, identifier.indexOf('-') + 1)\n  const id = `${ogPrefix}${MEDIA_SEP}${mediaKeyIn.replace('-', '')}${negKey}${MEDIA_SEP}`\n\n  let styleRule = ''\n  let groupPriority = ''\n  let groupMediaKey: string | undefined\n  let containerName: string | undefined\n  let nextIdentifier = identifier.replace(ogPrefix, id)\n  let styleInner = rules\n    .map((rule) => rule.replaceAll(identifier, nextIdentifier))\n    .join(';')\n  let isHover = false\n\n  if (isNonWindowMedia) {\n    let specificity = (priority || 0) + (isGroup || isPlatform ? 1 : 0)\n\n    if (isTheme || isGroup) {\n      const groupParts = getGroupPropParts(isTheme ? 'theme-' + mediaKeyIn : mediaKeyIn)\n      const { name, media, pseudo } = groupParts\n      groupMediaKey = media\n      if (isGroup) {\n        containerName = name\n      }\n      if (pseudo === 'press' || pseudoIn === 'active') {\n        specificity += 2\n      }\n      if (pseudo === 'hover') {\n        isHover = true\n      }\n      const [selector, nextSelector] = getThemeOrGroupSelector(\n        name,\n        styleInner,\n        isGroup,\n        groupParts,\n        isTheme,\n        specificities[specificity]\n      )\n      // const selectors = `${nextSelector}, :root${nextSelector}`\n      // add back in the { we used to split\n      styleRule = styleInner.replace(selector, nextSelector)\n    } else {\n      styleRule = `${specificities[specificity]}${styleInner}`\n    }\n  }\n\n  if (!isNonWindowMedia || groupMediaKey) {\n    // one time cost:\n    // TODO MOVE THIS INTO SETUP AREA AND EXPORT IT\n    if (!selectors) {\n      const mediaKeys = Object.keys(mediaQueries)\n      selectors = Object.fromEntries(\n        mediaKeys.map((key) => [key, mediaObjectToString(mediaQueries[key])])\n      )\n      prefixes = Object.fromEntries(\n        mediaKeys.map((k, index) => [k, new Array(index + 1).fill(':root').join('')])\n      )\n    }\n\n    const mediaKey = groupMediaKey || mediaKeyIn\n    const mediaSelector = selectors[mediaKey]\n    const screenStr = negate ? 'not all and ' : ''\n    const mediaQuery = `${screenStr}${mediaSelector}`\n    const precedenceImportancePrefix = groupMediaKey ? groupPriority : prefixes![mediaKey]\n    const prefix = groupMediaKey ? `@container ${containerName}` : '@media'\n\n    if (groupMediaKey) {\n      styleInner = styleRule\n    }\n\n    // combines media queries if they already exist\n    if (styleInner.includes(prefix)) {\n      // combine\n      styleRule = styleInner\n        .replace('{', ` and ${mediaQuery} {`)\n        // temp bugfix can be better done\n        .replace(`and screen and`, `and`)\n    } else {\n      styleRule = `${prefix} ${mediaQuery}{${precedenceImportancePrefix}${styleInner}}`\n    }\n\n    // add @supports for legacy browser support to not break container queries\n    if (groupMediaKey) {\n      styleRule = `@supports (contain: ${\n        getSetting('webContainerType') || 'inline-size'\n      }) {${styleRule}}`\n    }\n  }\n\n  if (isHover) {\n    styleRule = `@media (hover:hover){${styleRule}}`\n  }\n\n  return [property, undefined, nextIdentifier, undefined, [styleRule]]\n}\n","import { useRef } from 'react'\nimport type { ThemeParsed, ThemeState, UseThemeWithStateProps } from '../types'\nimport { getThemeProxied, type ThemeProxied } from './getThemeProxied'\nimport { useThemeState } from './useThemeState'\n\nconst EMPTY = {}\n\nexport const useTheme = () => {\n  const [theme] = useThemeWithState(EMPTY)\n  const res = theme\n  return res as ThemeProxied\n}\n\nexport type ThemeWithState = [ThemeParsed, ThemeState]\n\n/**\n * Adds a proxy around themeState that tracks update keys\n */\nexport const useThemeWithState = (\n  props: UseThemeWithStateProps,\n  isRoot = false\n): ThemeWithState => {\n  const keys = useRef<Set<string> | null>(null)\n  const schemeKeys = useRef<Set<string> | null>(null)\n  const themeState = useThemeState(props, isRoot, keys, schemeKeys)\n\n  if (process.env.NODE_ENV === 'development') {\n    if (!props.passThrough && !themeState?.theme) {\n      if (process.env.TAMAGUI_DISABLE_NO_THEME_WARNING !== '1') {\n        console.error(\n          `[tamagui] No theme found, this could be due to an invalid theme name (given theme props ${JSON.stringify(\n            props\n          )}).\\n\\nIf this is intended and you are using Tamagui without any themes, you can disable this warning by setting the environment variable TAMAGUI_DISABLE_NO_THEME_WARNING=1`\n        )\n      }\n    }\n  }\n\n  const themeProxied = props.passThrough\n    ? {}\n    : getThemeProxied(props, themeState, keys, schemeKeys)\n\n  return [themeProxied, themeState]\n}\n","const cache = new Map<string, string>()\nlet cacheSize = 0\n\nexport const simpleHash = (strIn: string, hashMin: number | 'strict' = 10): string => {\n  if (cache.has(strIn)) {\n    return cache.get(strIn)!\n  }\n\n  let str = strIn\n\n  // remove var()\n  if (str[0] === 'v' && str.startsWith('var(')) {\n    str = str.slice(6, str.length - 1)\n  }\n\n  let hash = 0\n  let valids = ''\n  let added = 0\n  const len = str.length\n\n  for (let i = 0; i < len; i++) {\n    if (hashMin !== 'strict' && added <= hashMin) {\n      const char = str.charCodeAt(i)\n      if (char === 46) {\n        valids += '--'\n        continue\n      }\n      if (isValidCSSCharCode(char)) {\n        added++\n        valids += str[i]\n        continue\n      }\n    }\n    hash = hashChar(hash, str[i])\n  }\n\n  const res = valids + (hash ? Math.abs(hash) : '')\n\n  if (cacheSize > 10_000) {\n    cache.clear()\n    cacheSize = 0\n  }\n\n  cache.set(strIn, res)\n  cacheSize++\n\n  return res\n}\n\nconst hashChar = (hash: number, c: string) => (Math.imul(31, hash) + c.charCodeAt(0)) | 0\n\nfunction isValidCSSCharCode(code: number) {\n  return (\n    // A-Z\n    (code >= 65 && code <= 90) ||\n    // a-z\n    (code >= 97 && code <= 122) ||\n    // _\n    code === 95 ||\n    // -\n    code === 45 ||\n    // 0-9\n    (code >= 48 && code <= 57)\n  )\n}\n","type Events = object\n\nexport type EventHandler<E extends Events> = (event: E) => void\n\nexport function composeEventHandlers<E extends Events>(\n  og?: EventHandler<E> | null,\n  next?: EventHandler<E> | null,\n  { checkDefaultPrevented = true } = {}\n) {\n  if (!og || !next) {\n    return next || og || undefined\n  }\n  return (event: E) => {\n    og?.(event)\n    if (\n      !event ||\n      !(\n        checkDefaultPrevented &&\n        typeof event === 'object' &&\n        'defaultPrevented' in event\n      ) ||\n      // @ts-ignore\n      ('defaultPrevented' in event && !event.defaultPrevented)\n    ) {\n      return next?.(event)\n    }\n  }\n}\n","export type StyleObject = [\n  property: string,\n  value: any,\n  identifier: string,\n  pseudo: 'hover' | 'focus' | 'focus-visible' | 'focus-within' | 'active' | undefined,\n  rules: string[],\n]\n\nexport const StyleObjectProperty = 0\nexport const StyleObjectValue = 1\nexport const StyleObjectIdentifier = 2\nexport const StyleObjectPseudo = 3\nexport const StyleObjectRules = 4\n\nexport type MediaStyleObject = Omit<StyleObject, 'value'>\n","// Web-only style props that need to be skipped on native\n// NOTE: backgroundColor is NOT web-only - it works on React Native too!\n// NOTE: RN 0.76+ added: boxShadow, filter (cross-platform, with some Android 12+ only filters)\n// NOTE: RN 0.77+ added: boxSizing, mixBlendMode, isolation, outline* props\nexport const webOnlyStylePropsView = {\n  transition: true,\n  textWrap: true,\n  backdropFilter: true,\n  WebkitBackdropFilter: true,\n  background: true,\n  borderTop: true,\n  borderRight: true,\n  borderBottom: true,\n  borderLeft: true,\n  backgroundAttachment: true,\n  backgroundBlendMode: true,\n  backgroundClip: true,\n  backgroundOrigin: true,\n  backgroundPosition: true,\n  backgroundRepeat: true,\n  backgroundSize: true,\n  borderBottomStyle: true,\n  borderImage: true,\n  borderLeftStyle: true,\n  borderRightStyle: true,\n  borderTopStyle: true,\n  caretColor: true,\n  clipPath: true,\n  contain: true,\n  containerType: true,\n  content: true,\n  float: true,\n  mask: true,\n  maskBorder: true,\n  maskBorderMode: true,\n  maskBorderOutset: true,\n  maskBorderRepeat: true,\n  maskBorderSlice: true,\n  maskBorderSource: true,\n  maskBorderWidth: true,\n  maskClip: true,\n  maskComposite: true,\n  maskImage: true,\n  maskMode: true,\n  maskOrigin: true,\n  maskPosition: true,\n  maskRepeat: true,\n  maskSize: true,\n  maskType: true,\n  objectFit: true,\n  objectPosition: true,\n  overflowBlock: true,\n  overflowInline: true,\n  overflowX: true,\n  overflowY: true,\n  // NOTE: pointerEvents is NOT web-only - it's a core React Native View prop (not a style)\n  pointerEvents: true,\n  scrollbarWidth: true,\n  textEmphasis: true,\n  touchAction: true,\n  transformStyle: true,\n  userSelect: true,\n  willChange: true,\n}\n\nexport const webOnlyStylePropsText = {\n  whiteSpace: true,\n  wordWrap: true,\n  textOverflow: true,\n  textDecorationDistance: true,\n  // cursor: now cross-platform - in stylePropsView\n  WebkitLineClamp: true,\n  WebkitBoxOrient: true,\n}\n","import { isAndroid } from '@tamagui/constants'\nimport { webOnlyStylePropsText, webOnlyStylePropsView } from './webOnlyStyleProps'\n\n// generally organizing this so we don't duplicate things so its a bit weird\n\n// longhands of CSS shorthands - used for specificity boosting on web\n// so that e.g. borderWidth always beats border in the cascade\nexport const cssShorthandLonghands = {\n  // border longhands\n  borderWidth: true,\n  borderStyle: true,\n  borderColor: true,\n  borderTopWidth: true,\n  borderTopStyle: true,\n  borderTopColor: true,\n  borderRightWidth: true,\n  borderRightStyle: true,\n  borderRightColor: true,\n  borderBottomWidth: true,\n  borderBottomStyle: true,\n  borderBottomColor: true,\n  borderLeftWidth: true,\n  borderLeftStyle: true,\n  borderLeftColor: true,\n  // outline longhands\n  outlineWidth: true,\n  outlineStyle: true,\n  outlineColor: true,\n  outlineOffset: true,\n}\n\nconst textColors = {\n  color: true,\n  textDecorationColor: true,\n  textShadowColor: true,\n}\n\n// used for propMapping to find the right token category\n// just specificy the least costly, all else go to `space` (most keys - we can exclude)\nexport const tokenCategories = {\n  radius: {\n    borderRadius: true,\n    borderTopLeftRadius: true,\n    borderTopRightRadius: true,\n    borderBottomLeftRadius: true,\n    borderBottomRightRadius: true,\n\n    // logical\n    borderStartStartRadius: true,\n    borderStartEndRadius: true,\n    borderEndStartRadius: true,\n    borderEndEndRadius: true,\n  },\n  size: {\n    width: true,\n    height: true,\n    minWidth: true,\n    minHeight: true,\n    maxWidth: true,\n    maxHeight: true,\n    blockSize: true,\n    minBlockSize: true,\n    maxBlockSize: true,\n    inlineSize: true,\n    minInlineSize: true,\n    maxInlineSize: true,\n  },\n  zIndex: {\n    zIndex: true,\n  },\n  color: {\n    backgroundColor: true,\n    borderColor: true,\n    borderBlockStartColor: true,\n    borderBlockEndColor: true,\n    borderBlockColor: true,\n    borderBottomColor: true,\n    borderInlineColor: true,\n    borderInlineStartColor: true,\n    borderInlineEndColor: true,\n    borderTopColor: true,\n    borderLeftColor: true,\n    borderRightColor: true,\n    borderEndColor: true,\n    borderStartColor: true,\n    shadowColor: true,\n    ...textColors,\n    // outlineColor is supported on RN 0.77+ (New Architecture)\n    outlineColor: true,\n    // caretColor is web-only\n    ...(process.env.TAMAGUI_TARGET === 'web' && {\n      caretColor: true,\n    }),\n  },\n}\n\nexport const stylePropsUnitless = {\n  WebkitLineClamp: true,\n  animationIterationCount: true,\n  aspectRatio: true,\n  borderImageOutset: true,\n  borderImageSlice: true,\n  borderImageWidth: true,\n  columnCount: true,\n  flex: true,\n  flexGrow: true,\n  flexOrder: true,\n  flexPositive: true,\n  flexShrink: true,\n  flexNegative: true,\n  fontWeight: true,\n  gridRow: true,\n  gridRowEnd: true,\n  gridRowGap: true,\n  gridRowStart: true,\n  gridColumn: true,\n  gridColumnEnd: true,\n  gridColumnGap: true,\n  gridColumnStart: true,\n  gridTemplateColumns: true,\n  gridTemplateAreas: true,\n  lineClamp: true,\n  opacity: true,\n  order: true,\n  orphans: true,\n  tabSize: true,\n  widows: true,\n  zIndex: true,\n  zoom: true,\n  scale: true,\n  scaleX: true,\n  scaleY: true,\n  scaleZ: true,\n  shadowOpacity: true,\n}\n\nexport const stylePropsTransform = {\n  x: true,\n  y: true,\n  scale: true,\n  perspective: true,\n  scaleX: true,\n  scaleY: true,\n  skewX: true,\n  skewY: true,\n  matrix: true,\n  rotate: true,\n  rotateY: true,\n  rotateX: true,\n  rotateZ: true,\n}\n\nexport const stylePropsView = {\n  backfaceVisibility: true,\n  borderCurve: true,\n  cursor: true,\n  borderBottomEndRadius: true,\n  borderBottomStartRadius: true,\n  borderBottomWidth: true,\n  borderLeftWidth: true,\n  borderRightWidth: true,\n  borderBlockWidth: true,\n  borderBlockEndWidth: true,\n  borderBlockStartWidth: true,\n  borderInlineWidth: true,\n  borderInlineEndWidth: true,\n  borderInlineStartWidth: true,\n  borderStyle: true,\n  borderBlockStyle: true,\n  borderBlockEndStyle: true,\n  borderBlockStartStyle: true,\n  borderInlineStyle: true,\n  borderInlineEndStyle: true,\n  borderInlineStartStyle: true,\n  borderTopEndRadius: true,\n  borderTopStartRadius: true,\n  borderTopWidth: true,\n  borderWidth: true,\n  transform: true,\n  transformOrigin: true,\n  alignContent: true,\n  alignItems: true,\n  alignSelf: true,\n  borderEndWidth: true,\n  borderStartWidth: true,\n  bottom: true,\n  display: true,\n  end: true,\n  flexBasis: true,\n  flexDirection: true,\n  flexWrap: true,\n  gap: true,\n  columnGap: true,\n  rowGap: true,\n  justifyContent: true,\n  left: true,\n  margin: true,\n  marginBlock: true,\n  marginBlockEnd: true,\n  marginBlockStart: true,\n  marginInline: true,\n  marginInlineStart: true,\n  marginInlineEnd: true,\n  marginBottom: true,\n  marginEnd: true,\n  marginHorizontal: true,\n  marginLeft: true,\n  marginRight: true,\n  marginStart: true,\n  marginTop: true,\n  marginVertical: true,\n  overflow: true,\n  padding: true,\n  paddingBottom: true,\n  paddingInline: true,\n  paddingBlock: true,\n  paddingBlockStart: true,\n  paddingInlineEnd: true,\n  paddingInlineStart: true,\n  paddingEnd: true,\n  paddingHorizontal: true,\n  paddingLeft: true,\n  paddingRight: true,\n  paddingStart: true,\n  paddingTop: true,\n  paddingVertical: true,\n  position: true,\n  right: true,\n  start: true,\n  top: true,\n  inset: true,\n  insetBlock: true,\n  insetBlockEnd: true,\n  insetBlockStart: true,\n  insetInline: true,\n  insetInlineEnd: true,\n  insetInlineStart: true,\n  direction: true,\n  shadowOffset: true,\n  shadowRadius: true,\n  ...tokenCategories.color,\n  ...tokenCategories.radius,\n  ...tokenCategories.size,\n  ...tokenCategories.radius,\n  ...stylePropsTransform,\n  ...stylePropsUnitless,\n  ...(isAndroid ? { elevationAndroid: true } : {}),\n\n  boxShadow: true,\n  border: true,\n  filter: true,\n  // RN 0.76+ supports linear-gradient via backgroundImage\n  backgroundImage: true,\n  // the actual RN 0.76+ prop name (backgroundImage expands to this on native)\n  experimental_backgroundImage: true,\n  // RN 0.76/0.77+ style props (New Architecture)\n  boxSizing: true,\n  mixBlendMode: true,\n  isolation: true,\n  outline: true,\n  outlineColor: true,\n  outlineOffset: true,\n  outlineStyle: true,\n  outlineWidth: true,\n\n  // web-only for convenience - tree-shaken on native\n  ...(process.env.TAMAGUI_TARGET === 'web' ? webOnlyStylePropsView : {}),\n}\n\nconst stylePropsFont = {\n  fontFamily: true,\n  fontSize: true,\n  fontStyle: true,\n  fontWeight: true,\n  fontVariant: true,\n  letterSpacing: true,\n  lineHeight: true,\n  textTransform: true,\n}\n\nexport const stylePropsTextOnly = {\n  ...stylePropsFont,\n  textAlign: true,\n  textDecorationLine: true,\n  textDecorationStyle: true,\n  ...textColors,\n  textShadow: true,\n  textShadowOffset: true,\n  textShadowRadius: true,\n  userSelect: true,\n  verticalAlign: true,\n\n  // web-only text props - tree-shaken on native\n  ...(process.env.TAMAGUI_TARGET === 'web' ? webOnlyStylePropsText : {}),\n}\n\nexport const stylePropsText = {\n  ...stylePropsView,\n  ...stylePropsTextOnly,\n}\n\nexport const stylePropsAll = stylePropsText\n\nexport const validPseudoKeys = {\n  enterStyle: true,\n  exitStyle: true,\n  hoverStyle: true,\n  pressStyle: true,\n  focusStyle: true,\n  disabledStyle: true,\n  focusWithinStyle: true,\n\n  // allow some web only ones\n  ...(process.env.TAMAGUI_TARGET === 'web' && {\n    focusVisibleStyle: true,\n  }),\n}\n\nexport const validStyles = stylePropsView\n","const Decorated = Symbol()\n\ntype Combined<A, B> = A & B\n\nexport const withStaticProperties = <A extends Function, B extends Record<string, any>>(\n  component: A,\n  staticProps: B\n): Combined<A, B> => {\n  // add static properties\n  Object.assign(component, staticProps)\n  component[Decorated] = true\n\n  return component as any\n}\n","import { isWeb } from '@tamagui/constants'\nimport { simpleHash } from '@tamagui/helpers'\n\nimport { getConfig } from './config'\nimport type { PxValue, TokenCategories, Variable } from './types'\n\n/**\n * Should rename this to Token\n * Moving to objects for React Server Components support\n */\n\nfunction constructCSSVariableName(name: string) {\n  return `var(--${process.env.TAMAGUI_CSS_VARIABLE_PREFIX || ''}${name})`\n}\n\ntype VariableIn<A = any> = Pick<Variable<A>, 'key' | 'name' | 'val'>\n\nexport const createVariable = <A extends string | number | Variable = any>(\n  props: VariableIn<A>,\n  skipHash = false\n): Variable<A> => {\n  if (!skipHash && isVariable(props)) return props\n  const { key, name, val } = props\n  return {\n    isVar: true,\n    key,\n    name: skipHash ? name : simpleHash(name, 40),\n    val,\n    variable: isWeb\n      ? skipHash\n        ? constructCSSVariableName(name)\n        : createCSSVariable(name)\n      : '',\n  }\n}\n\n// could do weakmap cache\nexport function variableToString(vrble?: any, getValue = false) {\n  if (isVariable(vrble)) {\n    if (!getValue && isWeb && vrble.variable) {\n      return vrble.variable\n    }\n    return `${vrble.val}`\n  }\n  return `${vrble || ''}`\n}\n\nexport function isVariable(v: Variable | any): v is Variable {\n  return v && typeof v === 'object' && 'isVar' in v\n}\n\nexport function getVariable(\n  nameOrVariable: Variable | string | any,\n  group: TokenCategories = 'size'\n) {\n  // dynamic color-like\n  if (nameOrVariable?.dynamic) {\n    return nameOrVariable\n  }\n  setDidGetVariableValue(true)\n  if (isVariable(nameOrVariable)) {\n    return variableToString(nameOrVariable)\n  }\n  const tokens = getConfig().tokensParsed\n  return variableToString(tokens[group]?.[nameOrVariable] ?? nameOrVariable)\n}\n\nlet accessed = false\nexport const setDidGetVariableValue = (val: boolean) => (accessed = val)\nexport const didGetVariableValue = () => accessed\n\nexport function getVariableValue(v: Variable | any, group?: TokenCategories) {\n  if (isVariable(v)) {\n    setDidGetVariableValue(true)\n    return v.val\n  }\n  if (group) {\n    const tokens = getConfig().tokensParsed\n    const token = tokens[group]?.[v]\n    if (token) {\n      setDidGetVariableValue(true)\n      return token.val\n    }\n  }\n  return v\n}\n\nexport function getVariableName(v: Variable | any) {\n  if (isVariable(v)) return v.name\n  return v\n}\n\nexport function getVariableVariable(v: Variable | any) {\n  if (isVariable(v)) return v.variable\n  return v\n}\n\n// bugfix { space: { 0.5: 10 } } was generating var(--space-0.5) (invalid CSS):\nexport const createCSSVariable = (nameProp: string, includeVar = true) => {\n  if (process.env.NODE_ENV === 'development') {\n    if (!nameProp || typeof nameProp !== 'string') {\n      throw new Error(`createCSSVariable expected string, got: ${nameProp}`)\n    }\n  }\n  const name = simpleHash(nameProp, 60)\n  return includeVar ? constructCSSVariableName(name) : name\n}\n\n/**\n * Helper function to mark a token value as needing px units.\n * Usage: px(100) creates a token that will become \"100px\" on web, 100 on native.\n *\n * @param value - The numeric value\n * @returns A special object that indicates this value needs px units\n */\nexport function px(value: number): PxValue {\n  return {\n    val: value,\n    needsPx: true,\n  }\n}\n","import { isIos } from '@tamagui/constants'\nimport type { MutableRefObject } from 'react'\nimport { getConfig, getSetting } from '../config'\nimport { getVariable } from '../createVariable'\nimport { getDynamicVal } from '../helpers/getDynamicVal'\nimport type {\n  ThemeParsed,\n  ThemeState,\n  Tokens,\n  UseThemeWithStateProps,\n  Variable,\n  VariableVal,\n  VariableValGeneric,\n} from '../types'\nimport { doesRootSchemeMatchSystem } from './doesRootSchemeMatchSystem'\n\nexport type ThemeProxied = {\n  [Key in keyof ThemeParsed | keyof Tokens['color']]: ThemeGettable<\n    Key extends keyof ThemeParsed ? ThemeParsed[Key] : Variable<any>\n  >\n} & {\n  // fallback to other tokens\n  [Key in string & {}]?: ThemeGettable<Variable<any>>\n}\n\ntype ThemeGettable<Val> = Val & {\n  /**\n   * Tries to return an optimized value that avoids the need for re-rendering:\n   * On web a CSS variable, on iOS a dynamic color, on Android it doesn't\n   * optimize and returns the underyling value.\n   *\n   * See: https://reactnative.dev/docs/dynamiccolorios\n   *\n   * @param platform when \"web\" it will only return the dynamic value for web, avoiding the iOS dynamic value.\n   * For things like SVG, gradients, or other external components that don't support it, use this option.\n   */\n  get: (\n    platform?: 'web'\n  ) =>\n    | string\n    | (Val extends Variable<infer X>\n        ? X extends VariableValGeneric\n          ? any\n          : Exclude<X, Variable>\n        : Val extends VariableVal\n          ? string | number\n          : unknown)\n}\n\n// only proxy each theme one time, after that we know that renders are sync,\n// so we can just change the focus of the proxied theme and it can be re-used\nconst cache: Map<ThemeParsed, ThemeProxied> = new Map()\n\nlet curKeys: MutableRefObject<Set<string> | null>\nlet curSchemeKeys: MutableRefObject<Set<string> | null>\nlet curProps: UseThemeWithStateProps\nlet curState: ThemeState | null\n\nconst emptyObject = {}\n\nexport function getThemeProxied(\n  // underscore to prevent accidental usage below\n  _props: UseThemeWithStateProps,\n  _state: ThemeState | null,\n  _keys: MutableRefObject<Set<string> | null>,\n  _schemeKeys?: MutableRefObject<Set<string> | null>\n): ThemeProxied {\n  if (!_state?.theme) {\n    return emptyObject\n  }\n\n  curKeys = _keys\n  curSchemeKeys = _schemeKeys!\n  curProps = _props\n  curState = _state\n\n  if (cache.has(curState.theme)) {\n    const proxied = cache.get(curState.theme)!\n    return proxied\n  }\n\n  // first time running on this theme, create:\n  // from here on only use current*\n\n  const config = getConfig()\n\n  function track(key: string, schemeOptimized = false) {\n    if (!curKeys) return\n    if (!curKeys.current) {\n      curKeys.current = new Set()\n    }\n    curKeys.current.add(key)\n\n    // track scheme-optimized keys separately so we know if a scheme-only\n    // change can skip re-render (when all accessed keys use DynamicColorIOS)\n    if (schemeOptimized && curSchemeKeys) {\n      if (!curSchemeKeys.current) {\n        curSchemeKeys.current = new Set()\n      }\n      curSchemeKeys.current.add(key)\n    }\n\n    if (process.env.NODE_ENV === 'development' && curProps.debug) {\n      console.info(\n        ` 🎨 useTheme() tracking key: ${key} schemeOptimized=${schemeOptimized}`\n      )\n    }\n  }\n\n  const proxied = Object.fromEntries(\n    Object.entries(_state.theme).flatMap(([key, value]) => {\n      const proxied = {\n        ...value,\n        get val() {\n          // when they touch the actual value we only track it if its a variable (web), its ignored!\n          if (!globalThis.tamaguiAvoidTracking) {\n            // always track .val - not scheme optimized since they're getting raw value\n            track(key, false)\n          }\n          return value.val\n        },\n        get(platform?: 'web') {\n          if (!curState) return\n\n          const outVal = getVariable(value)\n          const { name, scheme } = curState\n\n          if (process.env.TAMAGUI_TARGET === 'native') {\n            // ios can avoid re-rendering for scheme changes (light↔dark) when using DynamicColorIOS\n            // this does NOT work for sub-theme changes (red→blue) or when scheme inverses from parent\n            const fastSchemeChange = getSetting('fastSchemeChange')\n            const rootMatchesSystem = doesRootSchemeMatchSystem()\n            const shouldOptimize =\n              scheme &&\n              platform !== 'web' &&\n              isIos &&\n              !curProps.deopt &&\n              !curState.isInverse &&\n              fastSchemeChange &&\n              rootMatchesSystem\n\n            if (process.env.NODE_ENV === 'development' && curProps.debug === 'verbose') {\n              console.info(\n                ` 🎨 useTheme().get(${key}) theme=${name} scheme=${scheme}`,\n                `\\n   shouldOptimize=${shouldOptimize} (iOS=${isIos} deopt=${curProps.deopt} isInverse=${curState.isInverse} fastScheme=${fastSchemeChange} rootMatch=${rootMatchesSystem})`\n              )\n            }\n\n            if (shouldOptimize) {\n              const oppositeScheme = scheme === 'dark' ? 'light' : 'dark'\n              const oppositeName = name.replace(scheme, oppositeScheme)\n              const color = getVariable(config.themes[name]?.[key])\n              const oppositeColor = getVariable(config.themes[oppositeName]?.[key])\n\n              if (\n                process.env.NODE_ENV === 'development' &&\n                curProps.debug === 'verbose'\n              ) {\n                console.info(\n                  ` 🎨 useTheme().get(${key}) using DynamicColorIOS`,\n                  `\\n   color=${color} oppositeColor=${oppositeColor}`\n                )\n              }\n\n              const dynamicVal = getDynamicVal({\n                scheme,\n                val: color,\n                oppositeVal: oppositeColor,\n              })\n\n              // track as scheme-optimized - can skip re-render for scheme-only changes\n              track(key, true)\n\n              return dynamicVal\n            }\n\n            if (process.env.NODE_ENV === 'development' && curProps.debug) {\n              console.info(\n                ` 🎨 useTheme().get(${key}) tracking key (not optimizing)`,\n                `\\n   platform=${platform} isIOS=${isIos} deopt=${curProps.deopt} fastScheme=${fastSchemeChange}`\n              )\n            }\n\n            // not scheme-optimized\n            track(key, false)\n          }\n\n          return outVal\n        },\n      }\n\n      return [\n        [key, proxied],\n        [`$${key}`, proxied],\n      ]\n    })\n  ) as ThemeProxied\n\n  cache.set(_state.theme, proxied)\n\n  return proxied\n}\n","import { isIos } from '@tamagui/constants'\nimport { useIsomorphicLayoutEffect } from '@tamagui/constants'\nimport {\n  createContext,\n  useCallback,\n  useContext,\n  useId,\n  useSyncExternalStore,\n  type MutableRefObject,\n} from 'react'\nimport { getConfig, getSetting } from '../config'\nimport { MISSING_THEME_MESSAGE } from '../constants/constants'\nimport type {\n  ThemeParsed,\n  ThemeProps,\n  ThemeState,\n  UseThemeWithStateProps,\n} from '../types'\n\ntype ID = string\n\nexport const ThemeStateContext = createContext<ID>('')\n\nconst allListeners = new Map<ID, Function>()\nconst listenersByParent: Record<ID, Set<ID>> = {}\nconst HasRenderedOnce = new WeakMap<object, boolean>()\nconst HadTheme = new WeakMap<object, boolean>()\nconst PendingUpdate = new Map<any, boolean | 'force'>()\n\n// TODO this will gain memory over time but its not going to be a ton\nconst states: Map<ID, ThemeState | undefined> = new Map()\nconst localStates: Map<ID, ThemeState | undefined> = new Map()\n\nlet shouldForce = false\nexport const forceUpdateThemes = () => {\n  cacheVersion++\n  shouldForce = true\n  allListeners.forEach((cb) => cb())\n}\n\nexport const getThemeState = (id: ID) => states.get(id)\n\n// const cache = new Map<string, ThemeState>()\nlet cacheVersion = 0\n\nlet themes: Record<string, ThemeParsed> | null = null\n\nlet rootThemeState: ThemeState | null = null\nexport const getRootThemeState = () => rootThemeState\n\n// extracts base name without scheme: \"light_red_surface1\" -> \"red_surface1\"\nconst getThemeBaseName = (name: string) => name.replace(/^(light|dark)_/, '')\n\nexport const useThemeState = (\n  props: UseThemeWithStateProps,\n  isRoot = false,\n  keys: MutableRefObject<Set<string> | null>,\n  schemeKeys?: MutableRefObject<Set<string> | null>\n): ThemeState => {\n  const { disable } = props\n  const parentId = useContext(ThemeStateContext)\n\n  if (!parentId && !isRoot) {\n    throw new Error(\n      process.env.NODE_ENV === 'development'\n        ? `${MISSING_THEME_MESSAGE}\n\nLooked for theme${props.name ? ` \"${props.name}\"` : ''}${props.componentName ? ` (component: ${props.componentName})` : ''}, but no parent theme context was found (parentId: ${parentId}).`\n        : MISSING_THEME_MESSAGE\n    )\n  }\n\n  if (disable) {\n    return (\n      states.get(parentId) || {\n        id: '',\n        name: 'light',\n        theme: getConfig().themes.light,\n        // inverses: 0,\n      }\n    )\n  }\n\n  const id = useId()\n  const subscribe = useCallback(\n    (cb: Function) => {\n      listenersByParent[parentId] ||= new Set()\n      listenersByParent[parentId].add(id)\n      allListeners.set(id, () => {\n        PendingUpdate.set(id, shouldForce ? 'force' : true)\n        cb()\n      })\n      return () => {\n        allListeners.delete(id)\n        listenersByParent[parentId].delete(id)\n        localStates.delete(id)\n        states.delete(id)\n        PendingUpdate.delete(id)\n      }\n    },\n    [id, parentId]\n  )\n\n  const propsKey = getPropsKey(props)\n\n  const getSnapshot = () => {\n    let local = localStates.get(id)\n    const parentState = states.get(parentId)\n\n    // check if this is a scheme-only change (light↔dark) where DynamicColorIOS handles it\n    const isSchemeOnlyChange =\n      process.env.TAMAGUI_TARGET === 'native' &&\n      isIos &&\n      getSetting('fastSchemeChange') &&\n      local &&\n      parentState &&\n      local.scheme !== parentState.scheme &&\n      getThemeBaseName(local.name) === getThemeBaseName(parentState.name)\n\n    // all tracked keys are scheme-optimized = can skip re-render for scheme changes\n    const keysSize = keys?.current?.size ?? 0\n    const schemeKeysSize = schemeKeys?.current?.size ?? 0\n    const allKeysSchemeOptimized = schemeKeysSize === keysSize && keysSize > 0\n\n    const canSkipForSchemeChange = isSchemeOnlyChange && allKeysSchemeOptimized\n\n    const needsUpdate = props.passThrough\n      ? false\n      : isRoot || props.name === 'light' || props.name === 'dark' || props.name === null\n        ? true\n        : !HasRenderedOnce.get(keys)\n          ? true\n          : canSkipForSchemeChange\n            ? false // skip re-render for scheme-only changes with DynamicColorIOS\n            : keys?.current?.size\n              ? true\n              : props.needsUpdate?.()\n\n    // const cacheKey = `${cacheVersion}${id}${propsKey}${parentState?.name || ''}${isRoot}`\n    // if (!needsUpdate) {\n    //   if (cache.has(cacheKey)) {\n    //     return cache.get(cacheKey)!\n    //   }\n    // }\n\n    const [rerender, next] = getNextState(\n      local,\n      props,\n      propsKey,\n      isRoot,\n      id,\n      parentId,\n      needsUpdate,\n      PendingUpdate.get(id)\n    )\n\n    PendingUpdate.delete(id)\n\n    // we always create a new localState for every component\n    // that way we can use it to de-opt and avoid renders granularly\n    // we always return the localState object in each component\n    // the global state (states) should always be up to date with the latest\n    if (!local || rerender) {\n      local = { ...next }\n      localStates.set(id, local)\n    }\n\n    if (process.env.NODE_ENV === 'development' && props.debug === 'verbose') {\n      console.groupCollapsed(` ${id} getSnapshot ${rerender}`, local.name, '>', next.name)\n      console.info({\n        props,\n        propsKey,\n        isRoot,\n        parentId,\n        local,\n        next,\n        needsUpdate,\n        isSchemeOnlyChange,\n        allKeysSchemeOptimized,\n        canSkipForSchemeChange,\n      })\n      console.groupEnd()\n    }\n\n    Object.assign(local, next)\n    local.id = id\n    states.set(id, next)\n\n    return local\n  }\n\n  if (process.env.NODE_ENV === 'development' && globalThis.time)\n    globalThis.time`theme-prep-uses`\n\n  const state = useSyncExternalStore(subscribe, getSnapshot, getSnapshot)\n\n  useIsomorphicLayoutEffect(() => {\n    if (!HasRenderedOnce.get(keys)) {\n      HasRenderedOnce.set(keys, true)\n      return\n    }\n    if (!propsKey) {\n      if (HadTheme.get(keys)) {\n        // we're removing the last theme, make sure to notify\n        scheduleUpdate(id)\n      }\n      HadTheme.set(keys, false)\n      return\n    }\n    if (process.env.NODE_ENV === 'development' && props.debug === 'verbose') {\n      console.warn(` · useTheme(${id}) scheduleUpdate`, propsKey, states.get(id)?.name)\n    }\n    scheduleUpdate(id)\n    HadTheme.set(keys, true)\n  }, [keys, propsKey])\n\n  return state\n}\n\nconst getNextState = (\n  lastState: ThemeState | undefined,\n  props: UseThemeWithStateProps,\n  propsKey: string,\n  isRoot = false,\n  id: string,\n  parentId: string,\n  needsUpdate: boolean | undefined,\n  pendingUpdate: boolean | 'force' | undefined\n): [boolean, ThemeState] => {\n  const { debug } = props\n  const parentState = states.get(parentId)\n\n  if (props.passThrough) {\n    return [false, lastState || parentState || ({ name: '' } as any)]\n  }\n\n  if (!themes) {\n    themes = getConfig().themes\n  }\n\n  const name =\n    !propsKey && (!lastState || !lastState?.isNew)\n      ? null\n      : getNewThemeName(\n          parentState?.name,\n          props,\n          pendingUpdate === 'force' ? true : !!needsUpdate\n        )\n  const isSameAsParent = parentState && (!name || name === parentState.name)\n  const shouldRerender = Boolean(\n    pendingUpdate === 'force' ||\n    (needsUpdate && (pendingUpdate || lastState?.name !== parentState?.name))\n  )\n\n  if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n    const message = ` · useTheme(${id}) getNextState => ${name} needsUpdate ${needsUpdate} shouldRerender ${shouldRerender}`\n    if (process.env.TAMAGUI_TARGET === 'native') {\n      console.info(message)\n    } else {\n      console.groupCollapsed(message)\n      console.trace({ name, lastState, parentState, props, propsKey, id, isSameAsParent })\n      console.groupEnd()\n    }\n  }\n\n  if (isSameAsParent) {\n    return [shouldRerender, { ...parentState, isNew: false }]\n  }\n\n  if (!name) {\n    const next = lastState ?? parentState\n\n    if (!next) {\n      throw new Error(\n        process.env.NODE_ENV === 'development'\n          ? `${MISSING_THEME_MESSAGE}\n\nLooked for theme${props.name ? ` \"${props.name}\"` : ''}${props.componentName ? ` (component: ${props.componentName})` : ''}, but no theme state was resolved (parentId: ${parentId}, id: ${id}).`\n          : MISSING_THEME_MESSAGE\n      )\n    }\n\n    if (shouldRerender) {\n      const updated = { ...(parentState || lastState)! }\n      return [true, updated]\n    }\n\n    return [false, next]\n  }\n\n  const scheme = getScheme(name)\n  // const parentInverses = parentState?.inverses ?? 0\n  const isInverse = parentState && scheme !== parentState.scheme\n  // const inverses = parentInverses + (isInverse ? 1 : 0)\n\n  const nextState = {\n    id,\n    name,\n    theme: themes[name],\n    scheme,\n    parentId,\n    parentName: parentState?.name,\n    // inverses,\n    isInverse,\n    isNew: true,\n  } satisfies ThemeState\n\n  if (isRoot) {\n    rootThemeState = nextState\n  }\n\n  if (pendingUpdate !== 'force' && lastState && lastState.name === name) {\n    return [false, nextState]\n  }\n\n  const shouldAvoidRerender =\n    pendingUpdate !== 'force' &&\n    lastState &&\n    !needsUpdate &&\n    nextState.name === lastState.name\n\n  if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n    console.groupCollapsed(\n      ` · useTheme(${id}) ⏭️ ${name} shouldAvoidRerender: ${shouldAvoidRerender}`\n    )\n    console.info({ lastState, needsUpdate, nextState, pendingUpdate })\n    console.groupEnd()\n  }\n\n  // we still update the state (not changing identity), that way children can properly resolve the right state\n  // but this one wont trigger an update\n  if (shouldAvoidRerender) {\n    return [false, nextState]\n  }\n\n  return [true, nextState]\n}\n\nfunction scheduleUpdate(id: string) {\n  const queue = [id]\n  const visited = new Set<string>()\n\n  while (queue.length) {\n    const parent = queue.shift()!\n    const children = listenersByParent[parent]\n    if (children) {\n      for (const childId of children) {\n        if (!visited.has(childId)) {\n          visited.add(childId)\n          queue.push(childId)\n        }\n      }\n    }\n  }\n\n  visited.forEach((childId) => {\n    const cb = allListeners.get(childId)\n    cb?.()\n  })\n}\n\nconst validSchemes = {\n  light: 'light',\n  dark: 'dark',\n} as const\n\nfunction getScheme(name: string) {\n  return validSchemes[name.split('_')[0]]\n}\n\nfunction getNewThemeName(\n  parentName = '',\n  props: UseThemeWithStateProps,\n  forceUpdate = false\n): string | null {\n  const { name, reset } = props\n  const componentName = props.unstyled ? undefined : props.componentName\n\n  if (name && reset) {\n    throw new Error(\n      process.env.NODE_ENV === 'production'\n        ? `❌004`\n        : 'Cannot reset and set a new name at the same time.'\n    )\n  }\n\n  const { themes } = getConfig()\n\n  if (reset) {\n    // For reset, we need to go back to the grandparent theme\n    // If parentName is just a scheme (like \"dark\" or \"light\"),\n    // we should return the opposite scheme or a default\n    const isSchemeOnly = parentName === 'light' || parentName === 'dark'\n    if (isSchemeOnly) {\n      // If parent is just a scheme, go to the opposite scheme\n      return parentName === 'light' ? 'dark' : 'light'\n    }\n\n    // For compound themes like \"dark_blue\", extract the scheme\n    const lastPartIndex = parentName.lastIndexOf('_')\n    // parentName will have format light_{name} or dark_{name}\n    const name = lastPartIndex <= 0 ? parentName : parentName.slice(lastPartIndex)\n    const scheme = parentName.slice(0, lastPartIndex)\n    const result = themes[name] ? name : scheme\n    return result\n  }\n\n  const parentParts = parentName.split('_')\n\n  // always remove component theme if it exists, we never sub a component theme\n  const lastName = parentParts[parentParts.length - 1]\n  if (lastName && lastName[0].toLowerCase() !== lastName[0]) {\n    parentParts.pop()\n  }\n\n  const subNames = [\n    name && componentName ? `${name}_${componentName}` : undefined,\n    name,\n    componentName,\n  ].filter(Boolean) as string[]\n\n  let found: string | null = null\n\n  // If name is provided, try it as a standalone theme first (both with and without scheme)\n  // This allows explicit theme overrides like:\n  // - <Theme name=\"blue\"><Button theme=\"dark_green\"> → finds \"dark_green_Button\"\n  // - <Theme name=\"blue\"><Button theme=\"green\"> → finds \"light_green_Button\"\n  // - <Theme name=\"blue\"><Button theme=\"green_active\"> → finds \"light_green_active_Button\"\n  if (name) {\n    // First try the exact name as-is, but only if it already has a scheme prefix\n    // This prevents \"green\" from matching before we try \"light_green_Button\"\n    const nameHasScheme = getScheme(name)\n\n    if (nameHasScheme) {\n      // Name has scheme (like \"dark_green\"), try as-is with priority to component theme\n      for (const subName of subNames) {\n        if (subName in themes) {\n          found = subName\n          break\n        }\n      }\n    }\n\n    // If not found and name doesn't have a scheme, try adding parent's scheme\n    if (!found && !nameHasScheme) {\n      const parentScheme = getScheme(parentName)\n\n      if (parentScheme) {\n        // Try progressively shorter parent bases to preserve color context\n        // For parent \"light_blue_surface1\" + name \"surface3\":\n        //   Try: light_blue_surface1_surface3, light_blue_surface3, light_surface3\n        // This ensures color context (blue) is preserved before falling back to scheme-only\n\n        // Build list of potential bases from most specific to least specific\n        const potentialBases: string[] = []\n        for (let i = parentParts.length; i >= 1; i--) {\n          potentialBases.push(parentParts.slice(0, i).join('_'))\n        }\n\n        outer: for (const base of potentialBases) {\n          // Try with componentName first, then without\n          const candidates = [\n            componentName ? `${base}_${name}_${componentName}` : undefined,\n            `${base}_${name}`,\n          ].filter(Boolean) as string[]\n\n          for (const potential of candidates) {\n            if (potential in themes) {\n              found = potential\n              break outer\n            }\n          }\n        }\n      }\n    }\n  }\n\n  // If not found, fall back to the original search algorithm combining with parent\n  if (!found) {\n    // If we're only adding componentName (no explicit name prop), don't backtrack through parent parts\n    // This preserves sub-themes like \"light_red_surface1\" when adding Button component\n    if (!name && componentName) {\n      // Just try adding component to full parent\n      const potential = `${parentParts.join('_')}_${componentName}`\n      if (potential in themes) {\n        found = potential\n      }\n      // If not found, don't add component theme - return null to keep parent theme\n    } else {\n      // Original backtracking search for when explicit name is provided\n      const max = parentParts.length\n\n      for (let i = 0; i <= max; i++) {\n        const base = (i === 0 ? parentParts : parentParts.slice(0, -i)).join('_')\n\n        for (const subName of subNames) {\n          const potential = base ? `${base}_${subName}` : subName\n\n          if (potential in themes) {\n            found = potential\n            break\n          }\n        }\n\n        if (found) break\n      }\n    }\n  }\n\n  if (\n    !forceUpdate &&\n    found === parentName &&\n    // if its a scheme only sub-theme, we always consider it \"new\" because it likely inverses\n    // and we want to avoid reparenting\n    !validSchemes[found]\n  ) {\n    return null\n  }\n\n  return found\n}\n\nconst getPropsKey = ({ name, reset, forceClassName, componentName }: ThemeProps) =>\n  `${name || ''}${reset || ''}${forceClassName || ''}${componentName || ''}`\n\nexport const hasThemeUpdatingProps = (props: ThemeProps) =>\n  'name' in props || 'reset' in props || 'forceClassName' in props\n","// from radix\n// https://raw.githubusercontent.com/radix-ui/primitives/main/packages/react/compose-refs/src/composeRefs.tsx\n\nimport * as React from 'react'\n\ntype PossibleRef<T> =\n  | React.Ref<T>\n  | React.ForwardedRef<T>\n  | React.RefObject<T>\n  | React.Dispatch<React.SetStateAction<T | null>>\n  | undefined\n\n/**\n * Set a given ref to a given value\n * This utility takes care of different types of refs: callback refs and RefObject(s)\n */\nexport function setRef<T>(ref: PossibleRef<T>, value: T) {\n  if (typeof ref === 'function') {\n    ref(value)\n  } else if (ref) {\n    ;(ref as React.MutableRefObject<T>).current = value\n  }\n}\n\n/**\n * A utility to compose multiple refs together\n * Accepts callback refs and RefObject(s)\n */\nexport function composeRefs<T>(...refs: PossibleRef<T>[]) {\n  return (node: T) => refs.forEach((ref) => setRef(ref, node))\n}\n\n/**\n * A custom hook that composes multiple refs\n * Accepts callback refs and RefObject(s)\n */\nexport function useComposedRefs<T>(...refs: PossibleRef<T>[]) {\n  return React.useCallback(composeRefs(...refs), refs)\n}\n","import { composeRefs } from '@tamagui/compose-refs'\nimport { isClient, isServer, isWeb, useIsomorphicLayoutEffect } from '@tamagui/constants'\nimport { composeEventHandlers } from '@tamagui/helpers'\nimport { isEqualShallow } from '@tamagui/is-equal-shallow'\nimport React, { ReactElement, ReactNode, useMemo } from 'react'\nimport { devConfig, getConfig } from './config'\nimport { isDevTools } from './constants/isDevTools'\nimport { ComponentContext } from './contexts/ComponentContext'\nimport { GroupContext } from './contexts/GroupContext'\nimport { didGetVariableValue, setDidGetVariableValue } from './createVariable'\nimport { defaultComponentStateMounted } from './defaultComponentState'\nimport { getWebEvents, useEvents, wrapWithGestureDetector } from './eventHandling'\nimport { getDefaultProps } from './helpers/getDefaultProps'\nimport { getSplitStyles, useSplitStyles } from './helpers/getSplitStyles'\nimport { log } from './helpers/log'\nimport { type GenericProps, mergeComponentProps } from './helpers/mergeProps'\nimport { mergeRenderElementProps } from './helpers/mergeRenderElementProps'\nimport { objectIdentityKey } from './helpers/objectIdentityKey'\nimport { usePointerEvents } from './helpers/pointerEvents'\nimport {\n  extractPseudoState,\n  resolveEffectivePseudoTransition,\n} from './helpers/pseudoTransitions'\nimport { setElementProps } from './helpers/setElementProps'\nimport { subscribeToContextGroup } from './helpers/subscribeToContextGroup'\nimport { themeable } from './helpers/themeable'\nimport { getStyleTags } from './helpers/wrapStyleTags'\nimport { useComponentState } from './hooks/useComponentState'\nimport { setMediaShouldUpdate, useMedia } from './hooks/useMedia'\nimport { useThemeWithState } from './hooks/useTheme'\nimport type { TamaguiComponentEvents } from './interfaces/TamaguiComponentEvents'\nimport { hooks } from './setupHooks'\nimport type {\n  AllGroupContexts,\n  ComponentGroupEmitter,\n  DebugProp,\n  GroupStateListener,\n  LayoutEvent,\n  PseudoGroupState,\n  SingleGroupContext,\n  StaticConfig,\n  StyleableOptions,\n  TamaguiComponent,\n  TamaguiComponentState,\n  TamaguiElement,\n  TamaguiInternalConfig,\n  TextProps,\n  UseAnimationHook,\n  UseAnimationProps,\n  UseStyleEmitter,\n  UseThemeWithStateProps,\n} from './types'\nimport { Slot } from './views/Slot'\nimport { getThemedChildren } from './views/Theme'\nimport type { ViewProps } from './views/View'\n\n/**\n * All things that need one-time setup after createTamagui is called\n */\nlet time: any\n\nlet debugKeyListeners: Set<Function> | undefined\nlet startVisualizer: Function | undefined\n\ntype ComponentSetState = React.Dispatch<React.SetStateAction<TamaguiComponentState>>\n\nexport const componentSetStates = new Set<ComponentSetState>()\nconst avoidReRenderKeys = new Set([\n  'hover',\n  'press',\n  'pressIn',\n  'group',\n  'focus',\n  'focusWithin',\n  'media',\n  'group',\n])\n\nif (process.env.TAMAGUI_TARGET !== 'native' && typeof window !== 'undefined') {\n  const cancelPresses = () => {\n    // clear all press downs\n    componentSetStates.forEach((setState) =>\n      setState((prev) => {\n        if (prev.press || prev.pressIn) {\n          return {\n            ...prev,\n            press: false,\n            pressIn: false,\n          }\n        }\n        return prev\n      })\n    )\n    componentSetStates.clear()\n  }\n  const cancelTouches = () => {\n    // clear press and hover on touch end - hover may have been set\n    // via synthetic mouseenter event triggered by touch\n    componentSetStates.forEach((setState) =>\n      setState((prev) => {\n        if (prev.press || prev.pressIn || prev.hover) {\n          return {\n            ...prev,\n            press: false,\n            pressIn: false,\n            hover: false,\n          }\n        }\n        return prev\n      })\n    )\n    componentSetStates.clear()\n  }\n  addEventListener('mouseup', cancelPresses)\n  addEventListener('touchend', cancelTouches)\n  addEventListener('touchcancel', cancelTouches)\n\n  // hold option to see debug visualization\n  if (process.env.NODE_ENV === 'development') {\n    startVisualizer = () => {\n      const devVisualizerConfig = devConfig?.visualizer\n\n      if (devVisualizerConfig && !globalThis.__tamaguiDevVisualizer) {\n        globalThis.__tamaguiDevVisualizer = true\n\n        debugKeyListeners = new Set()\n        let tm\n        let isShowing = false\n        let resizeListener: (() => void) | null = null\n        const options = {\n          key: 'Alt',\n          delay: 800,\n          ...(typeof devVisualizerConfig === 'object' ? devVisualizerConfig : {}),\n        }\n\n        function show(val: boolean) {\n          clearTimeout(tm)\n          isShowing = val\n          debugKeyListeners?.forEach((l) => l(val))\n\n          // Remove resize listener when hiding\n          if (!val && resizeListener) {\n            window.removeEventListener('resize', resizeListener)\n            resizeListener = null\n          }\n        }\n\n        function cancelShow() {\n          clearTimeout(tm)\n          if (resizeListener) {\n            window.removeEventListener('resize', resizeListener)\n            resizeListener = null\n          }\n        }\n\n        window.addEventListener('blur', () => {\n          show(false)\n        })\n\n        window.addEventListener('keydown', ({ key, metaKey, defaultPrevented }) => {\n          clearTimeout(tm) // always clear so we dont trigger on chords\n          if (defaultPrevented) return\n          if (metaKey) return\n          if (key === options.key) {\n            // Add resize listener immediately when Alt is pressed\n            if (!resizeListener) {\n              resizeListener = () => cancelShow()\n              window.addEventListener('resize', resizeListener)\n            }\n            tm = setTimeout(() => {\n              show(true)\n            }, options.delay)\n          }\n        })\n\n        window.addEventListener('keyup', ({ defaultPrevented }) => {\n          if (defaultPrevented) return\n          cancelShow()\n          // any key can clear it\n          if (isShowing) {\n            show(false)\n          }\n        })\n      }\n    }\n  }\n}\n\n/**\n * Only on native do we need the actual underlying View/Text\n * On the web we avoid react-native dep altogether.\n */\nlet BaseText: any\nlet BaseView: any\nlet hasSetupBaseViews = false\n\nconst lastInteractionWasKeyboard = { value: false }\nconst lastInteractionWasTouch = { value: false }\nif (isWeb && typeof document !== 'undefined') {\n  document.addEventListener('keydown', () => {\n    if (!lastInteractionWasKeyboard.value) {\n      lastInteractionWasKeyboard.value = true\n    }\n  })\n  document.addEventListener('mousedown', () => {\n    if (lastInteractionWasKeyboard.value) {\n      lastInteractionWasKeyboard.value = false\n    }\n  })\n  document.addEventListener('mousemove', () => {\n    if (lastInteractionWasKeyboard.value) {\n      lastInteractionWasKeyboard.value = false\n    }\n    // Real mouse movement clears touch flag\n    lastInteractionWasTouch.value = false\n  })\n  document.addEventListener('touchstart', () => {\n    lastInteractionWasTouch.value = true\n  })\n  // Don't reset on touchend - mouseenter fires after touchend\n  // and we need to still detect it as a touch interaction.\n  // Mouse move will reset it when there's real mouse activity.\n}\n\nexport function createComponent<\n  ComponentPropTypes extends Record<string, any> = {},\n  Ref extends TamaguiElement = TamaguiElement,\n  BaseProps = never,\n  BaseStyles extends object = never,\n>(staticConfig: StaticConfig) {\n  let config: TamaguiInternalConfig | null = null\n\n  const { Component, isText, isHOC } = staticConfig\n\n  const component = React.forwardRef<Ref, ComponentPropTypes>((propsIn, forwardedRef) => {\n    config ||= getConfig()\n\n    const internalID = process.env.NODE_ENV === 'development' ? React.useId() : ''\n\n    if (process.env.NODE_ENV === 'development') {\n      if (startVisualizer) {\n        startVisualizer()\n        startVisualizer = undefined\n      }\n    }\n\n    if (process.env.TAMAGUI_TARGET === 'native') {\n      // todo this could be moved to a cleaner location\n      if (!hasSetupBaseViews) {\n        hasSetupBaseViews = true\n        const baseViews = hooks.getBaseViews?.()\n        if (baseViews) {\n          BaseText = baseViews.Text\n          BaseView = baseViews.View\n        }\n      }\n    }\n\n    // test only\n    if (process.env.NODE_ENV === 'test') {\n      if (propsIn['data-test-renders']) {\n        propsIn['data-test-renders']['current'] ??= 0\n        propsIn['data-test-renders']['current'] += 1\n      }\n    }\n\n    // set variants through context\n    // order is after default props but before props\n    const { context, isReactNative } = staticConfig\n    const debugProp = propsIn['debug'] as DebugProp\n\n    const styledContextValue: GenericProps | undefined = context\n      ? React.useContext(context)\n      : undefined\n    let overriddenContextProps: GenericProps | null = null\n\n    const componentContext = React.useContext(ComponentContext)\n    const hasTextAncestor = !!(isWeb && isText ? componentContext.inText : false)\n\n    if (\n      !process.env.TAMAGUI_IS_CORE_NODE &&\n      process.env.NODE_ENV === 'development' &&\n      debugProp === 'profile' &&\n      !time\n    ) {\n      const timer = require('@tamagui/timer').timer()\n      time = timer.start()\n      globalThis['time'] = time\n    }\n    if (process.env.NODE_ENV === 'development' && time) time`non-tamagui time (ignore)`\n\n    // React inserts default props after your props for some reason...\n    // order important so we do loops, you can't just spread because JS does weird things\n    let props: ViewProps | TextProps = propsIn\n\n    const componentName = props.componentName || staticConfig.componentName\n\n    // merge both default props and styled context props - ensure order is preserved\n    const defaultProps = getDefaultProps(\n      staticConfig,\n      props.componentName,\n      isText && hasTextAncestor\n    )\n\n    // merge styled context props over defaults, ensure order is preserved\n    const [nextProps, overrides] = mergeComponentProps(\n      defaultProps,\n      styledContextValue,\n      propsIn\n    )\n\n    props = nextProps as ViewProps | TextProps\n    overriddenContextProps = overrides\n\n    if (process.env.NODE_ENV === 'development' && isClient) {\n      React.useEffect(() => {\n        let node: HTMLElement | undefined\n        let overlay: HTMLSpanElement | null = null\n\n        const remove = () => {\n          if (overlay) {\n            try {\n              overlay.parentNode?.removeChild(overlay)\n              overlay = null\n            } catch {\n              // may have unmounted\n            }\n          }\n        }\n\n        const debugVisualizerHandler = (show = false) => {\n          node = stateRef.current.host as HTMLElement | undefined\n          if (!node) return\n\n          if (show) {\n            if (!overlay) {\n              overlay = document.createElement('span')\n              overlay.style.inset = '0px'\n              overlay.style.zIndex = '1000000'\n              overlay.style.position = 'absolute'\n              overlay.style.borderColor = 'red'\n              overlay.style.borderWidth = '1px'\n              overlay.style.borderStyle = 'dotted'\n            }\n\n            const dataAt = node.getAttribute('data-at') || ''\n            const dataIn = node.getAttribute('data-in') || ''\n\n            const tooltip = document.createElement('span')\n            tooltip.style.position = 'absolute'\n            tooltip.style.top = '0px'\n            tooltip.style.left = '0px'\n            tooltip.style.padding = '3px'\n            tooltip.style.background = 'rgba(0,0,0,0.75)'\n            tooltip.style.color = 'rgba(255,255,255,1)'\n            tooltip.style.fontSize = '12px'\n            tooltip.style.lineHeight = '12px'\n            tooltip.style.fontFamily = 'monospace'\n            tooltip.innerText = `${componentName || ''} ${dataAt} ${dataIn}`.trim()\n\n            overlay.appendChild(tooltip)\n            node.appendChild(overlay)\n          } else {\n            remove()\n          }\n        }\n\n        debugKeyListeners ||= new Set()\n        debugKeyListeners.add(debugVisualizerHandler)\n\n        return () => {\n          remove()\n          debugKeyListeners?.delete(debugVisualizerHandler)\n        }\n      }, [componentName])\n    }\n\n    const groupContextParent = React.useContext(GroupContext)\n\n    // Get animation driver - either from animatedBy prop lookup or context\n    const animationDriver = (() => {\n      if (props.animatedBy && config?.animations) {\n        const animations = config.animations\n        // If animations is an object with named drivers (has 'default' key)\n        if ('default' in animations) {\n          return (\n            (animations as Record<string, any>)[props.animatedBy] ?? animations.default\n          )\n        }\n        // Single driver config - only 'default' makes sense\n        return props.animatedBy === 'default' ? animations : null\n      }\n      return componentContext.animationDriver\n    })()\n\n    const useAnimations = animationDriver?.useAnimations as UseAnimationHook | undefined\n\n    const componentState = useComponentState(\n      props,\n      animationDriver?.isStub ? null : animationDriver,\n      staticConfig,\n      config!\n    )\n\n    const {\n      disabled,\n      groupName,\n      hasAnimationProp,\n      hasEnterStyle,\n      isAnimated,\n      isExiting,\n      isHydrated,\n      presence,\n      presenceState,\n      setState,\n      noClass,\n      state,\n      stateRef,\n      supportsCSS,\n      willBeAnimated,\n      willBeAnimatedClient,\n      startedUnhydrated,\n    } = componentState\n\n    if (hasAnimationProp && animationDriver?.avoidReRenders) {\n      useIsomorphicLayoutEffect(() => {\n        const pendingState = stateRef.current.nextState\n        if (pendingState) {\n          stateRef.current.nextState = undefined\n          componentState.setStateShallow(pendingState)\n        }\n      })\n    }\n\n    // create new context with groups, or else sublings will grab the same one\n    const allGroupContexts = useMemo((): AllGroupContexts | null => {\n      if (!groupName || props.passThrough) {\n        return groupContextParent\n      }\n\n      const listeners = new Set<GroupStateListener>()\n      stateRef.current.group?.listeners?.clear()\n      stateRef.current.group = {\n        listeners,\n        emit(state) {\n          listeners.forEach((l) => l(state))\n        },\n        subscribe(cb) {\n          listeners.add(cb)\n          if (listeners.size === 1) {\n            setStateShallow({ hasDynGroupChildren: true })\n          }\n          return () => {\n            listeners.delete(cb)\n            if (listeners.size === 0) {\n              setStateShallow({ hasDynGroupChildren: false })\n            }\n          }\n        },\n      }\n\n      return {\n        ...groupContextParent,\n        [groupName]: {\n          state: {\n            pseudo: defaultComponentStateMounted,\n          },\n          subscribe: (listener) => {\n            const dispose = stateRef.current.group?.subscribe(listener)\n            return () => {\n              dispose?.()\n            }\n          },\n        },\n      }\n    }, [stateRef, groupName, groupContextParent])\n\n    // if our animation driver supports avoidReRenders, we'll replace this below with\n    // a version that essentially uses an internall emitter rather than setting state\n    // but still stores the current state and applies if it it needs to during render\n    let setStateShallow = componentState.setStateShallow\n\n    if (process.env.NODE_ENV === 'development' && time) time`use-state`\n\n    // web-only - string-style not valid for native\n    const renderProp = props.render\n    const isRenderString = !Component || typeof Component === 'string'\n\n    // default to render prop, fallback to component (when both strings)\n    const element = isWeb\n      ? isRenderString\n        ? renderProp || Component\n        : Component\n      : Component\n\n    const BaseTextComponent = BaseText || element || 'span'\n    const BaseViewComponent = BaseView || element || (hasTextAncestor ? 'span' : 'div')\n    const BaseComponent = isText ? BaseTextComponent : BaseViewComponent\n\n    let elementType = BaseComponent\n\n    const isAnimatedCustomComponent =\n      animationDriver && isAnimated && animationDriver.needsCustomComponent\n\n    if (isAnimatedCustomComponent) {\n      elementType = animationDriver[isText ? 'Text' : 'View'] || elementType\n    }\n\n    // internal use only\n    const disableThemeProp =\n      process.env.TAMAGUI_TARGET === 'native' ? false : props['data-disable-theme']\n\n    const disableTheme = disableThemeProp || isHOC\n\n    if (process.env.NODE_ENV === 'development' && time) time`theme-props`\n\n    const themeStateProps: UseThemeWithStateProps = {\n      componentName,\n      disable: disableTheme,\n      shallow: props.themeShallow,\n      debug: debugProp,\n      unstyled: props.unstyled,\n    }\n\n    // this is set conditionally if existing in props because we wrap children with\n    // a span if they ever set one of these, so avoid wrapping all children with span\n    if ('theme' in props) {\n      themeStateProps.name = props.theme\n    }\n    // Always set needsUpdate callback so it can check the ref's latest value\n    // This ensures components with $theme-dark/$theme-light re-render on theme change\n    // even when using raw colors (not tokens) since isListeningToTheme is set after useSplitStyles\n    themeStateProps.needsUpdate = () => !!stateRef.current.isListeningToTheme\n    // on native we optimize theme changes if fastSchemeChange is enabled, otherwise deopt\n    if (process.env.TAMAGUI_TARGET === 'native') {\n      themeStateProps.deopt = willBeAnimated\n    }\n\n    if (process.env.NODE_ENV === 'development') {\n      if (debugProp && debugProp !== 'profile') {\n        const name = `${\n          componentName ||\n          Component?.displayName ||\n          Component?.name ||\n          '[Unnamed Component]'\n        }`\n\n        const type =\n          (hasEnterStyle ? '(hasEnter)' : ' ') +\n          (isAnimated ? '(animated)' : ' ') +\n          (isReactNative ? '(rnw)' : ' ') +\n          (noClass ? '(noClass)' : ' ') +\n          (state.press || state.pressIn ? '(PRESSED)' : ' ') +\n          (state.hover ? '(HOVERED)' : ' ') +\n          (state.focus ? '(FOCUSED)' : ' ') +\n          (state.focusWithin ? '(WITHIN FOCUSED)' : ' ') +\n          (presenceState?.isPresent === false ? '(EXIT)' : '')\n\n        const dataIs = propsIn['data-is'] || ''\n        const banner = `<${name} /> ${internalID} ${dataIs ? ` ${dataIs}` : ''} ${type.trim()} (hydrated: ${isHydrated}) (unmounted: ${state.unmounted})`\n\n        const ch = propsIn.children\n        let childLog =\n          typeof ch === 'string' ? (ch.length > 4 ? ch.slice(0, 4) + '...' : ch) : ''\n        if (childLog.length) {\n          childLog = `(children: ${childLog})`\n        }\n\n        if (isWeb) {\n          console.info(`%c ${banner}`, 'background: green; color: white;')\n          if (isServer) {\n            log({ noClass, isAnimated, isWeb, supportsCSS })\n          } else {\n            // if strict mode or something messes with our nesting this fixes:\n            console.groupEnd()\n\n            console.groupCollapsed(`${childLog} [inspect props, state, context 👇]`)\n            log('props in:', propsIn)\n            log('final props:', props, Object.keys(props))\n            log({ state, staticConfig, elementType, themeStateProps })\n            log({\n              context,\n              overriddenContextProps,\n              componentContext,\n            })\n            log({ presence, isAnimated, isHOC, hasAnimationProp, useAnimations })\n            console.groupEnd()\n          }\n        } else {\n          console.info(\n            `\\n\\n------------------------------\\n${banner}\\n------------------------------\\n`\n          )\n          log(`children:`, props.children)\n          log({ overriddenContextProps, styledContextValue })\n          log({ noClass, isAnimated, isWeb, supportsCSS })\n        }\n      }\n    }\n\n    if (process.env.NODE_ENV === 'development' && time) time`pre-theme-media`\n\n    const [theme, themeState] = useThemeWithState(themeStateProps)\n\n    if (process.env.NODE_ENV === 'development' && time) time`theme`\n\n    elementType = element || elementType\n    const isStringElement = typeof elementType === 'string'\n\n    const mediaState = useMedia(componentContext, debugProp)\n\n    setDidGetVariableValue(false)\n\n    if (process.env.NODE_ENV === 'development' && time) time`media`\n\n    const resolveValues =\n      // if HOC + mounted + has animation prop, resolve as value so it passes non-variable to child\n      (isAnimated && !supportsCSS) ||\n      (isHOC && state.unmounted == false && hasAnimationProp)\n        ? 'value'\n        : 'auto'\n\n    const styleProps = {\n      mediaState,\n      noClass,\n      resolveValues,\n      isExiting,\n      isAnimated,\n      willBeAnimated,\n      styledContext: styledContextValue,\n    } as const\n\n    const themeName = themeState?.name || ''\n\n    if (process.env.NODE_ENV === 'development' && time) time`split-styles-prepare`\n\n    const splitStyles = useSplitStyles(\n      props,\n      staticConfig,\n      theme,\n      themeName,\n      state,\n      styleProps,\n      null,\n      componentContext,\n      allGroupContexts,\n      elementType,\n      startedUnhydrated,\n      debugProp\n    )\n\n    const isPassthrough = !splitStyles\n\n    // splitStyles === null === passThrough\n\n    // Merge style-resolved context overrides (issues #3670, #3676)\n    // When styles set values that are also context keys (from variants, pseudos, media, etc),\n    // we need to add them to overriddenContextProps so they propagate to children\n    // Use either the component's own context or its parent's context (for styled() inheritance)\n    let contextForOverride = staticConfig.context\n    if (splitStyles?.overriddenContextProps) {\n      const contextForProps =\n        staticConfig.context || staticConfig.parentStaticConfig?.context\n      if (contextForProps) {\n        for (const key in splitStyles.overriddenContextProps) {\n          overriddenContextProps ||= {}\n          overriddenContextProps[key] = splitStyles.overriddenContextProps[key]\n        }\n        // Use parent's context if this component doesn't have its own\n        if (!staticConfig.context) {\n          contextForOverride = contextForProps\n        }\n      }\n    }\n\n    const groupContext = groupName ? allGroupContexts?.[groupName] || null : null\n\n    // one tiny mutation 🙏 get width/height optimistically from raw values if possible\n    // if set hardcoded it avoids extra renders\n    if (\n      !isPassthrough &&\n      groupContext &&\n      // avoids onLayout if we don't need it\n      props.containerType !== 'normal'\n    ) {\n      const groupState = groupContext?.state\n      if (groupState && groupState.layout === undefined) {\n        if (splitStyles.style?.width || splitStyles.style?.height) {\n          groupState.layout = {\n            width: fromPx(splitStyles.style.width),\n            height: fromPx(splitStyles.style.height),\n          }\n        }\n      }\n    }\n\n    // avoids re-rendering if animation driver supports it\n    // TODO believe we need to set some sort of \"pendingState\" in case it re-renders\n    if (\n      !isPassthrough &&\n      (hasAnimationProp || groupName) &&\n      animationDriver?.avoidReRenders\n    ) {\n      const ogSetStateShallow = setStateShallow\n\n      stateRef.current.updateStyleListener = () => {\n        const useStyleListener = stateRef.current.useStyleListener\n\n        // if no animation driver is listening for style updates, fall back to normal re-render\n        // this happens when a component has group prop but no transition/animation prop\n        if (!useStyleListener) {\n          const pendingState = stateRef.current.nextState\n          if (pendingState) {\n            stateRef.current.nextState = undefined\n            ogSetStateShallow(pendingState)\n          }\n          return\n        }\n\n        const updatedState = stateRef.current.nextState || state\n        const mediaState = stateRef.current.nextMedia\n\n        const nextStyles = getSplitStyles(\n          props,\n          staticConfig,\n          theme,\n          themeName,\n          updatedState,\n          mediaState ? { ...styleProps, mediaState } : styleProps,\n          null,\n          componentContext,\n          allGroupContexts,\n          elementType,\n          startedUnhydrated,\n          debugProp\n        )\n\n        // compute effective transition based on entering/exiting pseudo states\n        const effectiveTransition = resolveEffectivePseudoTransition(\n          stateRef.current.prevPseudoState,\n          updatedState,\n          nextStyles?.pseudoTransitions,\n          props.transition\n        )\n\n        // update prev state for next comparison (includes group states)\n        stateRef.current.prevPseudoState = extractPseudoState(updatedState)\n\n        useStyleListener((nextStyles?.style || {}) as any, effectiveTransition)\n      }\n\n      function updateGroupListeners() {\n        const updatedState = stateRef.current.nextState!\n        if (groupContext) {\n          const {\n            group,\n            hasDynGroupChildren,\n            unmounted,\n            transition,\n            ...childrenGroupState\n          } = updatedState\n          notifyGroupSubscribers(\n            groupContext,\n            stateRef.current.group || null,\n            childrenGroupState\n          )\n        }\n      }\n\n      // don't change this ever or else you break ComponentContext and cause re-rendering\n      // use a Set of listeners so multiple components can register\n      componentContext.mediaEmitListeners ||= new Set()\n\n      // only register once per component instance\n      if (!stateRef.current.mediaEmitCleanup) {\n        const updateListener = (next: Record<string, boolean>) => {\n          stateRef.current.nextMedia = next\n          stateRef.current.updateStyleListener?.()\n        }\n        componentContext.mediaEmitListeners.add(updateListener)\n        stateRef.current.mediaEmitCleanup = () => {\n          componentContext.mediaEmitListeners?.delete(updateListener)\n        }\n      }\n\n      componentContext.mediaEmit ||= (next) => {\n        // notify all registered components\n        for (const listener of componentContext.mediaEmitListeners!) {\n          listener(next)\n        }\n      }\n\n      stateRef.current.setStateShallow = (nextOrGetNext) => {\n        const prev = stateRef.current.nextState || state\n        const next =\n          typeof nextOrGetNext === 'function' ? nextOrGetNext(prev) : nextOrGetNext\n\n        if (next === prev || isEqualShallow(prev, next)) {\n          return\n        }\n\n        // one thing we have to handle here and where it gets a bit more complex is group styles\n        const canAvoidReRender = Object.keys(next).every((key) =>\n          avoidReRenderKeys.has(key)\n        )\n\n        const updatedState = {\n          ...prev,\n          ...next,\n        }\n        stateRef.current.nextState = updatedState\n\n        if (canAvoidReRender) {\n          if (\n            process.env.NODE_ENV === 'development' &&\n            debugProp &&\n            debugProp !== 'profile'\n          ) {\n            console.groupCollapsed(`[⚡️] avoid setState`, componentName, next, {\n              updatedState,\n              props,\n            })\n            console.info(stateRef.current.host)\n            console.groupEnd()\n          }\n\n          updateGroupListeners()\n          stateRef.current.updateStyleListener?.()\n        } else {\n          if (\n            process.env.NODE_ENV === 'development' &&\n            debugProp &&\n            debugProp !== 'profile'\n          ) {\n            console.info(`[🐌] re-render`, { canAvoidReRender, next })\n          }\n          ogSetStateShallow(next)\n        }\n      }\n\n      // needs to capture latest props (it's called from memoized `events`)\n      setStateShallow = (state) => {\n        stateRef.current.setStateShallow?.(state)\n      }\n    }\n\n    if (process.env.NODE_ENV === 'development' && time) time`split-styles`\n\n    // hide strategy will set this opacity = 0 until measured\n    if (splitStyles) {\n      if (\n        props.group &&\n        props.untilMeasured === 'hide' &&\n        !stateRef.current.hasMeasured\n      ) {\n        splitStyles.style ||= {}\n        splitStyles.style.opacity = 0\n      }\n\n      if (splitStyles.dynamicThemeAccess != null) {\n        stateRef.current.isListeningToTheme = splitStyles.dynamicThemeAccess\n      }\n    }\n\n    // only listen for changes if we are using raw theme values or media space, or dynamic media (native)\n    // array = space media breakpoints\n    const hasRuntimeMediaKeys = splitStyles?.hasMedia && splitStyles.hasMedia !== true\n    const shouldListenForMedia =\n      didGetVariableValue() ||\n      hasRuntimeMediaKeys ||\n      (noClass && splitStyles?.hasMedia === true)\n\n    const mediaListeningKeys = hasRuntimeMediaKeys\n      ? (splitStyles.hasMedia as Set<string>)\n      : null\n    if (process.env.NODE_ENV === 'development' && debugProp === 'verbose') {\n      console.info(`useMedia() createComponent`, shouldListenForMedia, mediaListeningKeys)\n    }\n\n    setMediaShouldUpdate(componentContext, shouldListenForMedia, mediaListeningKeys)\n\n    const {\n      viewProps: viewPropsIn,\n      pseudos,\n      style: splitStylesStyle,\n      classNames,\n      pseudoGroups,\n      mediaGroups,\n    } = splitStyles || {}\n\n    const propsWithAnimation = props as UseAnimationProps\n\n    const {\n      asChild,\n      children,\n      themeShallow,\n      spaceDirection: _spaceDirection,\n      onPress,\n      onLongPress,\n      onPressIn,\n      onPressOut,\n      onHoverIn,\n      onHoverOut,\n      onMouseUp,\n      onMouseDown,\n      onMouseEnter,\n      onMouseLeave,\n      onFocus,\n      onBlur,\n      separator,\n      // ignore from here on out\n      passThrough,\n      forceStyle: _forceStyle,\n      // @ts-ignore  for next/link compat etc\n      onClick,\n      theme: _themeProp,\n      ...nonTamaguiProps\n    } = viewPropsIn || {}\n\n    // these can ultimately be for DOM, react-native-web views, or animated views\n    // so the type is pretty loose\n    let viewProps = nonTamaguiProps\n\n    if (props.forceStyle) {\n      viewProps.forceStyle = props.forceStyle\n    }\n\n    if (isHOC) {\n      if (typeof _themeProp !== 'undefined') {\n        viewProps.theme = _themeProp\n      }\n      if (typeof passThrough !== 'undefined') {\n        viewProps.passThrough = passThrough\n      }\n    }\n\n    // once you set animation prop don't remove it, you can set to undefined/false\n    // reason is animations are heavy - no way around it, and must be run inline here (🙅 loading as a sub-component)\n    let animationStyles: any\n    const shouldUseAnimation =\n      // if it supports css vars we run it on server too to get matching initial style\n      (supportsCSS ? willBeAnimatedClient : willBeAnimated) && useAnimations && !isHOC\n\n    let animatedRef\n\n    if (shouldUseAnimation) {\n      const useStyleEmitter: UseStyleEmitter | undefined = animationDriver?.avoidReRenders\n        ? (listener) => {\n            stateRef.current.useStyleListener = listener\n          }\n        : undefined\n\n      // compute effective transition once here (single source of truth)\n      // avoidReRenders path also computes this in updateStyleListener\n      const effectiveTransition = resolveEffectivePseudoTransition(\n        stateRef.current.prevPseudoState,\n        state,\n        splitStyles?.pseudoTransitions,\n        props.transition\n      )\n\n      // add effectiveTransition to splitStyles for drivers to consume\n      if (splitStyles) {\n        splitStyles.effectiveTransition = effectiveTransition\n      }\n\n      const animations = useAnimations({\n        props: propsWithAnimation,\n        // if hydrating, send empty style\n        style: splitStylesStyle || {},\n        // @ts-ignore\n        styleState: splitStyles,\n        useStyleEmitter,\n        presence,\n        componentState: state,\n        styleProps,\n        theme,\n        themeName,\n        pseudos: pseudos || null,\n        staticConfig,\n        stateRef,\n      })\n\n      if (animations) {\n        if (animations.ref) {\n          // @ts-ignore\n          animatedRef = animations.ref\n        }\n\n        if (isHydrated && animations) {\n          animationStyles = animations.style\n          viewProps.style = animationStyles\n          if (animations.className) {\n            viewProps.className = `${state.unmounted === 'should-enter' ? 't_unmounted ' : ''}${viewProps.className || ''} ${animations.className}`\n          }\n        }\n      }\n\n      if (process.env.NODE_ENV === 'development' && time) time`animations`\n    }\n\n    if (process.env.NODE_ENV === 'development' && props.untilMeasured && !props.group) {\n      console.warn(\n        `You set the untilMeasured prop without setting group. This doesn't work, be sure to set untilMeasured on the parent that sets group, not the children that use the $group- prop.\\n\\nIf you meant to do this, you can disable this warning - either change untilMeasured and group at the same time, or do group={conditional ? 'name' : undefined}`\n      )\n    }\n\n    if (process.env.NODE_ENV === 'development' && time) time`destructure`\n\n    if (\n      !isPassthrough &&\n      groupContext && // avoids onLayout if we don't need it\n      props.containerType !== 'normal'\n    ) {\n      nonTamaguiProps.onLayout = composeEventHandlers(\n        nonTamaguiProps.onLayout,\n        (e: LayoutEvent) => {\n          // one off update here\n          const layout = e.nativeEvent.layout\n          groupContext.state.layout = layout\n          stateRef.current.group?.emit({\n            layout,\n          })\n          // force re-render if measure strategy is hide\n          if (!stateRef.current.hasMeasured && props.untilMeasured === 'hide') {\n            setState((prev) => ({ ...prev }))\n          }\n\n          stateRef.current.hasMeasured = true\n        }\n      )\n    }\n\n    viewProps =\n      hooks.usePropsTransform?.(\n        elementType,\n        nonTamaguiProps,\n        stateRef,\n        stateRef.current.willHydrate\n      ) || nonTamaguiProps\n\n    if (!stateRef.current.composedRef) {\n      stateRef.current.composedRef = composeRefs<TamaguiElement>(\n        (x) => (stateRef.current.host = x as TamaguiElement),\n        forwardedRef,\n        setElementProps,\n        animatedRef\n      )\n    }\n\n    viewProps.ref = stateRef.current.composedRef\n\n    // handle pointer events (native: maps to touch events, web: no-op)\n    usePointerEvents(props, viewProps)\n\n    if (process.env.NODE_ENV === 'development') {\n      if (!isReactNative && !isText && isWeb && !isHOC) {\n        React.Children.toArray(props.children).forEach((item) => {\n          // allow newlines because why not its annoying with mdx\n          if (typeof item === 'string' && item !== '\\n') {\n            console.error(\n              `Unexpected text node: ${item}. A text node cannot be a child of a <${staticConfig.componentName || propsIn.tag || 'View'}>.`,\n              props\n            )\n          }\n        })\n      }\n    }\n\n    if (process.env.NODE_ENV === 'development' && time) time`events-hooks`\n\n    const unPress = () => {\n      setStateShallow({ press: false, pressIn: false })\n    }\n\n    if (process.env.NODE_ENV === 'development' && isWeb) {\n      useIsomorphicLayoutEffect(() => {\n        if (debugProp === 'verbose') {\n          function cssStyleDeclarationToObject(style: CSSStyleDeclaration) {\n            const styleObject: Record<string, any> = {}\n            for (let i = 0; i < style.length; i++) {\n              let prop = style[i]\n              styleObject[prop] = style.getPropertyValue(prop)\n            }\n            return styleObject\n          }\n          const computed = stateRef.current.host\n            ? cssStyleDeclarationToObject(\n                getComputedStyle(stateRef.current.host as Element)\n              )\n            : {}\n          console.groupCollapsed(`Rendered > (opacity: ${computed.opacity})`)\n          console.warn(stateRef.current.host)\n          console.warn(computed)\n          console.groupEnd()\n        }\n      })\n    }\n\n    // Animation enter state machine: true -> 'should-enter' -> false\n    // Stage 1: Set 'should-enter' synchronously before paint to apply enterStyle classes\n    // Stage 2: After browser paint, set false to trigger CSS transition\n    //\n    // CRITICAL: useEffect does NOT guarantee post-paint execution!\n    // See: https://thoughtspile.github.io/2021/11/15/unintentional-layout-effect/\n    // When layoutEffect updates state → re-render before paint → useEffect flushes pre-paint\n    // Solution: Double RAF ensures browser has actually painted before we transition\n    useIsomorphicLayoutEffect(() => {\n      if (state.unmounted === true && hasEnterStyle) {\n        setStateShallow({ unmounted: 'should-enter' })\n        return\n      }\n\n      if (state.unmounted) {\n        // For CSS transitions, we need browser to paint enterStyle before removing it.\n        // Double RAF guarantees paint: first RAF schedules after current frame,\n        // second RAF schedules after that frame completes (including paint).\n        if (supportsCSS) {\n          let cancelled = false\n          requestAnimationFrame(() => {\n            if (cancelled) return\n            requestAnimationFrame(() => {\n              if (cancelled) return\n              setStateShallow({ unmounted: false })\n            })\n          })\n          return () => {\n            cancelled = true\n          }\n        }\n        // Non-CSS drivers handle their own animation timing\n        setStateShallow({ unmounted: false })\n      }\n\n      return () => {\n        componentSetStates.delete(setState)\n        stateRef.current.mediaEmitCleanup?.()\n      }\n    }, [state.unmounted, supportsCSS])\n\n    useIsomorphicLayoutEffect(() => {\n      if (disabled) return\n\n      if (!pseudoGroups && !mediaGroups) return\n      if (!allGroupContexts) return\n      return subscribeToContextGroup({\n        groupContext: allGroupContexts,\n        setStateShallow,\n        mediaGroups,\n        pseudoGroups,\n      })\n    }, [\n      allGroupContexts,\n      disabled,\n      pseudoGroups ? objectIdentityKey(pseudoGroups) : 0,\n      mediaGroups ? objectIdentityKey(mediaGroups) : 0,\n    ])\n\n    const groupEmitter = stateRef.current.group\n    useIsomorphicLayoutEffect(() => {\n      if (!groupContext || !groupEmitter) return\n\n      notifyGroupSubscribers(groupContext, groupEmitter, state)\n    }, [groupContext, groupEmitter, state])\n\n    // if its a group its gotta listen for pseudos to emit them to children\n\n    const runtimePressStyle = !disabled && noClass && pseudos?.pressStyle\n    const runtimeFocusStyle = !disabled && noClass && pseudos?.focusStyle\n    const runtimeFocusVisibleStyle = !disabled && noClass && pseudos?.focusVisibleStyle\n    const attachFocus = Boolean(\n      runtimePressStyle ||\n      runtimeFocusStyle ||\n      runtimeFocusVisibleStyle ||\n      onFocus ||\n      onBlur ||\n      !!componentContext.setParentFocusState\n    )\n\n    const hasDynamicGroupChildren = Boolean(groupName && state.hasDynGroupChildren)\n\n    const attachPress = Boolean(\n      hasDynamicGroupChildren ||\n      runtimePressStyle ||\n      onPress ||\n      onPressOut ||\n      onPressIn ||\n      onMouseDown ||\n      onMouseUp ||\n      onLongPress ||\n      onClick ||\n      pseudos?.focusVisibleStyle\n    )\n\n    const runtimeHoverStyle = !disabled && noClass && pseudos?.hoverStyle\n    const needsHoverState = Boolean(hasDynamicGroupChildren || runtimeHoverStyle)\n    const attachHover =\n      isWeb &&\n      !!(hasDynamicGroupChildren || needsHoverState || onMouseEnter || onMouseLeave)\n\n    // check presence rather than value to prevent reparenting bugs\n    // allows for onPress={x ? function : undefined} without re-ordering dom\n    const shouldAttach =\n      !disabled &&\n      !props.asChild &&\n      Boolean(\n        attachFocus ||\n        attachPress ||\n        attachHover ||\n        runtimePressStyle ||\n        runtimeHoverStyle ||\n        runtimeFocusStyle\n      )\n\n    const needsPressState = Boolean(hasDynamicGroupChildren || runtimePressStyle)\n\n    if (process.env.NODE_ENV === 'development' && time) time`events-setup`\n\n    if (process.env.NODE_ENV === 'development' && debugProp === 'verbose') {\n      log(`🪩 events()`, {\n        runtimeFocusStyle,\n        runtimePressStyle,\n        runtimeHoverStyle,\n        runtimeFocusVisibleStyle,\n        attachPress,\n        attachFocus,\n        attachHover,\n        shouldAttach,\n        needsHoverState,\n        pseudos,\n      })\n    }\n\n    const events: TamaguiComponentEvents | null = shouldAttach\n      ? {\n          onPressOut: attachPress\n            ? (e) => {\n                unPress()\n                onPressOut?.(e)\n                onMouseUp?.(e)\n              }\n            : undefined,\n          ...((attachHover || attachPress) && {\n            onMouseEnter: (e) => {\n              const next: Partial<typeof state> = {}\n              // Don't set hover on touch devices - touch triggers mouseenter\n              // but there's no corresponding mouseleave on touch end\n              if (needsHoverState && !lastInteractionWasTouch.value) {\n                next.hover = true\n              }\n              if (needsPressState) {\n                if (state.pressIn) {\n                  next.press = true\n                }\n              }\n              setStateShallow(next)\n              onHoverIn?.(e)\n              onMouseEnter?.(e)\n            },\n            onMouseLeave: (e) => {\n              const next: Partial<typeof state> = {}\n              if (needsHoverState) {\n                next.hover = false\n              }\n              if (needsPressState) {\n                next.press = false\n                next.pressIn = false\n              }\n              setStateShallow(next)\n              onHoverOut?.(e)\n              onMouseLeave?.(e)\n            },\n          }),\n          onPressIn: attachPress\n            ? (e) => {\n                if (needsPressState) {\n                  setStateShallow({\n                    press: true,\n                    pressIn: true,\n                  })\n                }\n                onPressIn?.(e)\n                onMouseDown?.(e)\n                if (isWeb) {\n                  componentSetStates.add(setState)\n                }\n              }\n            : undefined,\n          onPress: attachPress\n            ? (e) => {\n                unPress()\n                // @ts-ignore\n                isWeb && onClick?.(e)\n                onPress?.(e)\n                if (process.env.TAMAGUI_TARGET === 'web') {\n                  onLongPress?.(e)\n                }\n              }\n            : undefined,\n          ...(process.env.TAMAGUI_TARGET === 'native' &&\n            attachPress &&\n            onLongPress && {\n              onLongPress: (e) => {\n                unPress()\n                onLongPress?.(e)\n              },\n            }),\n          ...(attachFocus && {\n            onFocus: (e) => {\n              const next: Partial<typeof state> = {}\n              if (componentContext.setParentFocusState) {\n                next.focusWithin = true\n              }\n              if (pseudos?.focusVisibleStyle) {\n                if (lastInteractionWasKeyboard.value) {\n                  next.focusVisible = true\n                } else {\n                  next.focus = true\n                }\n              } else {\n                next.focus = true\n              }\n              setStateShallow(next)\n              onFocus?.(e)\n            },\n            onBlur: (e) => {\n              if (componentContext.setParentFocusState) {\n                componentContext.setParentFocusState({ focusWithin: false })\n              }\n              setStateShallow({\n                focus: false,\n                focusVisible: false,\n                focusWithin: false,\n              })\n              onBlur?.(e)\n            },\n          }),\n        }\n      : null\n\n    if (process.env.TAMAGUI_TARGET === 'native' && events && !asChild) {\n      // replicating TouchableWithoutFeedback\n      Object.assign(events, {\n        cancelable: !viewProps.rejectResponderTermination,\n        disabled: disabled,\n        hitSlop: viewProps.hitSlop,\n        delayLongPress: viewProps.delayLongPress,\n        delayPressIn: viewProps.delayPressIn,\n        delayPressOut: viewProps.delayPressOut,\n        focusable: viewProps.focusable ?? true,\n        minPressDuration: 0,\n      })\n    }\n\n    if (process.env.TAMAGUI_TARGET === 'web' && events && !isReactNative) {\n      Object.assign(viewProps, getWebEvents(events))\n    }\n\n    if (process.env.NODE_ENV === 'development' && time) time`events`\n\n    if (process.env.NODE_ENV === 'development' && debugProp === 'verbose') {\n      log(`events`, { events, attachHover, attachPress })\n    }\n\n    // EVENTS native - handles focus/blur, input special cases, and RNGH press handling\n    // Skip gesture setup for HOC components - they may return null which crashes GestureDetector\n    const pressGesture =\n      process.env.TAMAGUI_TARGET === 'native'\n        ? useEvents(events, viewProps, stateRef, staticConfig, isHOC)\n        : null\n\n    if (process.env.NODE_ENV === 'development' && time) time`hooks`\n\n    if (asChild) {\n      elementType = Slot\n      // on native this is already merged into viewProps in useEvents\n      if (process.env.TAMAGUI_TARGET === 'web') {\n        const webStyleEvents = asChild === 'web' || asChild === 'except-style-web'\n        const passEvents = getWebEvents(\n          {\n            onPress,\n            onLongPress,\n            onPressIn,\n            onPressOut,\n            onMouseUp,\n            onMouseDown,\n            onMouseEnter,\n            onMouseLeave,\n          },\n          webStyleEvents\n        )\n        Object.assign(viewProps, passEvents)\n      } else {\n        Object.assign(viewProps, { onPress, onLongPress })\n      }\n    }\n\n    if (process.env.NODE_ENV === 'development' && time) time`spaced-as-child`\n\n    let content: ReactNode | undefined\n\n    if (isPassthrough) {\n      // avoid re-parenting but avoid layout changes\n      content = React.createElement(\n        BaseComponent,\n        {\n          style: {\n            display: 'contents',\n          },\n        },\n        propsIn.children\n      )\n    } else {\n      // here elementType is either the custom animated driver view, or base view\n      if (hooks.useChildren) {\n        // ONLY native:\n        content = hooks.useChildren(elementType, content || children, viewProps)\n      }\n\n      const isRenderPropString = typeof renderProp === 'string'\n\n      // this ONLY handles the case where render is NOT a string\n      // either direct JSX, or a function that returns JSX, we always clone\n      if (renderProp && !isRenderPropString) {\n        const out = getCustomRender(\n          renderProp,\n          content || children,\n          viewProps,\n          componentState\n        )\n        if (out) {\n          viewProps = out.viewProps\n          elementType = out.elementType\n        }\n      }\n\n      if (!content) {\n        // web-only, handle render === string passing to custom animated component\n        if (isRenderPropString) {\n          viewProps.render === renderProp\n        }\n\n        content = React.createElement(elementType, viewProps, content || children)\n      }\n\n      if (process.env.NODE_ENV === 'development' && time) time`use-children`\n    }\n\n    // wrap with GestureDetector for RNGH press handling (native only, no-op on web)\n    // Skip for HOC components - they pass press events to inner component instead\n    if (process.env.TAMAGUI_TARGET === 'native') {\n      content = wrapWithGestureDetector(content, pressGesture, stateRef, isHOC)\n    }\n\n    // needs to reset the presence state for nested children\n    // Use the resolved animationDriver (handles multi-driver config)\n    const ResetPresence = animationDriver?.ResetPresence\n    const needsReset = Boolean(\n      // not when passing down to child\n      !asChild &&\n      // not when passThrough\n      splitStyles &&\n      // not when HOC\n      !isHOC &&\n      ResetPresence &&\n      willBeAnimated &&\n      (hasEnterStyle || presenceState)\n    )\n    // avoid re-parenting\n    const hasEverReset = stateRef.current.hasEverResetPresence\n    if (needsReset && !hasEverReset) {\n      stateRef.current.hasEverResetPresence = true\n    }\n    const renderReset = needsReset || hasEverReset\n    if (renderReset && ResetPresence) {\n      content = <ResetPresence disabled={!needsReset}>{content}</ResetPresence>\n    }\n\n    if (process.env.NODE_ENV === 'development' && time) time`create-element`\n\n    if ('focusWithinStyle' in propsIn) {\n      content = (\n        <ComponentContext.Provider\n          {...componentContext}\n          setParentFocusState={setStateShallow}\n        >\n          {content}\n        </ComponentContext.Provider>\n      )\n    }\n\n    if ('group' in props) {\n      content = (\n        <GroupContext.Provider value={allGroupContexts}>{content}</GroupContext.Provider>\n      )\n    }\n\n    // Text components set inText context for children so nested Text can inherit styles\n    if (process.env.TAMAGUI_TARGET === 'web' && !asChild && isText && !hasTextAncestor) {\n      content = (\n        <ComponentContext.Provider {...componentContext} inText={true}>\n          {content}\n        </ComponentContext.Provider>\n      )\n    }\n\n    if (process.env.NODE_ENV === 'development' && time) time`group-context`\n\n    content =\n      disableTheme || !splitStyles\n        ? content\n        : getThemedChildren(themeState, content, themeStateProps, false, stateRef)\n\n    if (process.env.NODE_ENV === 'development' && time) time`themed-children`\n\n    if (process.env.TAMAGUI_TARGET === 'web') {\n      if (isReactNative && !asChild) {\n        content = (\n          <span\n            className=\"_dsp_contents\"\n            {...(!isPassthrough && isHydrated && events && getWebEvents(events))}\n          >\n            {content}\n          </span>\n        )\n      }\n    }\n\n    if (overriddenContextProps && contextForOverride) {\n      const Provider = contextForOverride.Provider!\n\n      // make sure we re-order styled context keys based on how we pass them here:\n      for (const key in styledContextValue) {\n        if (!(key in overriddenContextProps)) {\n          overriddenContextProps[key] = styledContextValue[key]\n        }\n      }\n\n      content = (\n        <Provider __disableMergeDefaultValues {...overriddenContextProps}>\n          {content}\n        </Provider>\n      )\n    }\n\n    if (process.env.NODE_ENV === 'development' && time) time`context-override`\n\n    // SSR style support - for non compiled styles we render them inline until client takes over\n    // on client we then switch over to our global sheet insert, because rendering inline is expensive\n    if (process.env.TAMAGUI_TARGET === 'web' && startedUnhydrated && splitStyles) {\n      content = (\n        <>\n          {content}\n          {/* we surpress hydration warnings */}\n          {!isHydrated ? getStyleTags(Object.values(splitStyles.rulesToInsert)) : null}\n        </>\n      )\n    }\n\n    if (process.env.NODE_ENV === 'development' && time) time`style-tags`\n\n    if (process.env.NODE_ENV === 'development') {\n      if (debugProp && debugProp !== 'profile') {\n        const element = typeof elementType === 'string' ? elementType : 'Component'\n        const title = `render <${element} /> (${internalID}) with props`\n        if (!isWeb || !isClient) {\n          log(title)\n          log(`state: `, state)\n          if (isDevTools) {\n            log('viewProps', viewProps)\n          }\n          log(`final styles:`)\n          for (const key in splitStylesStyle) {\n            log(key, splitStylesStyle[key])\n          }\n        } else {\n          console.groupCollapsed(title)\n          try {\n            log('viewProps', viewProps)\n            log('children', content)\n            if (typeof window !== 'undefined') {\n              log({\n                propsIn,\n                props,\n                attachPress,\n                animationStyles,\n                classNames,\n                content,\n                elementType,\n                events,\n                isAnimated,\n                hasRuntimeMediaKeys,\n                isStringElement,\n                mediaListeningKeys,\n                pseudos,\n                shouldAttach,\n                noClass,\n                shouldListenForMedia,\n                splitStyles,\n                splitStylesStyle,\n                state,\n                stateRef,\n                staticConfig,\n                styleProps,\n                themeState,\n                viewProps,\n                willBeAnimated,\n                startedUnhydrated,\n              })\n            }\n          } catch {\n            // RN can run into PayloadTooLargeError: request entity too large\n          } finally {\n            console.groupEnd()\n          }\n        }\n        if (debugProp === 'break') {\n          // debugger intentionally here for debugging\n        }\n      }\n    }\n\n    if (process.env.NODE_ENV === 'development' && time) {\n      time`rest`\n      if (!globalThis['willPrint']) {\n        globalThis['willPrint'] = true\n        setTimeout(() => {\n          delete globalThis['willPrint']\n          time.print()\n          time = null\n        }, 50)\n      }\n    }\n\n    return content\n  })\n\n  function notifyGroupSubscribers(\n    groupContext: SingleGroupContext | null,\n    groupEmitter: ComponentGroupEmitter | null,\n    pseudo: PseudoGroupState\n  ) {\n    if (!groupContext || !groupEmitter) {\n      return\n    }\n    const nextState = { ...groupContext.state, pseudo }\n    groupEmitter.emit(nextState)\n    groupContext.state = nextState\n  }\n\n  // let hasLogged = false\n\n  if (staticConfig.componentName) {\n    component.displayName = staticConfig.componentName\n  }\n\n  type ComponentType = TamaguiComponent<\n    ComponentPropTypes,\n    Ref,\n    BaseProps,\n    BaseStyles,\n    {}\n  >\n\n  let res: ComponentType = component as any\n\n  // we now have avoid re-renders in many more cases so imo this is way more worth it\n  // Text/Button/string taking components\n  //  + react compiler can memoize children too\n  res = React.memo(res) as any\n\n  res.staticConfig = staticConfig\n\n  function extendStyledConfig(extended?: Partial<StaticConfig>) {\n    return {\n      ...staticConfig,\n      ...extended,\n      neverFlatten: true,\n      isHOC: true,\n      isStyledHOC: false,\n    }\n  }\n\n  function styleable(Component: any, options?: StyleableOptions) {\n    const skipForwardRef = typeof Component === 'function' && Component.length === 1\n\n    let out = skipForwardRef ? Component : React.forwardRef(Component)\n\n    const extendedConfig = extendStyledConfig(options?.staticConfig)\n\n    out = options?.disableTheme ? out : themeable(out, extendedConfig, true)\n\n    if (extendedConfig.memo || process.env.TAMAGUI_MEMOIZE_STYLEABLE) {\n      out = React.memo(out)\n    }\n\n    out.staticConfig = extendedConfig\n    out.styleable = styleable\n    return out\n  }\n\n  res.styleable = styleable\n\n  return res\n}\n\nconst fromPx = (val?: any): number => {\n  if (typeof val === 'number') return val\n  if (typeof val === 'string') return +val.replace('px', '')\n  return 0\n}\n\n// handles all render logic - returns a new component\nconst getCustomRender = (\n  renderProp: ViewProps['render'],\n  content: ReactNode,\n  viewProps: Record<string, unknown>,\n  state: any\n):\n  | undefined\n  | {\n      viewProps: Record<string, any>\n      elementType: any\n    } => {\n  // Handle render prop variants: function, JSX element, or string\n  if (typeof renderProp === 'function') {\n    // Render function: full control with props and state\n    const out = renderProp(viewProps, state)\n    renderProp = getRenderElementForPlatform(out)\n  }\n\n  if (renderProp) {\n    if (typeof renderProp === 'object' && React.isValidElement(renderProp)) {\n      // JSX element: clone with merged props\n      const renderElement = getRenderElementForPlatform(renderProp)\n      if (renderElement) {\n        const elementProps = renderProp.props as Record<string, any> | undefined\n        const mergedProps = elementProps\n          ? mergeRenderElementProps(elementProps, viewProps, content)\n          : viewProps\n\n        return {\n          elementType: renderProp.type,\n          viewProps: mergedProps,\n        }\n      }\n    }\n  }\n}\n\n// avoid passing web-only elements to native\nfunction getRenderElementForPlatform(potential: ReactElement) {\n  if (process.env.TAMAGUI_TARGET === 'native') {\n    if (isHTMLElement(potential)) {\n      return\n    }\n  }\n  return potential\n}\n\nfunction isHTMLElement(el: ReactElement) {\n  return typeof el['type'] === 'string' && el['type'][0] === el['type'][0].toLowerCase()\n}\n","// for verbose logging outside node/cli\n\nexport const isDevTools = (() => {\n  if (process.env.NODE_ENV === 'development') {\n    try {\n      return new Function('try {return this===window;}catch(e){ return false;}')()\n    } catch {\n      //\n    }\n  }\n  return false\n})()\n","import type { TamaguiComponentState } from './types'\n\nexport const defaultComponentState: TamaguiComponentState = {\n  hover: false,\n  press: false,\n  pressIn: false,\n  focus: false,\n  focusVisible: false,\n  focusWithin: false,\n  unmounted: true,\n  disabled: false,\n}\n\nexport const defaultComponentStateMounted: TamaguiComponentState = {\n  ...defaultComponentState,\n  unmounted: false,\n}\n\nexport const defaultComponentStateShouldEnter: TamaguiComponentState = {\n  ...defaultComponentState,\n  unmounted: 'should-enter',\n}\n","/**\n * Web event handling - maps RN-style events to DOM events\n */\n\nimport type { TamaguiComponentEvents } from './interfaces/TamaguiComponentEvents'\n\ntype EventKeys = keyof TamaguiComponentEvents\ntype EventLikeObject = { [key in EventKeys]?: any }\n\nexport function getWebEvents<E extends EventLikeObject>(events: E, webStyle = true) {\n  return {\n    onMouseEnter: events.onMouseEnter,\n    onMouseLeave: events.onMouseLeave,\n    [webStyle ? 'onClick' : 'onPress']: events.onPress,\n    onMouseDown: events.onPressIn,\n    onMouseUp: events.onPressOut,\n    onTouchStart: events.onPressIn,\n    onTouchEnd: events.onPressOut,\n    onFocus: events.onFocus,\n    onBlur: events.onBlur,\n  }\n}\n\n// web doesn't need wrapping - events go directly on element\nexport function wrapWithGestureDetector(\n  content: any,\n  _gesture: any,\n  _stateRef: { current: any },\n  _isHOC?: boolean\n) {\n  return content\n}\n\n// no-op on web, events attached via getWebEvents\nexport function useEvents(\n  _events: any,\n  _viewProps: any,\n  _stateRef: { current: any },\n  _staticConfig: any,\n  _isHOC?: boolean\n) {\n  return null\n}\n","import { getConfig } from '../config'\nimport type { StaticConfig } from '../types'\n\n// merge both default props, styled context props, and default text props\nexport const getDefaultProps = (\n  staticConfig: StaticConfig,\n  propsComponentName?: string,\n  isSubText?: boolean\n) => {\n  let defaultProps = staticConfig?.defaultProps\n\n  const conf = getConfig()\n  const name =\n    propsComponentName ||\n    staticConfig?.componentName ||\n    // important: this is how we end up getting the defaultProps we set in createTamagui\n    (staticConfig.isText ? 'Text' : 'View')\n\n  const userDefaultProps = conf?.defaultProps?.[name]\n\n  if (userDefaultProps) {\n    // component's staticConfig.defaultProps wins over global config defaults\n    defaultProps = { ...userDefaultProps, ...defaultProps }\n  }\n\n  if (process.env.TAMAGUI_TARGET === 'web' && isSubText) {\n    // for nested text, inherit from parent unless component explicitly set a fontFamily\n    // staticConfig.defaultProps contains explicit component defaults (e.g., SizableText sets $body)\n    // userDefaultProps contains global config defaults - these should be overridden for nested text\n    const hasExplicitFontFamily = staticConfig?.defaultProps?.fontFamily\n    defaultProps = { ...defaultProps }\n    if (!hasExplicitFontFamily) defaultProps.fontFamily = 'inherit'\n    if (!defaultProps.color) defaultProps.color = 'inherit'\n    if (defaultProps.whiteSpace === 'pre-wrap') defaultProps.whiteSpace = 'inherit'\n    if (defaultProps.wordWrap === 'break-word') defaultProps.wordWrap = 'inherit'\n  }\n\n  return defaultProps\n}\n","import {\n  isAndroid,\n  isClient,\n  isIos,\n  isWeb,\n  useIsomorphicLayoutEffect,\n} from '@tamagui/constants'\nimport {\n  StyleObjectIdentifier,\n  StyleObjectProperty,\n  StyleObjectPseudo,\n  StyleObjectRules,\n  stylePropsText,\n  stylePropsTransform,\n  tokenCategories,\n  validPseudoKeys,\n  validStyles as validStylesView,\n} from '@tamagui/helpers'\nimport React from 'react'\nimport { getConfig, getFont, getSetting } from '../config'\nimport { isDevTools } from '../constants/isDevTools'\nimport {\n  getMediaImportanceIfMoreImportant,\n  getMediaKey,\n  mediaKeyMatch,\n} from '../hooks/useMedia'\nimport { mediaState as globalMediaState, mediaQueryConfig } from './mediaState'\nimport type {\n  AllGroupContexts,\n  ClassNamesObject,\n  ComponentContextI,\n  DebugProp,\n  GetStyleResult,\n  GetStyleState,\n  PseudoStyles,\n  RulesToInsert,\n  SpaceTokens,\n  SplitStyleProps,\n  StaticConfig,\n  StyleObject,\n  TamaguiComponentState,\n  TamaguiInternalConfig,\n  TextStyle,\n  ThemeParsed,\n  ViewStyleWithPseudos,\n} from '../types'\nimport { createMediaStyle } from './createMediaStyle'\nimport { fixStyles } from './expandStyles'\nimport { getCSSStylesAtomic, getStyleAtomic, styleToCSS } from './getCSSStylesAtomic'\nimport { getDefaultProps } from './getDefaultProps'\nimport {\n  extractValueFromDynamic,\n  getDynamicVal,\n  getOppositeScheme,\n  isColorStyleKey,\n} from './getDynamicVal'\nimport { getGroupPropParts } from './getGroupPropParts'\nimport { insertStyleRules, shouldInsertStyleRules, updateRules } from './insertStyleRule'\nimport { isActivePlatform } from './isActivePlatform'\nimport { isActiveTheme } from './isActiveTheme'\nimport { log } from './log'\nimport { normalizeValueWithProperty } from './normalizeValueWithProperty'\nimport { propMapper } from './propMapper'\nimport {\n  type PseudoDescriptorKey,\n  pseudoDescriptors,\n  pseudoPriorities,\n} from './pseudoDescriptors'\nimport { skipProps } from './skipProps'\nimport { sortString } from './sortString'\nimport { transformsToString } from './transformsToString'\n\nexport type SplitStyles = ReturnType<typeof getSplitStyles>\n\nexport type SplitStyleResult = ReturnType<typeof getSplitStyles>\n\nlet conf: TamaguiInternalConfig\n\n// WeakMap to track original token values for style objects\n// Used to preserve '$8' style tokens instead of resolved 'var(--t-space-8)'\n// for context prop propagation to children (issues #3670, #3676)\nexport const styleOriginalValues = new WeakMap<object, Record<string, any>>()\n\ntype StyleSplitter = (\n  props: { [key: string]: any },\n  staticConfig: StaticConfig,\n  theme: ThemeParsed,\n  themeName: string,\n  componentState: TamaguiComponentState,\n  styleProps: SplitStyleProps,\n  parentSplitStyles?: GetStyleResult | null,\n  context?: ComponentContextI,\n  groupContext?: AllGroupContexts | null,\n  // web-only\n  elementType?: string,\n  startedUnhydrated?: boolean,\n  debug?: DebugProp\n) => null | GetStyleResult\n\nexport const PROP_SPLIT = '-'\n\n// Normalize group keys like $group-press to $group-true-press when the group name\n// doesn't exist in context (defaults to the unnamed 'true' group)\nfunction normalizeGroupKey(\n  key: string,\n  groupContext: AllGroupContexts | null | undefined\n): string {\n  const parts = key.split('-')\n  const plen = parts.length\n  if (\n    // check if its actually a simple group selector to avoid breaking selectors\n    plen === 2 ||\n    (plen === 3 && pseudoPriorities[parts[parts.length - 1]])\n  ) {\n    const name = parts[1]\n    if (name !== 'true' && groupContext && !groupContext[name]) {\n      return key.replace('$group-', '$group-true-')\n    }\n  }\n  return key\n}\n\n// if you need and easier way to test performance, you can do something like this\n// add this early return somewhere in this file and you can see roughly where it slows down:\n\n// return {\n//   space,\n//   hasMedia,\n//   fontFamily: styleState.fontFamily,\n//   viewProps: {\n//     children: props.children,\n//   },\n//   style: {\n//     borderColor: props.borderColor,\n//     borderWidth: props.borderWidth,\n//     padding: props.padding,\n//   },\n//   pseudos,\n//   classNames,\n//   rulesToInsert,\n//   dynamicThemeAccess,\n// }\n\nfunction isValidStyleKey(\n  key: string,\n  validStyles: Record<string, boolean>,\n  accept?: Record<string, any>\n) {\n  return key in validStyles ? true : accept && key in accept\n}\n\nexport const getSplitStyles: StyleSplitter = (\n  props,\n  staticConfig,\n  theme,\n  themeName,\n  componentState,\n  styleProps,\n  parentSplitStyles,\n  componentContext,\n  groupContext,\n  elementType,\n  startedUnhydrated,\n  debug\n) => {\n  conf = conf || getConfig()\n  const animationDriver = componentContext?.animationDriver || conf.animations\n\n  if (props.passThrough) {\n    return null\n  }\n\n  // a bit icky, we need no normalize but not fully\n  if (\n    isWeb &&\n    styleProps.isAnimated &&\n    animationDriver.isReactNative &&\n    !styleProps.noNormalize\n  ) {\n    styleProps.noNormalize = 'values'\n  }\n\n  const { shorthands } = conf\n  const {\n    isHOC,\n    isText,\n    isInput,\n    variants,\n    isReactNative,\n    inlineProps,\n    inlineWhenUnflattened,\n    parentStaticConfig,\n    acceptsClassName,\n  } = staticConfig\n\n  const viewProps: GetStyleResult['viewProps'] = {}\n  const mediaState = styleProps.mediaState || globalMediaState\n\n  const shouldDoClasses = acceptsClassName && isWeb && !styleProps.noClass\n\n  const rulesToInsert: RulesToInsert =\n    process.env.TAMAGUI_TARGET === 'native' ? (undefined as any) : {}\n  const classNames: ClassNamesObject = {}\n\n  let space: SpaceTokens | null = props.space\n  let pseudos: PseudoStyles | null = null\n  let hasMedia: boolean | Set<string> = false\n  let dynamicThemeAccess: boolean | undefined\n  let pseudoGroups: Set<string> | undefined\n  let mediaGroups: Set<string> | undefined\n  let className = (props.className as string) || '' // existing classNames\n  let mediaStylesSeen = 0\n\n  const validStyles =\n    staticConfig.validStyles ||\n    (staticConfig.isText || staticConfig.isInput ? stylePropsText : validStylesView)\n\n  if (process.env.NODE_ENV === 'development' && debug === 'profile') {\n    // @ts-expect-error\n    time`split-styles-setup`\n  }\n\n  /**\n   * Not the biggest fan of creating an object but it is a nice API\n   */\n  const styleState: GetStyleState = {\n    classNames,\n    conf,\n    props,\n    styleProps,\n    componentState,\n    staticConfig,\n    style: null,\n    theme,\n    usedKeys: {},\n    viewProps,\n    context: componentContext,\n    debug,\n  }\n\n  // only used by compiler\n  if (process.env.IS_STATIC === 'is_static') {\n    const { fallbackProps } = styleProps\n    if (fallbackProps) {\n      styleState.props = new Proxy(props, {\n        get(_, key, val) {\n          if (!Reflect.has(props, key)) {\n            return Reflect.get(fallbackProps, key)\n          }\n          return Reflect.get(props, key)\n        },\n      })\n    }\n  }\n\n  if (process.env.NODE_ENV === 'development' && debug === 'profile') {\n    // @ts-expect-error\n    time`style-state`\n  }\n\n  if (process.env.NODE_ENV === 'development' && debug === 'verbose' && isClient) {\n    if (isDevTools) {\n      console.groupCollapsed('🔹 getSplitStyles 👇')\n      log({\n        props,\n        staticConfig,\n        shouldDoClasses,\n        styleProps,\n        rulesToInsert,\n        componentState,\n        styleState,\n        theme: { ...theme },\n      })\n    }\n  }\n\n  const { asChild } = props\n  const { accept } = staticConfig\n  const { noSkip, disableExpandShorthands, noExpand, styledContext } = styleProps\n  const { webContainerType } = conf.settings\n  const parentVariants = parentStaticConfig?.variants\n  for (const keyOg in props) {\n    let keyInit = keyOg\n    let valInit = props[keyInit]\n\n    if (keyInit === 'children') {\n      viewProps[keyInit] = valInit\n      continue\n    }\n\n    if (process.env.NODE_ENV === 'development' && debug === 'profile') {\n      // @ts-expect-error\n      time`before-prop-${keyInit}`\n    }\n\n    if (process.env.NODE_ENV === 'test' && keyInit === 'jestAnimatedStyle') {\n      continue\n    }\n\n    // for custom accept sub-styles\n    if (accept) {\n      const accepted = accept[keyInit]\n      if (\n        (accepted === 'style' || accepted === 'textStyle') &&\n        valInit &&\n        typeof valInit === 'object'\n      ) {\n        viewProps[keyInit] = getSubStyle(styleState, keyInit, valInit, styleProps.noClass)\n        continue\n      }\n    }\n\n    // normalize shorthands up front\n    if (!disableExpandShorthands) {\n      if (keyInit in shorthands) {\n        keyInit = shorthands[keyInit]\n      }\n    }\n\n    if (keyInit === 'className') continue // handled above first\n\n    // when asChild, skip default props - they shouldn't be passed down to children\n    if (asChild) {\n      const defaults = getDefaultProps(staticConfig)\n      if (defaults) {\n        // check both original key and expanded key (after shorthand expansion)\n        const defaultVal = defaults[keyOg] ?? defaults[keyInit]\n        if (defaultVal !== undefined && valInit === defaultVal) {\n          continue\n        }\n      }\n    }\n\n    // keyInit === 'style' is handled in skipProps\n    if (keyInit in skipProps && !noSkip && !isHOC) {\n      if (keyInit === 'group') {\n        if (process.env.TAMAGUI_TARGET === 'web') {\n          // add container style\n          const identifier = `t_group_${valInit}`\n          const containerType = webContainerType || 'inline-size'\n          const containerCSS = [\n            'continer',\n            undefined,\n            identifier,\n            undefined,\n            [\n              `.${identifier} { container-name: ${valInit}; container-type: ${containerType}; }`,\n            ],\n          ] satisfies StyleObject\n          addStyleToInsertRules(rulesToInsert, containerCSS)\n        }\n      }\n      continue\n    }\n\n    let isValidStyleKeyInit = isValidStyleKey(keyInit, validStyles, accept)\n\n    // this is all for partially optimized (not flattened)... maybe worth removing?\n    if (process.env.TAMAGUI_TARGET === 'web') {\n      // react-native-web ignores data-* attributes, fixes passing them to animated views\n      if (staticConfig.isReactNative && keyInit.startsWith('data-')) {\n        keyInit = keyInit.replace('data-', '')\n        viewProps['dataSet'] ||= {}\n        viewProps['dataSet'][keyInit] = valInit\n        continue\n      }\n    }\n\n    if (process.env.TAMAGUI_TARGET === 'native') {\n      if (!isValidStyleKeyInit) {\n        if (!isAndroid) {\n          // only works in android\n          if (keyInit === 'elevationAndroid') continue\n        }\n\n        // map userSelect to native prop\n        if (keyInit === 'userSelect') {\n          keyInit = 'selectable'\n          valInit = valInit !== 'none'\n        } else if (keyInit.startsWith('data-')) {\n          continue\n        }\n      }\n    }\n\n    if (process.env.TAMAGUI_TARGET === 'web') {\n      if (!noExpand) {\n        /**\n         * Copying in the accessibility/prop handling from react-native-web here\n         * Keeps it in a single loop, avoids dup de-structuring to avoid bundle size\n         */\n\n        if (keyInit === 'disabled' && valInit === true) {\n          viewProps['aria-disabled'] = true\n          // Enhance with native semantics\n          if (\n            elementType === 'button' ||\n            elementType === 'form' ||\n            elementType === 'input' ||\n            elementType === 'select' ||\n            elementType === 'textarea'\n          ) {\n            viewProps.disabled = true\n          }\n          if (!variants?.disabled) {\n            continue\n          }\n        }\n\n        if (keyInit === 'testID') {\n          viewProps[isReactNative ? keyInit : 'data-testid'] = valInit\n          continue\n        }\n\n        if (keyInit === 'id') {\n          viewProps.id = valInit\n          continue\n        }\n      }\n    }\n\n    /**\n     * There's (some) reason to this madness: we want to allow returning media/pseudo from variants\n     * Say you have a variant hoverable: { true: { hoverStyle: {} } }\n     * We run propMapper first to expand variant, then we run the inner loop and look again\n     * for if there's a pseudo/media returned from it.\n     */\n\n    let isVariant = !isValidStyleKeyInit && variants && keyInit in variants\n\n    const isStyleLikeKey = isValidStyleKeyInit || isVariant\n\n    let isPseudo = keyInit in validPseudoKeys\n    let isMedia = !isStyleLikeKey && !isPseudo ? getMediaKey(keyInit) : false\n    let isMediaOrPseudo = Boolean(isMedia || isPseudo)\n\n    if (isMediaOrPseudo && isMedia === 'group') {\n      keyInit = normalizeGroupKey(keyInit, groupContext)\n    }\n\n    const isStyleProp = isValidStyleKeyInit || isMediaOrPseudo || (isVariant && !noExpand)\n\n    if (isStyleProp && (asChild === 'except-style' || asChild === 'except-style-web')) {\n      continue\n    }\n\n    const shouldPassProp =\n      (!isStyleProp && isHOC) ||\n      // is in parent variants\n      (isHOC && parentVariants && keyInit in parentVariants) ||\n      inlineProps?.has(keyInit)\n\n    const parentVariant = parentVariants?.[keyInit]\n    const isHOCShouldPassThrough = Boolean(\n      isHOC &&\n      (isValidStyleKeyInit || isMediaOrPseudo || parentVariant || keyInit in skipProps)\n    )\n\n    const shouldPassThrough = shouldPassProp || isHOCShouldPassThrough\n\n    if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n      // console.groupEnd() // react native was not nesting right\n      console.groupCollapsed(\n        `  🔑 ${keyOg}${\n          keyInit !== keyOg ? ` (shorthand for ${keyInit})` : ''\n        } ${shouldPassThrough ? '(pass)' : ''}`\n      )\n      log({ isVariant, valInit, shouldPassProp })\n      if (isClient) {\n        log({\n          variants,\n          variant: variants?.[keyInit],\n          isVariant,\n          isHOCShouldPassThrough,\n          usedKeys: { ...styleState.usedKeys },\n          parentStaticConfig,\n        })\n      }\n    }\n\n    if (shouldPassThrough) {\n      // // TODO bring this back but probably improve it?\n      // if (isPseudo) {\n      //   // this is a lot... but we need to track sub-keys so we don't override them in future things that aren't passed down\n      //   // like our own variants that aren't in parent\n      //   const pseudoStyleObject = getSubStyle(\n      //     styleState,\n      //     keyInit,\n      //     valInit,\n      //     fontFamily,\n      //     true,\n      //     state.noClass\n      //   )\n      //   const descriptor = pseudoDescriptors[keyInit]\n      //   for (const key in pseudoStyleObject) {\n      //     debugger\n      //   }\n      // }\n\n      passDownProp(viewProps, keyInit, valInit, isMediaOrPseudo)\n\n      if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n        console.groupEnd()\n      }\n\n      // if it's a variant here, we have a two layer variant...\n      // aka styled(Input, { unstyled: true, variants: { unstyled: {} } })\n      // which now has it's own unstyled + the child unstyled...\n      // so *don't* skip applying the styles if its different from the parent one\n      if (!isVariant) {\n        continue\n      }\n    }\n\n    // after shouldPassThrough\n    if (!noSkip) {\n      if (keyInit in skipProps) {\n        if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n          console.groupEnd()\n        }\n        continue\n      }\n    }\n\n    // we sort of have to update fontFamily all the time: before variants run, after each variant\n    if (isText || isInput) {\n      if (\n        valInit &&\n        (keyInit === 'fontFamily' || keyInit === shorthands['fontFamily']) &&\n        valInit in conf.fontsParsed\n      ) {\n        styleState.fontFamily = valInit\n      }\n    }\n\n    const disablePropMap = isMediaOrPseudo || !isStyleLikeKey\n\n    propMapper(keyInit, valInit, styleState, disablePropMap, (key, val, originalVal) => {\n      const isStyledContextProp = styledContext && key in styledContext\n\n      if (!isHOC && disablePropMap && !isStyledContextProp && !isMediaOrPseudo) {\n        viewProps[key] = val\n        return\n      }\n\n      if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n        console.groupCollapsed('  💠 expanded', keyInit, '=>', key)\n        log(val)\n        console.groupEnd()\n      }\n\n      if (val == null) return\n\n      if (process.env.TAMAGUI_TARGET === 'native') {\n        if (key === 'pointerEvents') {\n          viewProps[key] = val\n          return\n        }\n      }\n\n      if (\n        (!isHOC && isValidStyleKey(key, validStyles, accept)) ||\n        (process.env.TAMAGUI_TARGET === 'native' && isAndroid && key === 'elevation')\n      ) {\n        mergeStyle(styleState, key, val, 1, false, originalVal)\n        return\n      }\n\n      // re-run with expanded key\n      isPseudo = key in validPseudoKeys\n      isMedia = isPseudo ? false : getMediaKey(key)\n      isMediaOrPseudo = Boolean(isMedia || isPseudo)\n      isVariant = variants && key in variants\n\n      // handle group key transformation for variant-expanded keys (issue #3613)\n      if (isMedia === 'group') {\n        key = normalizeGroupKey(key, groupContext)\n      }\n\n      if (\n        inlineProps?.has(key) ||\n        (process.env.IS_STATIC === 'is_static' && inlineWhenUnflattened?.has(key))\n      ) {\n        viewProps[key] = props[key] ?? val\n      }\n\n      // have to run this logic again here because expansions may need to be passed down\n      // see StyledButtonVariantPseudoMerge test\n      const shouldPassThrough =\n        (styleProps.noExpand && isPseudo) ||\n        (isHOC && (isMediaOrPseudo || parentStaticConfig?.variants?.[keyInit]))\n\n      if (shouldPassThrough) {\n        passDownProp(viewProps, key, val, isMediaOrPseudo)\n        if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n          console.groupCollapsed(` - passing down prop ${key}`)\n          log({ val, after: { ...viewProps[key] } })\n          console.groupEnd()\n        }\n        return\n      }\n\n      if (isPseudo) {\n        if (!val) return\n\n        // TODO can avoid processing this if !shouldDoClasses + state is off\n        // (note: can't because we need to set defaults on enter/exit or else enforce that they should)\n        const pseudoStyleObject = getSubStyle(\n          styleState,\n          key,\n          val,\n          styleProps.noClass && !(process.env.IS_STATIC === 'is_static')\n        )\n\n        if (!shouldDoClasses || process.env.IS_STATIC === 'is_static') {\n          pseudos ||= {}\n          pseudos[key] ||= {}\n\n          // if compiler we can just set this and continue on our way\n          if (process.env.IS_STATIC === 'is_static') {\n            Object.assign(pseudos[key], pseudoStyleObject)\n            return\n          }\n        }\n\n        const descriptor = pseudoDescriptors[key as keyof typeof pseudoDescriptors]\n        const isEnter = key === 'enterStyle'\n        const isExit = key === 'exitStyle'\n\n        // don't continue here on isEnter && !state.unmounted because we need to merge defaults\n        if (!descriptor) {\n          return\n        }\n\n        // on server only generate classes for enterStyle\n        if (shouldDoClasses && !isExit) {\n          const pseudoStyles = getStyleAtomic(pseudoStyleObject, descriptor)\n\n          if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n            console.info('pseudo:', key, pseudoStyleObject, pseudoStyles)\n          }\n\n          for (const psuedoStyle of pseudoStyles) {\n            const fullKey = `${psuedoStyle[StyleObjectProperty]}${PROP_SPLIT}${descriptor.name}`\n            addStyleToInsertRules(rulesToInsert, psuedoStyle)\n            classNames[fullKey] = psuedoStyle[StyleObjectIdentifier]\n          }\n        }\n\n        if (!shouldDoClasses || isExit || isEnter) {\n          // we don't skip this if disabled because we need to animate to default states that aren't even set:\n          // so if we have <Stack enterStyle={{ opacity: 0 }} />\n          // we need to animate from 0 => 1 once enter is finished\n          // see the if (isDisabled) block below which loops through animatableDefaults\n\n          const descriptorKey = descriptor.stateKey || descriptor.name\n\n          let isDisabled = componentState[descriptorKey] === false\n          if (isExit) {\n            isDisabled = !styleProps.isExiting\n          }\n          if (isEnter && componentState.unmounted === false) {\n            isDisabled = true\n          }\n\n          if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n            console.groupCollapsed('pseudo', key, { isDisabled })\n            log({ pseudoStyleObject, isDisabled, descriptor, componentState })\n            console.groupEnd()\n          }\n\n          const importance = descriptor.priority\n\n          const pseudoOriginalValues = styleOriginalValues.get(pseudoStyleObject)\n          for (const pkey in pseudoStyleObject) {\n            const val = pseudoStyleObject[pkey]\n            // when disabled ensure the default value is set for future animations to align\n\n            if (isDisabled) {\n              applyDefaultStyle(pkey, styleState)\n            } else {\n              const curImportance = styleState.usedKeys[pkey] || 0\n              const shouldMerge = importance >= curImportance\n\n              if (shouldMerge) {\n                if (process.env.IS_STATIC === 'is_static') {\n                  pseudos ||= {}\n                  pseudos[key] ||= {}\n                  pseudos[key][pkey] = val\n                }\n                mergeStyle(\n                  styleState,\n                  pkey,\n                  val,\n                  importance,\n                  false,\n                  pseudoOriginalValues?.[pkey]\n                )\n              }\n\n              if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n                log('    subKey', pkey, shouldMerge, {\n                  importance,\n                  curImportance,\n                  pkey,\n                  val,\n                })\n              }\n            }\n          }\n\n          // set this after the loop over pseudoStyleObject so it applies before setting usedKeys\n          if (!isDisabled) {\n            // mark usedKeys based on pseudoStyleObject\n            for (const key in val) {\n              const k = shorthands[key] || key\n              styleState.usedKeys[k] = Math.max(importance, styleState.usedKeys[k] || 0)\n            }\n          }\n        }\n\n        return\n      }\n\n      // media\n      if (isMedia) {\n        if (!val) return\n\n        // for some reason 'space' in val upsetting next ssr during prod build\n        // technically i guess this also will not apply if 0 space which makes sense?\n        const mediaKeyShort = key.slice(isMedia == 'theme' ? 7 : 1)\n\n        hasMedia ||= true\n        const hasSpace = val['space']\n\n        if (hasSpace || !shouldDoClasses || styleProps.willBeAnimated) {\n          if (!hasMedia || typeof hasMedia === 'boolean') {\n            hasMedia = new Set()\n          }\n          hasMedia.add(mediaKeyShort)\n        }\n\n        // can bail early\n        if (isMedia === 'platform') {\n          if (!isActivePlatform(key)) {\n            return\n          }\n        }\n\n        if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n          log(`  📺 ${key}`, {\n            key,\n            val,\n            props,\n            shouldDoClasses,\n            acceptsClassName,\n            componentState,\n            mediaState,\n          })\n        }\n\n        const priority = mediaStylesSeen\n        mediaStylesSeen += 1\n\n        // for theme media ($theme-light, $theme-dark), always generate CSS classes for proper SSR\n        // even when noClass is set (animation drivers with inline output still need theme CSS)\n        const shouldDoClassesForThisMedia =\n          shouldDoClasses || (isWeb && isMedia === 'theme')\n\n        if (shouldDoClassesForThisMedia) {\n          const mediaStyle = getSubStyle(styleState, key, val, false)\n          const mediaStyles = getCSSStylesAtomic(mediaStyle)\n\n          for (const style of mediaStyles) {\n            // handle nested media:\n            // for now we're doing weird stuff, getCSSStylesAtomic will put the\n            // $platform-web into property so we can check it here\n            const property = style[StyleObjectProperty]\n            const isSubStyle = property[0] === '$'\n            if (isSubStyle && !isActivePlatform(property)) {\n              continue\n            }\n\n            const out = createMediaStyle(\n              style,\n              mediaKeyShort,\n              mediaQueryConfig,\n              isMedia,\n              false,\n              priority\n            )\n\n            if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n              log(`📺 media style:`, out)\n            }\n\n            // this is imperfect it should be fixed further down, we mess up property when dealing with\n            // media-sub-style, like $sm={{ $platform-web: {} }}\n            // property is just $platform-web, it should br $platform-web-bg, so we add extra info from style\n            // but that info includes the value too\n            const subKey = isSubStyle ? style[2] : ''\n            const fullKey = `${\n              style[StyleObjectProperty]\n            }${subKey}${PROP_SPLIT}${mediaKeyShort}${style[StyleObjectPseudo] || ''}`\n\n            addStyleToInsertRules(rulesToInsert, out as any)\n            classNames[fullKey] = out[StyleObjectIdentifier]\n          }\n        } else {\n          const isThemeMedia = isMedia === 'theme'\n          const isGroupMedia = isMedia === 'group'\n          const isPlatformMedia = isMedia === 'platform'\n\n          if (!isThemeMedia && !isPlatformMedia && !isGroupMedia) {\n            if (!mediaState[mediaKeyShort]) {\n              if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n                log(`  📺 ❌ DISABLED ${mediaKeyShort}`)\n              }\n              return\n            }\n            if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n              log(`  📺 ✅ ENABLED ${mediaKeyShort}`)\n            }\n          }\n\n          const mediaStyle = getSubStyle(styleState, key, val, true)\n\n          let importanceBump = 0\n\n          if (isThemeMedia) {\n            if (\n              process.env.TAMAGUI_TARGET === 'native' &&\n              isIos &&\n              getSetting('fastSchemeChange')\n            ) {\n              // iOS will use https://reactnative.dev/docs/dynamiccolorios\n              // so need to predefine the dynamic color before merging the styles\n              // for example: <StyledYStack $theme-dark={{borderColor: '$red10'}} $theme-light={{borderColor: '$green10'}}> => {borderColor: {dynamic: {dark: '$red10', light: '$green10'}}}\n\n              styleState.style ||= {}\n              const scheme = mediaKeyShort\n              const oppositeScheme = getOppositeScheme(mediaKeyShort)\n              const themeOriginalValues = styleOriginalValues.get(mediaStyle)\n              const isCurrentScheme = themeName === scheme || themeName.startsWith(scheme)\n\n              for (const subKey in mediaStyle) {\n                const val = extractValueFromDynamic(mediaStyle[subKey], scheme)\n                const existing = styleState.style[subKey]\n\n                // Only color properties support DynamicColorIOS - non-color properties\n                // like opacity, dimensions, etc. will crash if wrapped with {dynamic: {...}}\n                // See: https://github.com/tamagui/tamagui/issues/3096\n                // See: https://github.com/tamagui/tamagui/issues/2980\n                if (!isColorStyleKey(subKey)) {\n                  // non-color properties require re-render to update\n                  dynamicThemeAccess = true\n                  // only apply if this is the current theme\n                  if (isCurrentScheme) {\n                    // update mediaStyle so the later merge loop uses correct value\n                    mediaStyle[subKey] = val\n                  } else {\n                    // remove from mediaStyle so it doesn't get merged with wrong theme's value\n                    delete mediaStyle[subKey]\n                  }\n                  continue\n                }\n\n                // if there's already a dynamic object from the other theme pseudo prop,\n                // merge directly to avoid importance conflicts between $theme-dark and $theme-light\n                if (existing?.dynamic) {\n                  existing.dynamic[scheme] = val\n                  mediaStyle[subKey] = existing\n                } else {\n                  const oppositeVal = extractValueFromDynamic(existing, oppositeScheme)\n                  mediaStyle[subKey] = getDynamicVal({\n                    scheme,\n                    val,\n                    oppositeVal,\n                  })\n                  mergeStyle(\n                    styleState,\n                    subKey,\n                    mediaStyle[subKey],\n                    priority,\n                    false,\n                    themeOriginalValues?.[subKey]\n                  )\n                }\n              }\n            } else {\n              // non-ios or no fastschemechange - need re-renders for theme changes\n              dynamicThemeAccess = true\n              if (!(themeName === mediaKeyShort || themeName.startsWith(mediaKeyShort))) {\n                return\n              }\n            }\n          } else if (isGroupMedia) {\n            const groupInfo = getGroupPropParts(mediaKeyShort)\n            const groupName = groupInfo.name\n\n            // $group-x\n            const groupState = groupContext?.[groupName]?.state\n            const groupPseudoKey = groupInfo.pseudo\n            const groupMediaKey = groupInfo.media\n\n            if (!groupState) {\n              if (process.env.NODE_ENV === 'development' && debug) {\n                log(`No parent with group prop, skipping styles: ${groupName}`)\n              }\n              // we still want to indicate we should listen! this is how subscribeToGroupContext knows to run\n              pseudoGroups ||= new Set()\n              return\n            }\n\n            const componentGroupState = componentState.group?.[groupName]\n\n            if (groupMediaKey) {\n              mediaGroups ||= new Set()\n              mediaGroups.add(groupMediaKey)\n              const mediaState = componentGroupState?.media\n              let isActive = mediaState?.[groupMediaKey]\n\n              // use parent styles if width and height hardcoded we can do an inline media match and avoid double render\n              if (!mediaState && groupState.layout) {\n                isActive = mediaKeyMatch(groupMediaKey, groupState.layout)\n              }\n\n              if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n                log(` 🏘️ GROUP media ${groupMediaKey} active? ${isActive}`, {\n                  ...mediaState,\n                  usedKeys: { ...styleState.usedKeys },\n                })\n              }\n              if (!isActive) {\n                // ensure we set the defaults so animations work\n                for (const pkey in mediaStyle) {\n                  applyDefaultStyle(pkey, styleState)\n                }\n\n                return\n              }\n              importanceBump = 2\n            }\n\n            if (groupPseudoKey) {\n              pseudoGroups ||= new Set()\n              pseudoGroups.add(groupName)\n              const componentGroupPseudoState = (\n                componentGroupState ||\n                // fallback to context initially\n                groupContext?.[groupName].state\n              )?.pseudo\n\n              const isActive = componentGroupPseudoState?.[groupPseudoKey]\n              const priority = pseudoPriorities[groupPseudoKey]\n\n              if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n                log(\n                  ` 🏘️ GROUP pseudo ${groupMediaKey} active? ${isActive}, priority ${priority}`,\n                  {\n                    componentGroupPseudoState: { ...componentGroupPseudoState },\n                    usedKeys: { ...styleState.usedKeys },\n                  }\n                )\n              }\n              if (!isActive) {\n                // ensure we set the defaults so animations work\n                for (const pkey in mediaStyle) {\n                  applyDefaultStyle(pkey, styleState)\n                }\n\n                return\n              }\n              importanceBump = priority\n            }\n          }\n\n          const mediaOriginalValues = styleOriginalValues.get(mediaStyle)\n\n          // extract transition from group pseudo styles (e.g., $group-scenario4-hover.transition)\n          if (isGroupMedia && mediaStyle.transition) {\n            styleState.pseudoTransitions ||= {}\n            styleState.pseudoTransitions[\n              `$${mediaKeyShort}` as keyof typeof styleState.pseudoTransitions\n            ] = mediaStyle.transition as any\n          }\n\n          function mergeMediaStyle(key: string, val: any, originalVal?: any) {\n            styleState.style ||= {}\n            const didMerge = mergeMediaByImportance(\n              styleState,\n              mediaKeyShort,\n              key,\n              val,\n              mediaState[mediaKeyShort],\n              importanceBump,\n              debug,\n              originalVal\n            )\n            if (didMerge && key === 'fontFamily') {\n              styleState.fontFamily = mediaStyle.fontFamily as string\n            }\n          }\n\n          for (const subKey in mediaStyle) {\n            if (subKey === 'space') {\n              continue\n            }\n            if (subKey[0] === '$') {\n              if (!isActivePlatform(subKey)) continue\n              if (!isActiveTheme(subKey, themeName)) continue\n              const subOriginalValues = styleOriginalValues.get(\n                mediaStyle[subKey] as object\n              )\n              for (const subSubKey in mediaStyle[subKey]) {\n                mergeMediaStyle(\n                  subSubKey,\n                  mediaStyle[subKey][subSubKey],\n                  subOriginalValues?.[subSubKey]\n                )\n              }\n            } else {\n              mergeMediaStyle(subKey, mediaStyle[subKey], mediaOriginalValues?.[subKey])\n            }\n          }\n        }\n\n        return // end media\n      }\n\n      // pass to view props\n      if (!isVariant) {\n        if (isStyledContextProp) {\n          return\n        }\n\n        viewProps[key] = val\n      }\n    })\n\n    if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n      try {\n        log(` ✔️ expand complete`, keyInit)\n        log('style', { ...styleState.style })\n        log('viewProps', { ...viewProps })\n        log('transforms', { ...styleState.flatTransforms })\n      } catch {\n        // RN can run into PayloadTooLargeError: request entity too large\n      }\n      console.groupEnd()\n    }\n  } // end prop loop\n\n  if (process.env.NODE_ENV === 'development' && debug === 'profile') {\n    // @ts-expect-error\n    time`split-styles-propsend`\n  }\n\n  // style prop after:\n\n  const avoidNormalize = styleProps.noNormalize === false\n\n  if (!avoidNormalize) {\n    if (styleState.style) {\n      fixStyles(styleState.style)\n\n      if (!styleProps.noExpand && !styleProps.noMergeStyle) {\n        // shouldn't this be better? but breaks some tests weirdly, need to check\n        if (isWeb && (isReactNative ? !animationDriver.supportsCSS : true)) {\n          styleToCSS(styleState.style)\n        }\n      }\n    }\n\n    // these are only the flat transforms\n    // always do this at the very end to preserve the order strictly (animations, origin)\n    // and allow proper merging of all pseudos before applying\n    if (styleState.flatTransforms) {\n      // we need to match the order for animations to work because it needs consistent order\n      // was thinking of having something like `state.prevTransformsOrder = ['y', 'x', ...]\n      // but if we just handle it here its not a big cost and avoids having stateful things\n      // so the strategy is: always sort by a consistent order, until you run into a \"duplicate\"\n      // because you can have something like:\n      //   [{ translateX: 0 }, { scale: 1 }, { translateX: 10 }]\n      // so basically we sort until we get to a duplicate... we could sort even smarter but\n      // this should work for most (all?) of our cases since the order preservation really only needs to apply\n      // to the \"flat\" transform props\n      styleState.style ||= {}\n      mergeFlatTransforms(styleState.style, styleState.flatTransforms)\n    }\n\n    // add in defaults if not set:\n    if (parentSplitStyles) {\n      if (process.env.TAMAGUI_TARGET === 'web') {\n        if (shouldDoClasses) {\n          for (const key in parentSplitStyles.classNames) {\n            const val = parentSplitStyles.classNames[key]\n            if ((styleState.style && key in styleState.style) || key in classNames)\n              continue\n            classNames[key] = val\n          }\n        }\n      }\n      if (!shouldDoClasses) {\n        for (const key in parentSplitStyles.style) {\n          if (key in classNames || (styleState.style && key in styleState.style)) continue\n          styleState.style ||= {}\n          styleState.style[key] = parentSplitStyles.style[key]\n        }\n      }\n    }\n  }\n\n  // Button for example uses disableClassName: true but renders to a 'button' element, so needs this\n  if (process.env.TAMAGUI_TARGET === 'web') {\n    const shouldStringifyTransforms =\n      !styleProps.noNormalize &&\n      !staticConfig.isReactNative &&\n      !staticConfig.isHOC &&\n      (!styleProps.isAnimated || animationDriver.supportsCSS)\n\n    if (shouldStringifyTransforms && Array.isArray(styleState.style?.transform)) {\n      styleState.style.transform = transformsToString(styleState.style!.transform) as any\n    }\n  }\n\n  if (process.env.TAMAGUI_TARGET === 'web') {\n    if (!styleProps.noMergeStyle && styleState.style && shouldDoClasses) {\n      let retainedStyles: ViewStyleWithPseudos | undefined\n      let shouldRetain = false\n\n      if (styleState.style['$$css']) {\n        // avoid re-processing for rnw\n      } else {\n        const atomic = getCSSStylesAtomic(styleState.style)\n\n        for (const atomicStyle of atomic) {\n          const [key, value, identifier] = atomicStyle\n          const isAnimatedAndTransitionOnly =\n            styleProps.isAnimated &&\n            styleProps.noClass &&\n            props.animateOnly?.includes(key)\n\n          // or not animated but you have animateOnly\n          // (moves it to style={}, nice to avoid generating lots of classnames)\n          const nonAnimatedTransitionOnly =\n            !isAnimatedAndTransitionOnly &&\n            !styleProps.isAnimated &&\n            props.animateOnly?.includes(key)\n\n          if (isAnimatedAndTransitionOnly) {\n            retainedStyles ||= {}\n            retainedStyles[key] = styleState.style[key]\n          } else if (nonAnimatedTransitionOnly) {\n            retainedStyles ||= {}\n            retainedStyles[key] = value\n            shouldRetain = true\n          } else {\n            addStyleToInsertRules(rulesToInsert, atomicStyle)\n            classNames[key] = identifier\n          }\n        }\n\n        if (process.env.NODE_ENV === 'development' && props.debug === 'verbose') {\n          // console.groupEnd() // ensure group ended from loop above\n          console.groupCollapsed(`🔹 getSplitStyles final style object`)\n          console.info(styleState.style)\n          console.info(`retainedStyles`, retainedStyles)\n          console.groupEnd()\n        }\n\n        if (shouldRetain || !(process.env.IS_STATIC === 'is_static')) {\n          styleState.style = retainedStyles || {}\n        }\n      }\n    }\n  }\n\n  // merge after the prop loop - and always keep it on style dont turn into className except if RN gives us\n  const styleProp = props.style\n\n  if (!styleProps.noMergeStyle && styleProp) {\n    if (isHOC) {\n      viewProps.style = normalizeStyle(styleProp)\n    } else {\n      const isArray = Array.isArray(styleProp)\n      const len = isArray ? styleProp.length : 1\n      for (let i = 0; i < len; i++) {\n        const style = isArray ? styleProp[i] : styleProp\n        if (style) {\n          if (style['$$css']) {\n            Object.assign(styleState.classNames, style)\n          } else {\n            styleState.style ||= {}\n            Object.assign(styleState.style, normalizeStyle(style))\n          }\n        }\n      }\n    }\n  }\n\n  // native: swap out the right family based on weight/style\n  if (process.env.TAMAGUI_TARGET === 'native') {\n    // set accessible when tabIndex is 0 (issue #3350)\n    if (viewProps.tabIndex === 0) {\n      viewProps.accessible ??= true\n    }\n\n    const style = styleState.style\n    if (style?.fontFamily) {\n      const faceInfo = getFont(style.fontFamily as string)?.face\n      if (faceInfo) {\n        const overrideFace =\n          faceInfo[style.fontWeight as string]?.[style.fontStyle || 'normal']?.val\n        if (overrideFace) {\n          style.fontFamily = overrideFace\n          styleState.fontFamily = overrideFace\n          // If we pass both font family (e.g. InterBold) and a font weight (e.g. 900), android gets confused and just shows the default font, so we remove these:\n          delete style.fontWeight\n          delete style.fontStyle\n        }\n      }\n      if (process.env.NODE_ENV === 'development' && debug && debug !== 'profile') {\n        log(`Found fontFamily native: ${style.fontFamily}`, faceInfo)\n      }\n    }\n  }\n\n  if (process.env.NODE_ENV === 'development' && debug === 'profile') {\n    // @ts-expect-error\n    time`split-styles-pre-result`\n  }\n\n  const result: GetStyleResult = {\n    hasMedia,\n    fontFamily: styleState.fontFamily,\n    viewProps,\n    style: styleState.style as any,\n    pseudos,\n    classNames,\n    rulesToInsert,\n    dynamicThemeAccess,\n    pseudoGroups,\n    mediaGroups,\n    overriddenContextProps: styleState.overriddenContextProps,\n    pseudoTransitions: styleState.pseudoTransitions,\n  }\n\n  const asChildExceptStyleLike =\n    asChild === 'except-style' || asChild === 'except-style-web'\n\n  if (!styleProps.noMergeStyle) {\n    if (!asChildExceptStyleLike) {\n      const style = styleState.style\n\n      if (process.env.TAMAGUI_TARGET === 'web') {\n        // merge className and style back into viewProps:\n        let fontFamily =\n          isText || isInput\n            ? styleState.fontFamily || staticConfig.defaultProps?.fontFamily\n            : null\n        if (fontFamily && fontFamily[0] === '$') {\n          fontFamily = fontFamily.slice(1)\n        }\n        const fontFamilyClassName = fontFamily ? `font_${fontFamily}` : ''\n        const groupClassName = props.group ? `t_group_${props.group}` : ''\n        const componentNameFinal = props.componentName || staticConfig.componentName\n        const componentClassName =\n          props.asChild || !componentNameFinal ? '' : `is_${componentNameFinal}`\n\n        let classList: string[] = []\n        if (componentClassName) classList.push(componentClassName)\n        if (fontFamilyClassName) classList.push(fontFamilyClassName)\n        if (classNames) classList.push(Object.values(classNames).join(' '))\n        if (groupClassName) classList.push(groupClassName)\n        if (props.className) classList.push(props.className)\n        const finalClassName = classList.join(' ')\n\n        if (styleProps.isAnimated && isReactNative) {\n          if (style) {\n            viewProps.style = style as any\n          }\n          if (animationDriver?.supportsCSS) {\n            viewProps.className = finalClassName\n          }\n        } else if (isReactNative) {\n          let cnStyles: Record<string, unknown> | undefined\n          for (const name of finalClassName.split(' ')) {\n            cnStyles ||= { $$css: true }\n            cnStyles[name] = name\n          }\n          viewProps.style = cnStyles\n            ? [...(Array.isArray(style) ? style : [style]), cnStyles]\n            : [style]\n        } else {\n          if (finalClassName) {\n            viewProps.className = finalClassName\n          }\n          if (style) {\n            viewProps.style = style as any\n          }\n        }\n      } else {\n        if (style) {\n          // native assign styles\n          viewProps.style = style as any\n        }\n      }\n    }\n  }\n\n  if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n    if (isClient && isDevTools) {\n      // end collapsed log above\n      console.groupEnd()\n\n      console.groupCollapsed('🔹 getSplitStyles ===>')\n      try {\n        // prettier-ignore\n        const logs = {\n          ...result,\n          className,\n          componentState,\n          viewProps,\n          rulesToInsert,\n          parentSplitStyles,\n        }\n        for (const key in logs) {\n          log(key, logs[key])\n        }\n      } catch {\n        // RN can run into PayloadTooLargeError: request entity too large\n      }\n      console.groupEnd()\n    }\n  }\n\n  if (process.env.NODE_ENV === 'development' && debug === 'profile') {\n    // @ts-expect-error\n    time`split-styles-done`\n  }\n\n  return result\n}\n\nfunction mergeFlatTransforms(target: TextStyle, flatTransforms: Record<string, any>) {\n  Object.entries(flatTransforms)\n    .sort(([a], [b]) => sortString(a, b))\n    .forEach(([key, val]) => {\n      mergeTransform(target, key, val, true)\n    })\n}\n\nfunction mergeStyle(\n  styleState: GetStyleState,\n  key: string,\n  val: any,\n  importance: number,\n  disableNormalize = false,\n  originalVal?: any\n) {\n  const { viewProps, styleProps, staticConfig, usedKeys } = styleState\n\n  const existingImportance = usedKeys[key] || 0\n  if (existingImportance > importance) {\n    return\n  }\n\n  // Track context overrides for pseudo/media styles (issues #3670, #3676)\n  // When a style sets a key that's in context props, update overriddenContextProps\n  // so it propagates to children. Use the original token value (like '$8')\n  // instead of the resolved CSS variable (like 'var(--t-space-8)')\n  // so children's functional variants can look up token values.\n  const contextProps =\n    staticConfig.context?.props || staticConfig.parentStaticConfig?.context?.props\n  if (contextProps && key in contextProps) {\n    styleState.overriddenContextProps ||= {}\n    // Priority: 1) originalVal from propMapper, 2) tracked original from variant resolution, 3) val\n    const originalFromState = styleState.originalContextPropValues?.[key]\n    styleState.overriddenContextProps[key] = originalVal ?? originalFromState ?? val\n  }\n\n  if (key in stylePropsTransform) {\n    styleState.flatTransforms ||= {}\n    usedKeys[key] = importance\n    styleState.flatTransforms[key] = val\n  } else {\n    const shouldNormalize = isWeb && !disableNormalize && !styleProps.noNormalize\n    const out = shouldNormalize ? normalizeValueWithProperty(val, key) : val\n    if (\n      // accept is for props not styles\n      staticConfig.accept &&\n      key in staticConfig.accept\n    ) {\n      viewProps[key] = out\n    } else {\n      styleState.style ||= {}\n      usedKeys[key] = importance\n      styleState.style[key] =\n        // if you dont do this you'll be passing props.transform arrays directly here and then mutating them\n        // if theres any flatTransforms later, causing issues (mutating props is bad, in strict mode styles get borked)\n        key === 'transform' && Array.isArray(out) ? [...out] : out\n    }\n  }\n}\n\nexport const getSubStyle = (\n  styleState: GetStyleState,\n  subKey: string,\n  styleIn: object,\n  avoidMergeTransform?: boolean\n): TextStyle => {\n  const { staticConfig, conf, styleProps } = styleState\n  const styleOut: TextStyle = {}\n  let originalValues: Record<string, any> | undefined\n\n  for (let key in styleIn) {\n    const val = styleIn[key]\n    key = conf.shorthands[key] || key\n\n    // extract transition from pseudo-style props (e.g., hoverStyle.transition)\n    // store it separately for animation drivers to use for enter/exit timing\n    if (key === 'transition') {\n      styleState.pseudoTransitions ||= {}\n      styleState.pseudoTransitions[subKey as keyof typeof styleState.pseudoTransitions] =\n        val\n      continue\n    }\n\n    const shouldSkip = !staticConfig.isHOC && key in skipProps && !styleProps.noSkip\n    if (shouldSkip) {\n      continue\n    }\n\n    propMapper(key, val, styleState, false, (skey, sval, originalVal) => {\n      // Track original values for context prop propagation\n      if (originalVal !== undefined) {\n        originalValues ||= {}\n        originalValues[skey] = originalVal\n      }\n      // pseudo inside media\n      if (skey in validPseudoKeys) {\n        sval = getSubStyle(styleState, skey, sval, avoidMergeTransform)\n      }\n      if (!avoidMergeTransform && skey in stylePropsTransform) {\n        mergeTransform(styleOut, skey, sval)\n      } else {\n        styleOut[skey] = styleProps.noNormalize\n          ? sval\n          : normalizeValueWithProperty(sval, key)\n      }\n    })\n  }\n\n  if (!avoidMergeTransform) {\n    const parentTransform = styleState.style?.transform\n    const flatTransforms = styleState.flatTransforms\n    const styleOutTransform = styleOut.transform\n\n    if (Array.isArray(styleOutTransform) && styleOutTransform.length) {\n      // Inline conflict check - faster than building lookup object for small arrays\n      const len = styleOutTransform.length\n\n      if (Array.isArray(parentTransform)) {\n        const merged: any[] = []\n        outer: for (let i = 0; i < parentTransform.length; i++) {\n          const pt = parentTransform[i]\n          for (const pk in pt) {\n            for (let j = 0; j < len; j++) {\n              for (const sk in styleOutTransform[j]) {\n                if (pk === sk) continue outer\n                break\n              }\n            }\n            merged.push(pt)\n            break\n          }\n        }\n        for (let i = 0; i < len; i++) merged.push(styleOutTransform[i])\n        styleOut.transform = merged\n      }\n\n      if (flatTransforms) {\n        outer: for (const fk in flatTransforms) {\n          const ck = fk === 'x' ? 'translateX' : fk === 'y' ? 'translateY' : fk\n          for (let j = 0; j < len; j++) {\n            for (const sk in styleOutTransform[j]) {\n              if (ck === sk) continue outer\n              break\n            }\n          }\n          mergeTransform(styleOut, fk, flatTransforms[fk])\n        }\n      }\n    } else if (flatTransforms) {\n      mergeFlatTransforms(styleOut, flatTransforms)\n    }\n  }\n\n  if (!styleProps.noNormalize) {\n    fixStyles(styleOut)\n  }\n\n  // Store original values in WeakMap instead of on the object itself\n  if (originalValues) {\n    styleOriginalValues.set(styleOut, originalValues)\n  }\n\n  return styleOut\n}\n\n// on native no need to insert any css\nconst useInsertEffectCompat = isWeb\n  ? React.useInsertionEffect || useIsomorphicLayoutEffect\n  : () => {}\n\n// perf: ...args a bit expensive on native\nexport const useSplitStyles: StyleSplitter = (a, b, c, d, e, f, g, h, i, j, k, l) => {\n  const res = getSplitStyles(a, b, c, d, e, f, g, h, i, j, k, l)\n\n  if (process.env.TAMAGUI_TARGET !== 'native') {\n    useInsertEffectCompat(() => {\n      if (res) {\n        insertStyleRules(res.rulesToInsert)\n      }\n    }, [res?.rulesToInsert])\n  }\n\n  return res\n}\n\nfunction addStyleToInsertRules(rulesToInsert: RulesToInsert, styleObject: StyleObject) {\n  if (process.env.TAMAGUI_TARGET === 'web') {\n    const identifier = styleObject[StyleObjectIdentifier]\n    if (shouldInsertStyleRules(identifier)) {\n      updateRules(identifier, styleObject[StyleObjectRules])\n      rulesToInsert[identifier] = styleObject\n    }\n  }\n}\n\nconst defaultColor = process.env.TAMAGUI_DEFAULT_COLOR || 'rgba(0,0,0,0)'\nconst animatableDefaults = {\n  ...Object.fromEntries(\n    Object.entries(tokenCategories.color).map(([k, v]) => [k, defaultColor])\n  ),\n  opacity: 1,\n  scale: 1,\n  scaleX: 1,\n  scaleY: 1,\n  rotate: '0deg',\n  rotateX: '0deg',\n  rotateY: '0deg',\n  rotateZ: '0deg',\n  skewX: '0deg',\n  skewY: '0deg',\n  x: 0,\n  y: 0,\n  borderRadius: 0,\n}\n\nconst mergeTransform = (obj: TextStyle, key: string, val: any, backwards = false) => {\n  if (typeof obj.transform === 'string') {\n    return\n  }\n  obj.transform ||= []\n  obj.transform[backwards ? 'unshift' : 'push']({\n    [mapTransformKeys[key] || key]: val,\n  } as any)\n}\n\nconst mapTransformKeys = {\n  x: 'translateX',\n  y: 'translateY',\n}\n\nfunction passDownProp(\n  viewProps: object,\n  key: string,\n  val: any,\n  shouldMergeObject = false\n) {\n  if (shouldMergeObject) {\n    const next = {\n      ...viewProps[key],\n      ...val,\n    }\n    // need to re-insert it at current position\n    delete viewProps[key]\n    viewProps[key] = next\n  } else {\n    viewProps[key] = val\n  }\n}\n\nfunction mergeMediaByImportance(\n  styleState: GetStyleState,\n  mediaKey: string,\n  key: string,\n  value: any,\n  isSizeMedia: boolean,\n  importanceBump?: number,\n  debugProp?: DebugProp,\n  originalVal?: any\n) {\n  const usedKeys = styleState.usedKeys\n  let importance = getMediaImportanceIfMoreImportant(\n    mediaKey,\n    key,\n    styleState,\n    isSizeMedia\n  )\n  if (importanceBump) {\n    importance = (importance || 0) + importanceBump\n  }\n  if (process.env.NODE_ENV === 'development' && debugProp === 'verbose') {\n    log(\n      `mergeMediaByImportance ${key} importance usedKey ${usedKeys[key]} next ${importance}`\n    )\n  }\n  if (importance === null) {\n    return false\n  }\n  if (key in pseudoDescriptors) {\n    const descriptor = pseudoDescriptors[key as PseudoDescriptorKey]\n    const descriptorKey = descriptor.stateKey || descriptor.name\n    const isDisabled = styleState.componentState[descriptorKey] === false\n    if (isDisabled) {\n      return false\n    }\n    // For pseudo inside media, value is an object with subkeys\n    const pseudoOriginalValues = styleOriginalValues.get(value as object)\n    for (const subKey in value) {\n      mergeStyle(\n        styleState,\n        subKey,\n        value[subKey],\n        importance,\n        false,\n        pseudoOriginalValues?.[subKey]\n      )\n    }\n  } else {\n    mergeStyle(styleState, key, value, importance, false, originalVal)\n  }\n\n  return true\n}\n\nfunction normalizeStyle(style: any) {\n  const out: Record<string, any> = {}\n  for (const key in style) {\n    const val = style[key]\n    if (key in stylePropsTransform) {\n      mergeTransform(out, key, val)\n    } else {\n      out[key] = normalizeValueWithProperty(val, key)\n    }\n  }\n  if (isWeb && Array.isArray(out.transform)) {\n    out.transform = transformsToString(out.transform)\n  }\n  fixStyles(out)\n  return out\n}\n\nfunction applyDefaultStyle(pkey: string, styleState: GetStyleState) {\n  const defaultValues = animatableDefaults[pkey]\n  if (\n    defaultValues != null &&\n    !(pkey in styleState.usedKeys) &&\n    (!styleState.style || !(pkey in styleState.style))\n  ) {\n    mergeStyle(styleState, pkey, defaultValues, 1)\n  }\n}\n","export const defaultOffset = { height: 0, width: 0 }\n","import { defaultOffset } from './defaultOffset'\n\nexport function normalizeShadow({\n  shadowColor,\n  shadowOffset,\n  shadowOpacity,\n  shadowRadius,\n}: Record<string, any>) {\n  const { height, width } = shadowOffset || defaultOffset\n  return {\n    shadowOffset: {\n      width: width || 0,\n      height: height || 0,\n    },\n    shadowRadius: shadowRadius || 0,\n    // pass color through as-is, opacity applied via color-mix in getCSSStylesAtomic\n    shadowColor: shadowColor,\n    // default to 1 if not specified (color-mix will handle the opacity)\n    shadowOpacity: shadowOpacity ?? 1,\n  }\n}\n","import { isWeb } from '@tamagui/constants'\nimport { normalizeShadow } from './normalizeShadow'\n\nexport function fixStyles(style: Record<string, any>) {\n  if (process.env.TAMAGUI_TARGET === 'native') {\n    if ('elevationAndroid' in style) {\n      // @ts-ignore\n      style['elevation'] = style.elevationAndroid\n      // @ts-ignore\n      delete style.elevationAndroid\n    }\n  }\n\n  // TODO deprecate for web-style shadows\n  if (\n    style.shadowRadius != null ||\n    style.shadowColor ||\n    style.shadowOpacity != null ||\n    style.shadowOffset\n  ) {\n    Object.assign(style, normalizeShadow(style))\n  }\n\n  // could be optimized better\n  // ensure border style set by default to solid\n  for (const key in borderDefaults) {\n    if (key in style) {\n      style[borderDefaults[key]] ||= 'solid'\n    }\n  }\n}\n\n// native doesn't support specific border edge style\nconst nativeStyle = isWeb ? null : 'borderStyle'\nconst borderDefaults = {\n  borderWidth: 'borderStyle',\n  borderBottomWidth: nativeStyle || 'borderBottomStyle',\n  borderTopWidth: nativeStyle || 'borderTopStyle',\n  borderLeftWidth: nativeStyle || 'borderLeftStyle',\n  borderRightWidth: nativeStyle || 'borderRightStyle',\n  // TODO: need to add borderBlock and borderInline here, but they are alot and might impact performance\n}\n","// web-only: use color-mix for opacity, no parsing needed\n// browsers handle named colors, hex, rgb, hsl natively\n\nexport const normalizeColor = (color?: string | null, opacity?: number) => {\n  if (!color) return\n  // handle dynamic color objects (from $theme-dark/$theme-light)\n  if (typeof color !== 'string') return color\n\n  // convert \"transparent\" to rgba for animation compatibility (motion.dev requires rgba)\n  if (color === 'transparent') {\n    return 'rgba(0, 0, 0, 0)'\n  }\n\n  // apply opacity via color-mix (widely supported: Chrome 111+, Safari 16.2+, Firefox 113+)\n  if (typeof opacity === 'number' && opacity < 1) {\n    return `color-mix(in srgb, ${color} ${Math.round(opacity * 100)}%, transparent)`\n  }\n\n  return color\n}\n\n// stub for native compat - native uses normalizeColor.native.ts which has real impl\nexport const getRgba = (\n  _color: string\n): { r: number; g: number; b: number; a: number } | undefined => undefined\n","/**\n * Some parts adapted from react-native-web\n * Copyright (c) Nicolas Gallagher licensed under the MIT license.\n */\n\nimport { isWeb } from '@tamagui/constants'\nimport { stylePropsAll, stylePropsUnitless } from '@tamagui/helpers'\n\n// only doing this on web on native it accepts pixel values\n\nconst stylePropsAllPlusTransforms = {\n  ...stylePropsAll,\n  translateX: true,\n  translateY: true,\n}\n\nexport function normalizeValueWithProperty(value: any, property = ''): any {\n  if (!isWeb) return value\n  if (\n    stylePropsUnitless[property] ||\n    (property && !stylePropsAllPlusTransforms[property]) ||\n    typeof value === 'boolean'\n  ) {\n    return value\n  }\n  if (value && typeof value === 'object') {\n    if (typeof value.__getValue === 'function') {\n      // resolve Animated.Value objects\n      value = value.__getValue()\n    } else {\n      return value\n    }\n  }\n  let res = value\n  if (typeof value === 'number') {\n    res = `${value}px`\n  } else if (property) {\n    res = `${res}`\n  }\n  return res\n}\n","import { normalizeValueWithProperty } from './normalizeValueWithProperty'\n\nexport function transformsToString(transforms: object[]) {\n  return transforms\n    .map(\n      // { scale: 2 } => 'scale(2)'\n      // { translateX: 20 } => 'translateX(20px)'\n      // { matrix: [1,2,3,4,5,6] } => 'matrix(1,2,3,4,5,6)'\n      // { perspective: 1000 } => perspective(1000px)\n      (transform) => {\n        const type = Object.keys(transform)[0]\n        const value = transform[type]\n        if (type === 'matrix' || type === 'matrix3d') {\n          return `${type}(${value.join(',')})`\n        }\n        return `${type}(${normalizeValueWithProperty(value, type)})`\n      }\n    )\n    .join(' ')\n}\n","/**\n * Some parts adapted from react-native-web\n * Copyright (c) Nicolas Gallagher licensed under the MIT license.\n */\n\nimport type { StyleObject } from '@tamagui/helpers'\nimport { cssShorthandLonghands, simpleHash } from '@tamagui/helpers'\nimport { getConfigMaybe } from '../config'\nimport { isMediaKey } from '../hooks/useMedia'\nimport type { TamaguiInternalConfig, ViewStyleWithPseudos } from '../types'\nimport { defaultOffset } from './defaultOffset'\nimport { normalizeColor } from './normalizeColor'\nimport { normalizeValueWithProperty } from './normalizeValueWithProperty'\nimport type { PseudoDescriptor } from './pseudoDescriptors'\nimport { pseudoDescriptors } from './pseudoDescriptors'\nimport { transformsToString } from './transformsToString'\n\n// refactor this file away next...\n\nexport function getCSSStylesAtomic(style: ViewStyleWithPseudos) {\n  styleToCSS(style)\n  const out: StyleObject[] = []\n  for (const key in style) {\n    if (key === '$$css') continue\n    const val = style[key]\n    if (key in pseudoDescriptors) {\n      if (val) {\n        out.push(...getStyleAtomic(val, pseudoDescriptors[key]))\n      }\n    } else if (isMediaKey(key)) {\n      for (const subKey in val) {\n        const so = getStyleObject(val, subKey)\n        if (so) {\n          so[0] = key // set the property to be eg $platform-web so we can use it above\n          out.push(so)\n        }\n      }\n    } else {\n      const so = getStyleObject(style, key)\n      if (so) {\n        out.push(so)\n      }\n    }\n  }\n  return out\n}\n\nexport const getStyleAtomic = (\n  style: ViewStyleWithPseudos,\n  pseudo?: PseudoDescriptor\n): StyleObject[] => {\n  styleToCSS(style)\n  const out: StyleObject[] = []\n  for (const key in style) {\n    const so = getStyleObject(style, key, pseudo)\n    if (so) {\n      out.push(so)\n    }\n  }\n  return out\n}\n\nlet conf: TamaguiInternalConfig | null = null\n\n// this could be cached for performance?\nconst getStyleObject = (\n  style: ViewStyleWithPseudos,\n  key: string,\n  pseudo?: PseudoDescriptor\n): StyleObject | undefined => {\n  let val = style[key]\n  if (val == null) return\n  // transform\n  if (key === 'transform' && Array.isArray(style.transform)) {\n    val = transformsToString(val)\n  }\n  const value = normalizeValueWithProperty(val, key)\n  const hash = simpleHash(typeof value === 'string' ? value : `${value}`)\n  const pseudoPrefix = pseudo ? `0${pseudo.name}-` : ''\n  conf ||= getConfigMaybe()\n  const shortProp = conf?.inverseShorthands[key] || key\n  const identifier = `_${shortProp}-${pseudoPrefix}${hash}`\n  const rules = createAtomicRules(identifier, key, value, pseudo)\n  return [\n    // array for performance\n    key,\n    value,\n    identifier,\n    pseudo?.name as any,\n    rules,\n  ]\n}\n\nexport function styleToCSS(style: Record<string, any>) {\n  // box-shadow\n  const { shadowOffset, shadowRadius, shadowColor, shadowOpacity } = style\n  if (\n    shadowRadius != null ||\n    shadowColor ||\n    shadowOffset != null ||\n    shadowOpacity != null\n  ) {\n    const offset = shadowOffset || defaultOffset\n    const width = normalizeValueWithProperty(offset.width)\n    const height = normalizeValueWithProperty(offset.height)\n    const radius = normalizeValueWithProperty(shadowRadius)\n    const color = normalizeColor(shadowColor, shadowOpacity)\n    if (color) {\n      const shadow = `${width} ${height} ${radius} ${color}`\n      style.boxShadow = style.boxShadow ? `${style.boxShadow}, ${shadow}` : shadow\n    }\n    delete style.shadowOffset\n    delete style.shadowRadius\n    delete style.shadowColor\n    delete style.shadowOpacity\n  }\n\n  // text-shadow\n  const { textShadowColor, textShadowOffset, textShadowRadius } = style\n  if (textShadowColor || textShadowOffset || textShadowRadius) {\n    const { height, width } = textShadowOffset || defaultOffset\n    const radius = textShadowRadius || 0\n    const color = normalizeValueWithProperty(textShadowColor, 'textShadowColor')\n    if (color && (height !== 0 || width !== 0 || radius !== 0)) {\n      const blurRadius = normalizeValueWithProperty(radius)\n      const offsetX = normalizeValueWithProperty(width)\n      const offsetY = normalizeValueWithProperty(height)\n      style.textShadow = `${offsetX} ${offsetY} ${blurRadius} ${color}`\n    }\n    delete style.textShadowColor\n    delete style.textShadowOffset\n    delete style.textShadowRadius\n  }\n}\n\nfunction createDeclarationBlock(style: [string, any][], important = false) {\n  let next = ''\n  for (const [key, value] of style) {\n    next += `${hyphenateStyleName(key)}:${value}${important ? ' !important' : ''};`\n  }\n  return `{${next}}`\n}\n\nconst hcache = {}\nconst toHyphenLower = (match: string) => `-${match.toLowerCase()}`\nconst hyphenateStyleName = (key: string) => {\n  if (key in hcache) return hcache[key]\n  const val = key.replace(/[A-Z]/g, toHyphenLower)\n  hcache[key] = val\n  return val\n}\n\n// adding one more :root so we always override react native web styles :/\nconst selectorPriority = (() => {\n  const res: Record<string, string> = {}\n  for (const key in pseudoDescriptors) {\n    const pseudo = pseudoDescriptors[key]\n    res[pseudo.name] = `${[...Array(pseudo.priority)].map(() => ':root').join('')} `\n  }\n  return res\n})()\n\nfunction createAtomicRules(\n  identifier: string,\n  property: string,\n  value: any,\n  pseudo?: PseudoDescriptor\n): string[] {\n  const pseudoIdPostfix = pseudo\n    ? pseudo.name === 'disabled'\n      ? `[aria-disabled]`\n      : `:${pseudo.name}`\n    : ''\n  const pseudoSelector = pseudo?.selector\n\n  // longhands get .cls.cls for higher specificity over shorthands\n  const cls =\n    property in cssShorthandLonghands ? `.${identifier}.${identifier}` : `.${identifier}`\n\n  let selector = pseudo\n    ? pseudoSelector\n      ? `${pseudoSelector} ${cls}`\n      : `${selectorPriority[pseudo.name]} ${cls}${pseudoIdPostfix}`\n    : `:root ${cls}`\n\n  // enter style on css driver needs both:\n  //   .t_unmounted .selector\n  //   .selector.t_unmounted\n  if (pseudoSelector === pseudoDescriptors.enterStyle.selector) {\n    selector = `${selector}, .${identifier}${pseudoSelector}`\n  }\n\n  const important = !!pseudo\n\n  let rules: string[] = []\n\n  // Handle non-standard properties and object values that require multiple\n  // CSS rules to be created.\n  switch (property) {\n    // Equivalent to using '::placeholder'\n    case 'placeholderTextColor': {\n      const block = createDeclarationBlock(\n        [\n          ['color', value],\n          ['opacity', 1],\n        ],\n        important\n      )\n      rules.push(`${selector}::placeholder${block}`)\n      break\n    }\n\n    // all webkit prefixed rules\n    case 'backgroundClip':\n    case 'userSelect': {\n      const propertyCapitalized = `${property[0].toUpperCase()}${property.slice(1)}`\n      const webkitProperty = `Webkit${propertyCapitalized}`\n      const block = createDeclarationBlock(\n        [\n          [property, value],\n          [webkitProperty, value],\n        ],\n        important\n      )\n      rules.push(`${selector}${block}`)\n      break\n    }\n\n    // Polyfill for additional 'pointer-events' values\n    case 'pointerEvents': {\n      let finalValue = value\n      if (value === 'auto' || value === 'box-only') {\n        finalValue = 'auto'\n        if (value === 'box-only') {\n          rules.push(`${selector}>*${boxOnly}`)\n        }\n      } else if (value === 'none' || value === 'box-none') {\n        finalValue = 'none'\n        if (value === 'box-none') {\n          rules.push(`${selector}>*${boxNone}`)\n        }\n      }\n      const block = createDeclarationBlock([['pointerEvents', finalValue]], true)\n      rules.push(`${selector}${block}`)\n      break\n    }\n\n    default: {\n      const block = createDeclarationBlock([[property, value]], important)\n      rules.push(`${selector}${block}`)\n      break\n    }\n  }\n\n  // hover styles need to be conditional\n  // perhaps this can be generalized but for now lets just shortcut\n  // and hardcode for hover styles, if we need to later we can\n  // WEIRD SYNTAX, SEE:\n  //   https://stackoverflow.com/questions/40532204/media-query-for-devices-supporting-hover\n  if (pseudo?.name === 'hover') {\n    rules = rules.map((r) => `@media (hover) {${r}}`)\n  }\n\n  return rules\n}\n\nconst boxNone = createDeclarationBlock([['pointerEvents', 'auto']], true)\nconst boxOnly = createDeclarationBlock([['pointerEvents', 'none']], true)\n","import { StyleObjectIdentifier, StyleObjectRules } from '@tamagui/helpers'\nimport { createVariable } from '../createVariable'\nimport type {\n  DedupedTheme,\n  DedupedThemes,\n  RulesToInsert,\n  ThemeParsed,\n  TokensParsed,\n} from '../types'\n\n// only cache tamagui styles\n// TODO merge totalSelectorsInserted and allSelectors?\nconst scannedCache = new WeakMap<CSSStyleSheet, string>()\nconst totalSelectorsInserted = new Map<string, number>()\nconst allSelectors: Record<string, string> = {}\nconst allRules: Record<string, string> = {}\n\nexport const getAllSelectors = () => allSelectors\nexport const getAllRules = () => {\n  if (!process.env.TAMAGUI_DID_OUTPUT_CSS) {\n    // Sort by identifier to ensure deterministic CSS output order\n    const sortedKeys = Object.keys(allRules).sort()\n    return sortedKeys.map((key) => allRules[key])\n  }\n  return []\n}\n\n// once react 19 onyl supported we can remove most of this\n// gets existing ones (client side)\n// takes ~0.1ms for a fairly large page\n// used now for three things:\n//   1. debugging at dev time\n//   2. avoid duplicate insert styles at runtime\n//   3. used now for merging transforms atomically\n\n// multiple sheets could have the same ids so we have to count\n\nlet lastScannedSheets: Set<CSSStyleSheet> | null = null\n\nexport function scanAllSheets(\n  collectThemes = false,\n  tokens?: TokensParsed\n): DedupedThemes | undefined {\n  if (!process.env.TAMAGUI_DID_OUTPUT_CSS) {\n    if (process.env.NODE_ENV === 'test') return\n    if (process.env.TAMAGUI_TARGET !== 'web') return\n\n    let themes: DedupedThemes | undefined\n\n    const sheets = document.styleSheets || []\n    const prev = lastScannedSheets\n    const current = new Set(sheets as any as CSSStyleSheet[])\n\n    for (const sheet of current) {\n      if (sheet) {\n        const out = updateSheetStyles(sheet, false, collectThemes, tokens)\n        if (out) {\n          themes = out\n        }\n      }\n    }\n\n    lastScannedSheets = current\n\n    if (prev) {\n      for (const sheet of prev) {\n        if (sheet && !current.has(sheet)) {\n          updateSheetStyles(sheet, true)\n        }\n      }\n    }\n\n    return themes\n  }\n}\n\nfunction trackInsertedStyle(id: string) {\n  const next = (totalSelectorsInserted.get(id) || 0) + 1\n  totalSelectorsInserted.set(id, next)\n  return next\n}\n\nconst bailAfterEnv = process.env.TAMAGUI_BAIL_AFTER_SCANNING_X_CSS_RULES\nconst bailAfter = bailAfterEnv ? +bailAfterEnv : 400\n\nfunction updateSheetStyles(\n  sheet: CSSStyleSheet,\n  remove = false,\n  collectThemes = false,\n  tokens?: TokensParsed\n): DedupedThemes | undefined {\n  // avoid errors on cross origin sheets\n  // https://stackoverflow.com/questions/49993633/uncaught-domexception-failed-to-read-the-cssrules-property\n  let rules: CSSRuleList\n  try {\n    rules = sheet.cssRules\n    if (!rules) {\n      return\n    }\n  } catch {\n    return\n  }\n\n  const firstSelector = getTamaguiSelector(rules[0], collectThemes)?.[0]\n  const lastSelector = getTamaguiSelector(rules[rules.length - 1], collectThemes)?.[0]\n  const cacheKey = `${rules.length}${firstSelector}${lastSelector}`\n  const lastScanned = scannedCache.get(sheet)\n\n  if (!remove) {\n    // avoid re-scanning\n    if (lastScanned === cacheKey) {\n      return\n    }\n  }\n\n  const len = rules.length\n  let fails = 0\n\n  let dedupedThemes: DedupedThemes | undefined\n\n  // because end-users can add their own css like .t_dark { --something: #000 }\n  // and this actually entirely breaks scanning, we need to ensure we can handle multiple\n  // themes, so track that here. also, css processing utils could cause this too\n  const nameToTheme: Record<string, ThemeParsed> = {}\n\n  for (let i = 0; i < len; i++) {\n    const rule = rules[i]\n    if (!(rule instanceof CSSStyleRule)) continue\n\n    const response = getTamaguiSelector(rule, collectThemes)\n\n    if (response) {\n      // reset to 0 on any success as eg every other theme scan we get empty\n      fails = 0\n    } else {\n      fails++\n      if (fails > bailAfter) {\n        // conservatively bail out of non-tamagui sheets\n        return\n      }\n      continue\n    }\n\n    const [identifier, cssRule, isTheme] = response\n\n    if (isTheme) {\n      const deduped = addThemesFromCSS(cssRule, tokens)\n      if (deduped) {\n        for (const name of deduped.names) {\n          if (nameToTheme[name]) {\n            Object.apply(nameToTheme[name], deduped.theme as any)\n            deduped.names = deduped.names.filter((x) => x !== name)\n          } else {\n            nameToTheme[name] = deduped.theme\n          }\n        }\n        dedupedThemes ||= []\n        dedupedThemes.push(deduped)\n      }\n      continue\n    }\n  }\n\n  scannedCache.set(sheet, cacheKey)\n\n  return dedupedThemes\n}\n\nlet colorVarToVal: Record<string, string>\nlet rootComputedStyle: CSSStyleDeclaration | null = null\n\nfunction addThemesFromCSS(cssStyleRule: CSSStyleRule, tokens?: TokensParsed) {\n  const selectors = cssStyleRule.selectorText.split(',')\n  if (!selectors.length) return\n\n  if (tokens?.color && !colorVarToVal) {\n    colorVarToVal = {}\n    for (const key in tokens.color) {\n      const token = tokens.color[key]\n      if (token) {\n        colorVarToVal[token.name] = token.val\n      }\n    }\n  }\n\n  const rulesWithBraces = (cssStyleRule.cssText || '').slice(\n    cssStyleRule.selectorText.length + 2,\n    -1\n  )\n\n  const rules = rulesWithBraces.split(';')\n\n  // get theme object parsed\n  const values: ThemeParsed = {}\n  // build values first\n  for (const rule of rules) {\n    const sepI = rule.indexOf(':')\n    if (sepI === -1) continue\n    const varIndex = rule.indexOf('--')\n    let key = rule.slice(varIndex === -1 ? 0 : varIndex + 2, sepI)\n    if (process.env.TAMAGUI_CSS_VARIABLE_PREFIX) {\n      key = key.replace(process.env.TAMAGUI_CSS_VARIABLE_PREFIX, '')\n    }\n    const val = rule.slice(sepI + 2)\n    let value: string\n    if (val[0] === 'v' && val.startsWith('var(')) {\n      // var()\n      const varName = val.slice(6, -1)\n      const tokenVal = colorVarToVal?.[varName]\n      // either hydrate it from tokens directly or from computed style on body if no token\n      if (tokenVal) {\n        value = tokenVal\n      } else {\n        rootComputedStyle ||= getComputedStyle(document.body)\n        value = rootComputedStyle.getPropertyValue('--' + varName)\n      }\n    } else {\n      value = val\n    }\n    values[key] = createVariable(\n      {\n        key,\n        name: key,\n        val: value,\n      },\n      true\n    ) as any\n  }\n\n  const names = new Set<string>()\n\n  // loop selectors and build deduped\n  for (const selector of selectors) {\n    if (selector === ' .tm_xxt') continue\n    const lastThemeSelectorIndex = selector.lastIndexOf('.t_')\n    const name = selector.slice(lastThemeSelectorIndex).slice(3)\n    const [schemeChar] = selector[lastThemeSelectorIndex - 5]\n    const scheme = schemeChar === 'd' ? 'dark' : schemeChar === 'i' ? 'light' : ''\n    const themeName = scheme && scheme !== name ? `${scheme}_${name}` : name\n    if (!themeName || themeName === 'light_dark' || themeName === 'dark_light') {\n      continue\n    }\n    names.add(themeName)\n  }\n\n  return {\n    names: [...names],\n    theme: values,\n  } satisfies DedupedTheme\n}\n\nconst tamaguiSelectorRegex = /\\.tm_xxt/\n\nfunction getTamaguiSelector(\n  rule: CSSRule | null,\n  collectThemes = false\n): readonly [string, CSSStyleRule] | [string, CSSStyleRule, true] | undefined {\n  if (rule instanceof CSSStyleRule) {\n    const text = rule.selectorText\n\n    // only matches t_ starting selector chains\n    if (text[0] === ':' && text[1] === 'r' && tamaguiSelectorRegex.test(text)) {\n      const id = getIdentifierFromTamaguiSelector(\n        // next.js minifies it so its in front\n        text.replace(tamaguiSelectorRegex, '')\n      )\n      return collectThemes ? [id, rule, true] : [id, rule]\n    }\n  } else if (rule instanceof CSSMediaRule) {\n    // tamagui only ever inserts 1 rule per media\n    if (rule.cssRules.length > 1) return\n    return getTamaguiSelector(rule.cssRules[0])\n  }\n}\n\nconst getIdentifierFromTamaguiSelector = (selector: string) => {\n  const dotIndex = selector.indexOf(':')\n  if (dotIndex > -1) {\n    return selector.slice(7, dotIndex)\n  }\n  return selector.slice(7)\n}\n\nlet sheet: CSSStyleSheet | null = null\n\nlet trackAllRules = true\nexport function stopAccumulatingRules() {\n  trackAllRules = false\n}\n\nexport function updateRules(identifier: string, rules: string[]) {\n  if (trackAllRules) {\n    allRules[identifier] = rules.join(' ')\n  }\n  return true\n}\n\nlet nonce = ''\nexport function setNonce(_: string) {\n  nonce = _\n}\n\nexport function insertStyleRules(rulesToInsert: RulesToInsert) {\n  if (process.env.TAMAGUI_TARGET !== 'web') return\n\n  if (!sheet && document.head) {\n    const styleTag = document.createElement('style')\n    styleTag.id = '_tamagui-styles'\n    if (nonce) {\n      styleTag.nonce = nonce\n    }\n    sheet = document.head.appendChild(styleTag).sheet\n  }\n\n  if (!sheet) return\n\n  for (const key in rulesToInsert) {\n    const styleObject = rulesToInsert[key]\n    const identifier = styleObject[StyleObjectIdentifier]\n\n    if (!shouldInsertStyleRules(identifier)) {\n      continue\n    }\n\n    const rules = styleObject[StyleObjectRules]\n    allSelectors[identifier] = rules.join('\\n')\n    trackInsertedStyle(identifier)\n    updateRules(identifier, rules)\n\n    try {\n      for (const rule of rules) {\n        sheet.insertRule(rule, sheet.cssRules.length)\n      }\n    } catch (err) {\n      if (process.env.NODE_ENV === 'production') {\n        console.error(`Error inserting style rule`, rules)\n      }\n      // in dev throw to show error clearly\n    }\n  }\n}\n\n// The way browser or next.js work you end up with CSS being removed *after* the new CSS loads for the upcoming page\n// this causes many bugs. We defaulted to \"2\" here for safety, meaning we sacrificed some performance\n// setting TAMAGUI_INSERT_SELECTOR_TRIES=1 will be faster so long as you are concatting your CSS together\n\nconst maxToInsert = process.env.TAMAGUI_INSERT_SELECTOR_TRIES\n  ? +process.env.TAMAGUI_INSERT_SELECTOR_TRIES\n  : 1\n\nexport function shouldInsertStyleRules(identifier: string) {\n  if (process.env.IS_STATIC === 'is_static') {\n    return true\n  }\n  const total = totalSelectorsInserted.get(identifier) || 0\n  if (process.env.NODE_ENV === 'development') {\n    if (total > +(process.env.TAMAGUI_STYLE_INSERTION_WARNING_LIMIT || 10)) {\n      console.warn(\n        `Warning: inserting many CSS rules, you may be animating something and generating many CSS insertions, which can degrade performance. Instead, try using the \"disableClassName\" property on elements that change styles often. To disable this warning set TAMAGUI_STYLE_INSERTION_WARNING_LIMIT from 50000 to something higher`\n      )\n    }\n  }\n  // note we are being conservative allowing duplicates\n  return total < maxToInsert\n}\n","import { currentPlatform } from '@tamagui/constants'\n\nexport function isActivePlatform(key: string) {\n  if (!key.startsWith('$platform')) {\n    return true\n  }\n  const platform = key.slice(10)\n  return (\n    // web, ios, android\n    platform === currentPlatform ||\n    // web, native\n    platform === process.env.TAMAGUI_TARGET\n  )\n}\n","export function isActiveTheme(key: string, activeThemeName: string) {\n  if (!key.startsWith('$theme-')) return\n  return key.slice(7).startsWith(activeThemeName)\n}\n","import { _disableMediaTouch } from '../hooks/useMedia'\n\nexport function log(...args: any[]) {\n  if (process.env.NODE_ENV === 'production') return\n  _disableMediaTouch(true)\n  try {\n    if (process.env.TAMAGUI_TARGET === 'web') {\n      return console.info(...args)\n    }\n    // react native doesn't log in the cli unless it's log\n    return console.log(...args)\n  } catch (err) {\n    console.error(err)\n  } finally {\n    _disableMediaTouch(false)\n  }\n}\n","/**\n * Some parts adapted from react-native-web\n * Copyright (c) Nicolas Gallagher licensed under the MIT license.\n */\n\nimport { isAndroid, isWeb } from '@tamagui/constants'\n\nimport { getSetting } from '../config'\nimport type { PropMappedValue } from '../types'\nimport { parseBorderShorthand } from './parseBorderShorthand'\nimport { parseOutlineShorthand } from './parseOutlineShorthand'\n\nconst neg1Flex = [\n  ['flexGrow', 0],\n  ['flexShrink', 1],\n  ['flexBasis', 'auto'],\n] satisfies PropMappedValue\n\nexport function expandStyle(key: string, value: any): PropMappedValue {\n  if (process.env.TAMAGUI_TARGET === 'web') {\n    if (key === 'flex') {\n      if (value === -1) {\n        return neg1Flex\n      }\n      return [\n        ['flexGrow', value],\n        ['flexShrink', 1],\n        ['flexBasis', getSetting('styleCompat') === 'legacy' ? 'auto' : 0],\n      ]\n    }\n\n    switch (key) {\n      case 'writingDirection': {\n        return [['direction', value]]\n      }\n      // some safari-based browsers seem not to support without -webkit prefix\n      case 'backdropFilter': {\n        return [\n          ['backdropFilter', value],\n          ['WebkitBackdropFilter', value],\n        ]\n      }\n    }\n  }\n\n  if (process.env.TAMAGUI_TARGET === 'native') {\n    if (isAndroid && key === 'elevationAndroid') {\n      return [['elevation', value]]\n    }\n\n    // native-only value transforms\n    switch (key) {\n      case 'objectFit': {\n        const resizeMode = resizeModeMap[value] || 'cover'\n        return [['resizeMode', resizeMode]]\n      }\n      case 'verticalAlign': {\n        return [['textAlignVertical', verticalAlignMap[value] || 'auto']]\n      }\n      case 'position': {\n        // position: fixed|sticky -> absolute on native\n        if (value === 'fixed' || value === 'sticky') {\n          return [['position', 'absolute']]\n        }\n        return\n      }\n      case 'backgroundImage': {\n        // RN 0.76+ uses experimental_backgroundImage\n        // value may be a parsed array (from parseNativeStyle) or a plain string\n        return [['experimental_backgroundImage', value]]\n      }\n      case 'border': {\n        // parse border shorthand string to individual properties\n        // on native, only supports a single border (all sides)\n        if (typeof value === 'string') {\n          const parsed = parseBorderShorthand(value)\n          if (parsed) {\n            return parsed\n          }\n        }\n        return\n      }\n      case 'outline': {\n        if (typeof value === 'string') {\n          const parsed = parseOutlineShorthand(value)\n          if (parsed) {\n            return parsed\n          }\n        }\n        return\n      }\n    }\n\n    // native-only key expansions (logical properties)\n    if (key in nativeExpansions) {\n      return nativeExpansions[key].map((k) => [k, value])\n    }\n  }\n\n  if (key in EXPANSIONS) {\n    return EXPANSIONS[key].map((k) => [k, value])\n  }\n}\n\n// native value transforms\nconst resizeModeMap: Record<string, string> = {\n  fill: 'stretch',\n  none: 'center',\n  'scale-down': 'contain',\n  contain: 'contain',\n  cover: 'cover',\n}\n\nconst verticalAlignMap: Record<string, string> = {\n  top: 'top',\n  middle: 'center',\n  bottom: 'bottom',\n  auto: 'auto',\n}\n\n// shared expansions\nconst all = ['Top', 'Right', 'Bottom', 'Left']\nconst horiz = ['Right', 'Left']\nconst vert = ['Top', 'Bottom']\nconst xy = ['X', 'Y']\n\nconst EXPANSIONS: Record<string, string[]> = {\n  borderColor: ['TopColor', 'RightColor', 'BottomColor', 'LeftColor'],\n  borderRadius: [\n    'TopLeftRadius',\n    'TopRightRadius',\n    'BottomRightRadius',\n    'BottomLeftRadius',\n  ],\n  borderWidth: ['TopWidth', 'RightWidth', 'BottomWidth', 'LeftWidth'],\n  margin: all,\n  marginHorizontal: horiz,\n  marginVertical: vert,\n  padding: all,\n  paddingHorizontal: horiz,\n  paddingVertical: vert,\n  ...(isWeb && {\n    // react-native only supports borderStyle\n    borderStyle: ['TopStyle', 'RightStyle', 'BottomStyle', 'LeftStyle'],\n    // react-native doesn't support X / Y\n    overflow: xy,\n    overscrollBehavior: xy,\n  }),\n}\n\nfor (const parent in EXPANSIONS) {\n  const prefix = parent.slice(0, /[A-Z]/.exec(parent)?.index ?? parent.length)\n  EXPANSIONS[parent] = EXPANSIONS[parent].map((k) => `${prefix}${k}`)\n}\n\n// native-only expansions (logical properties not supported in RN)\nconst nativeExpansions: Record<string, string[]> = {\n  // logical border properties\n  borderBlockColor: ['borderTopColor', 'borderBottomColor'],\n  borderInlineColor: ['borderEndColor', 'borderStartColor'],\n  borderBlockWidth: ['borderTopWidth', 'borderBottomWidth'],\n  borderInlineWidth: ['borderEndWidth', 'borderStartWidth'],\n  borderBlockStyle: ['borderTopStyle', 'borderBottomStyle'],\n  borderInlineStyle: ['borderEndStyle', 'borderStartStyle'],\n  borderBlockStartColor: ['borderTopColor'],\n  borderBlockEndColor: ['borderBottomColor'],\n  borderInlineStartColor: ['borderStartColor'],\n  borderInlineEndColor: ['borderEndColor'],\n  borderBlockStartWidth: ['borderTopWidth'],\n  borderBlockEndWidth: ['borderBottomWidth'],\n  borderInlineStartWidth: ['borderStartWidth'],\n  borderInlineEndWidth: ['borderEndWidth'],\n  borderBlockStartStyle: ['borderTopStyle'],\n  borderBlockEndStyle: ['borderBottomStyle'],\n  borderInlineStartStyle: ['borderStartStyle'],\n  borderInlineEndStyle: ['borderEndStyle'],\n  // logical margin/padding\n  marginBlock: ['marginTop', 'marginBottom'],\n  marginInline: ['marginEnd', 'marginStart'],\n  paddingBlock: ['paddingTop', 'paddingBottom'],\n  paddingInline: ['paddingEnd', 'paddingStart'],\n  marginBlockStart: ['marginTop'],\n  marginBlockEnd: ['marginBottom'],\n  marginInlineStart: ['marginStart'],\n  marginInlineEnd: ['marginEnd'],\n  paddingBlockStart: ['paddingTop'],\n  paddingBlockEnd: ['paddingBottom'],\n  paddingInlineStart: ['paddingStart'],\n  paddingInlineEnd: ['paddingEnd'],\n  // logical sizing\n  minBlockSize: ['minHeight'],\n  maxBlockSize: ['maxHeight'],\n  minInlineSize: ['minWidth'],\n  maxInlineSize: ['maxWidth'],\n  blockSize: ['height'],\n  inlineSize: ['width'],\n  // inset\n  inset: ['top', 'right', 'bottom', 'left'],\n  insetBlock: ['top', 'bottom'],\n  insetBlockStart: ['top'],\n  insetBlockEnd: ['bottom'],\n  insetInlineStart: ['left'],\n  insetInlineEnd: ['right'],\n}\n","import { getSetting } from '../config'\nimport { getVariableValue } from '../createVariable'\nimport type { GenericFonts, GetStyleState, LanguageContextType } from '../types'\n\nconst cache = new WeakMap()\n\nexport const getVariantExtras = (styleState: GetStyleState) => {\n  if (cache.has(styleState)) {\n    return cache.get(styleState)\n  }\n\n  const { props, conf, context, theme, styleProps } = styleState\n  const styledContext = styleProps.styledContext\n  let fonts = conf.fontsParsed\n  if (context?.language) {\n    fonts = getFontsForLanguage(conf.fontsParsed, context.language)\n  }\n\n  const next = {\n    fonts,\n    tokens: conf.tokensParsed,\n    theme,\n    context: styledContext,\n    get fontFamily() {\n      return (\n        getVariableValue(styleState.fontFamily || styleState.props.fontFamily) ||\n        props.fontFamily ||\n        getVariableValue(getSetting('defaultFont'))\n      )\n    },\n    get font() {\n      return (\n        fonts[this.fontFamily] ||\n        (!props.fontFamily || props.fontFamily[0] === '$'\n          ? fonts[getSetting('defaultFont') || '']\n          : undefined)\n      )\n    },\n    props,\n  }\n\n  cache.set(styleState, next)\n\n  return next as any\n}\n\nconst fontLanguageCache = new WeakMap()\n\nexport function getFontsForLanguage(fonts: GenericFonts, language: LanguageContextType) {\n  if (fontLanguageCache.has(language)) {\n    return fontLanguageCache.get(language)\n  }\n  const next = {\n    ...fonts,\n    ...Object.fromEntries(\n      Object.entries(language).flatMap(([name, lang]) => {\n        if (lang === 'default') {\n          return []\n        }\n        const langKey = `$${name}_${lang}`\n        return [[`$${name}`, fonts[langKey]]]\n      })\n    ),\n  }\n  fontLanguageCache.set(language, next)\n  return next\n}\n","import { tokenCategories } from '@tamagui/helpers'\nimport { getConfig } from '../config'\nimport { isVariable } from '../createVariable'\nimport type {\n  GetStyleState,\n  ResolveVariableAs,\n  SplitStyleProps,\n  Variable,\n} from '../types'\nimport { getFontsForLanguage } from './getVariantExtras'\n\nconst fontShorthand = {\n  fontSize: 'size',\n  fontWeight: 'weight',\n}\n\nlet didLogMissingToken = false\n\n// mutable state for font family tracking across propMapper\nlet _lastFontFamilyToken: any = null\n\nexport function getLastFontFamilyToken() {\n  return _lastFontFamilyToken\n}\n\nexport function setLastFontFamilyToken(value: any) {\n  _lastFontFamilyToken = value\n}\n\nexport const getTokenForKey = (\n  key: string,\n  value: string,\n  styleProps: SplitStyleProps,\n  styleState: Partial<GetStyleState>\n) => {\n  let resolveAs = styleProps.resolveValues || 'none'\n\n  if (resolveAs === 'none') {\n    return value\n  }\n\n  const { theme, conf = getConfig(), context, fontFamily, staticConfig } = styleState\n\n  const themeValue = theme ? theme[value] || theme[value.slice(1)] : undefined\n\n  const tokensParsed = conf.tokensParsed\n  let valOrVar: any\n  let hasSet = false\n\n  const customTokenAccept = staticConfig?.accept?.[key]\n  if (customTokenAccept) {\n    const val = themeValue ?? tokensParsed[customTokenAccept]?.[value]\n    if (val != null) {\n      resolveAs = 'value' // always resolve custom tokens as values\n      valOrVar = val\n      hasSet = true\n    }\n  }\n\n  if (themeValue) {\n    if (resolveAs === 'except-theme') {\n      return value\n    }\n\n    valOrVar = themeValue\n    if (process.env.NODE_ENV === 'development' && styleState.debug === 'verbose') {\n      globalThis.tamaguiAvoidTracking = true\n      console.info(\n        ` - resolving ${key} to theme value ${value} resolveAs ${resolveAs}`,\n        valOrVar\n      )\n      globalThis.tamaguiAvoidTracking = false\n    }\n    hasSet = true\n  } else {\n    if (value in conf.specificTokens) {\n      hasSet = true\n      valOrVar = conf.specificTokens[value]\n    } else {\n      switch (key) {\n        case 'fontFamily': {\n          const fontsParsed = context?.language\n            ? getFontsForLanguage(conf.fontsParsed, context.language)\n            : conf.fontsParsed\n          valOrVar = fontsParsed[value]?.family || value\n          setLastFontFamilyToken(value)\n          hasSet = true\n          break\n        }\n        case 'fontSize':\n        case 'lineHeight':\n        case 'letterSpacing':\n        case 'fontWeight': {\n          const fam = fontFamily || conf.defaultFontToken\n          if (fam) {\n            const fontsParsed = context?.language\n              ? getFontsForLanguage(conf.fontsParsed, context.language)\n              : conf.fontsParsed\n            const font = fontsParsed[fam] || fontsParsed[conf.defaultFontToken]\n            valOrVar = font?.[fontShorthand[key] || key]?.[value] || value\n            hasSet = true\n          }\n          break\n        }\n      }\n      for (const cat in tokenCategories) {\n        if (key in tokenCategories[cat]) {\n          const res = tokensParsed[cat]?.[value]\n\n          if (res != null) {\n            valOrVar = res\n            hasSet = true\n          } else {\n            if (process.env.NODE_ENV === 'development') {\n              if (process.env.TAMAGUI_DISABLE_MISSING_TOKEN_LOG !== '1') {\n                if (!didLogMissingToken) {\n                  didLogMissingToken = true\n                  console.groupCollapsed(\n                    `[tamagui] Warning: missing token ${key} in category ${cat} - ${value} (open for details)`\n                  )\n                  console.info(\n                    `Note: this could just be due to you not setting all the theme tokens Tamagui expects, which is harmless, but\n                    it also often can be because you have a duplicated Tamagui in your bundle, which can cause tricky bugs.`\n                  )\n                  console.info(\n                    `To see if you have duplicated dependencies, in Chrome DevTools hit CMD+P and type TamaguiProvider.\n                    If you see both a .cjs and a .mjs entry, it's duplicated.`\n                  )\n                  console.info(\n                    `You can debug that issue by opening the .mjs and .cjs files and setting a breakpoint at the top of each.`\n                  )\n                  console.info(\n                    `We only log this warning one time as it's sometimes harmless, to disable this log entirely set process.env.TAMAGUI_DISABLE_MISSING_TOKEN_LOG=1.`\n                  )\n                  console.groupEnd()\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    if (!hasSet) {\n      const spaceVar = tokensParsed.space[value]\n      if (spaceVar != null) {\n        valOrVar = spaceVar\n        hasSet = true\n      }\n    }\n  }\n\n  if (hasSet) {\n    const out = resolveVariableValue(key, valOrVar, resolveAs)\n    if (process.env.NODE_ENV === 'development' && styleState.debug === 'verbose') {\n      globalThis.tamaguiAvoidTracking = true\n      console.info(`resolved`, resolveAs, valOrVar, out)\n      globalThis.tamaguiAvoidTracking = false\n    }\n    return out\n  }\n\n  // they didn't define this token don't return anything, we could warn?\n\n  if (process.env.NODE_ENV === 'development' && styleState.debug === 'verbose') {\n    console.warn(`Warning: no token found for ${key}, omitting`)\n  }\n}\n\nexport function resolveVariableValue(\n  key: string,\n  valOrVar: Variable | any,\n  resolveValues?: ResolveVariableAs\n) {\n  if (resolveValues === 'none') {\n    return valOrVar\n  }\n  if (isVariable(valOrVar)) {\n    if (resolveValues === 'value') {\n      return valOrVar.val\n    }\n\n    // @ts-expect-error this is fine until we can type better\n    const get = valOrVar?.get\n\n    // shadowColor doesn't support dynamic style\n    if (process.env.TAMAGUI_TARGET !== 'native' || key !== 'shadowColor') {\n      if (typeof get === 'function') {\n        const resolveDynamicFor = resolveValues === 'web' ? 'web' : undefined\n        return get(resolveDynamicFor)\n      }\n    }\n\n    return process.env.TAMAGUI_TARGET === 'native' ? valOrVar.val : valOrVar.variable\n  }\n  return valOrVar\n}\n","export const isObj = (x: any) => x && !Array.isArray(x) && typeof x === 'object'\n","import { expandStyle } from './expandStyle'\nimport { fixStyles } from './expandStyles'\nimport { isObj } from './isObj'\nimport { normalizeValueWithProperty } from './normalizeValueWithProperty'\nimport { pseudoDescriptors } from './pseudoDescriptors'\n\n/**\n * This is what you want to run before Object.assign() a style onto another.\n * It does the following:\n *   1. Shorthands into longhands, px = paddingHorizontal\n *   2. Expands flex, borderColor and other properties that can expand into sub-parts\n *   3. Normalizes all sub pseudo-media-etc styles\n */\n\nexport function normalizeStyle(style: Record<string, any>, disableNormalize = false) {\n  const res: Record<string, any> = {}\n\n  for (let key in style) {\n    const prop = style[key]\n    if (prop == null) continue\n    if (\n      key in pseudoDescriptors ||\n      // this should capture all parent-based styles like media, group, etc\n      (key[0] === '$' && isObj(prop))\n    ) {\n      res[key] = normalizeStyle(prop, disableNormalize)\n      continue\n    }\n    const value = disableNormalize ? prop : normalizeValueWithProperty(prop, key)\n    // expand react-native shorthands\n    const out = expandStyle(key, value)\n    if (out) {\n      Object.assign(res, Object.fromEntries(out))\n    } else {\n      res[key] = value\n    }\n  }\n\n  fixStyles(res)\n\n  return res\n}\n","import type { GetStyleState, SplitStyleProps } from '../types'\nimport { getTokenForKey } from './getTokenForKey'\n\nconst tokenPattern = /(\\$[\\w.-]+)/g\n\n/**\n * web: resolves embedded $tokens in compound CSS strings via simple regex replacement.\n */\nexport function platformResolveValue(\n  _key: string,\n  value: string,\n  styleProps: SplitStyleProps,\n  styleState: Partial<GetStyleState>\n): string {\n  return value.replace(tokenPattern, (t) => {\n    let r = getTokenForKey('size', t, styleProps, styleState)\n    if (r == null) {\n      r = getTokenForKey('color', t, styleProps, styleState)\n    }\n    return r != null ? String(r) : t\n  })\n}\n","import type { GetStyleState, SplitStyleProps } from '../types'\nimport { platformResolveValue } from './platformResolveValue'\n\nconst compoundKeys: Record<string, boolean> = {\n  boxShadow: true,\n  textShadow: true,\n  filter: true,\n  backgroundImage: true,\n  border: true,\n  outline: true,\n}\n\n/**\n * resolves embedded $tokens in compound CSS string values like\n * boxShadow, textShadow, filter, backgroundImage, border, outline.\n *\n * returns the original value unchanged if no resolution is needed.\n */\nexport function resolveCompoundTokens(\n  key: string,\n  value: string,\n  styleProps: SplitStyleProps,\n  styleState: Partial<GetStyleState>\n): any {\n  if (!value.includes('$')) return value\n  if (!compoundKeys[key]) return value\n  return platformResolveValue(key, value, styleProps, styleState)\n}\n","/**\n * Resolves rem values on web platforms.\n * On web, browsers handle rem natively, so we just return the value as-is.\n *\n * @param value - A string value containing rem units\n * @returns The same string value (browsers handle rem natively)\n */\nexport function resolveRem(value: string): string {\n  return value\n}\n\n/**\n * Checks if a value is a rem string\n */\nexport function isRemValue(value: unknown): value is string {\n  return typeof value === 'string' && value.includes('rem')\n}\n","/**\n * Native-only props that should be skipped on web (both dev and prod)\n */\nexport const nativeOnlyProps = {\n  accessibilityElementsHidden: 1,\n  accessibilityIgnoresInvertColors: 1,\n  accessibilityLanguage: 1,\n  adjustsFontSizeToFit: 1,\n  allowFontScaling: 1,\n  android_hyphenationFrequency: 1,\n  dataDetectorType: 1,\n  dynamicTypeRamp: 1,\n  elevationAndroid: 1,\n  ellipsizeMode: 1,\n  hapticFeedback: 1,\n  hapticStyle: 1,\n  hitSlop: 1,\n  importantForAccessibility: 1,\n  lineBreakStrategyIOS: 1,\n  maxFontSizeMultiplier: 1,\n  minimumFontScale: 1,\n  needsOffscreenAlphaCompositing: 1,\n  nextFocusDown: 1,\n  nextFocusForward: 1,\n  nextFocusLeft: 1,\n  nextFocusRight: 1,\n  nextFocusUp: 1,\n  onAccessibilityAction: 1,\n  onAccessibilityEscape: 1,\n  onAccessibilityTap: 1,\n  onMagicTap: 1,\n  onTextLayout: 1,\n  pressRetentionOffset: 1,\n  selectionColor: 1,\n  shouldRasterizeIOS: 1,\n  suppressHighlighting: 1,\n  textBreakStrategy: 1,\n}\n","import { nativeOnlyProps } from './nativeOnlyProps'\nimport { webPropsToSkip } from './webPropsToSkip'\n\n/**\n * These are props that dont pass down below Tamagui styled components\n */\nexport const skipProps = {\n  untilMeasured: 1,\n  transition: 1,\n  space: 1,\n  animateOnly: 1,\n  disableClassName: 1,\n  debug: 1,\n  componentName: 1,\n  disableOptimization: 1,\n  render: 1,\n  style: 1, // handled after loop so pseudos set usedKeys and override it if necessary\n  group: 1,\n  animatePresence: 1,\n}\n\nif (process.env.NODE_ENV === 'test') {\n  skipProps['data-test-renders'] = 1\n}\n\n// Skip web-only props on native\nif (process.env.TAMAGUI_TARGET === 'native') {\n  Object.assign(skipProps, webPropsToSkip)\n}\n\n// Skip native-only props on web\nif (process.env.TAMAGUI_TARGET === 'web') {\n  Object.assign(skipProps, nativeOnlyProps)\n}\n","import { isAndroid } from '@tamagui/constants'\nimport { getVariableValue, isVariable } from '../createVariable'\nimport type {\n  GetStyleState,\n  PropMapper,\n  SplitStyleProps,\n  StyleResolver,\n  TamaguiInternalConfig,\n  Variable,\n  VariantSpreadFunction,\n} from '../types'\nimport { expandStyle } from './expandStyle'\nimport {\n  getLastFontFamilyToken,\n  getTokenForKey,\n  resolveVariableValue,\n  setLastFontFamilyToken,\n} from './getTokenForKey'\nimport { getFontsForLanguage, getVariantExtras } from './getVariantExtras'\nimport { isObj } from './isObj'\nimport { normalizeStyle } from './normalizeStyle'\nimport { parseNativeStyle } from './parseNativeStyle'\nimport { pseudoDescriptors } from './pseudoDescriptors'\nimport { resolveCompoundTokens } from './resolveCompoundTokens'\nimport { isRemValue, resolveRem } from './resolveRem'\nimport { skipProps } from './skipProps'\n\nexport { getTokenForKey } from './getTokenForKey'\n\nexport const propMapper: PropMapper = (key, value, styleState, disabled, map) => {\n  if (disabled) {\n    return map(key, value)\n  }\n\n  setLastFontFamilyToken(null)\n\n  if (!(process.env.TAMAGUI_TARGET === 'native' && isAndroid)) {\n    // this shouldnt be necessary and handled in the outer loop\n    if (key === 'elevationAndroid') return\n  }\n\n  const { conf, styleProps, staticConfig } = styleState\n  const { variants } = staticConfig\n\n  if (!styleProps.noExpand) {\n    if (variants && key in variants) {\n      const variantValue = resolveVariants(key, value, styleProps, styleState, '')\n      if (variantValue) {\n        variantValue.forEach(([key, value]) => map(key, value))\n        return\n      }\n    }\n  }\n\n  // handle shorthands\n  if (!styleProps.disableExpandShorthands) {\n    if (key in conf.shorthands) {\n      key = conf.shorthands[key]\n    }\n  }\n\n  // Capture original value before resolution (for context prop tracking)\n  const originalValue = value\n\n  if (value != null) {\n    if (typeof value === 'string') {\n      if (value[0] === '$') {\n        value = getTokenForKey(key, value, styleProps, styleState)\n      } else {\n        const resolved = resolveCompoundTokens(key, value, styleProps, styleState)\n        value =\n          resolved !== value ? resolved : isRemValue(value) ? resolveRem(value) : value\n      }\n    } else if (isVariable(value)) {\n      value = resolveVariableValue(key, value, styleProps.resolveValues)\n    } else if (isRemValue(value)) {\n      value = resolveRem(value)\n    }\n  }\n\n  // on native, parse string backgroundImage/boxShadow/textShadow to RN object format\n  // this handles both token-resolved strings and plain strings without tokens\n  if (\n    process.env.TAMAGUI_TARGET === 'native' &&\n    value != null &&\n    typeof value === 'string' &&\n    (key === 'backgroundImage' || key === 'boxShadow' || key === 'textShadow')\n  ) {\n    const parsed = parseNativeStyle(key, value)\n    if (parsed) {\n      // textShadow returns [key, value] pairs to expand into separate properties\n      if (key === 'textShadow' && Array.isArray(parsed) && Array.isArray(parsed[0])) {\n        for (const [nkey, nvalue] of parsed) {\n          map(nkey, nvalue, originalValue)\n        }\n        return\n      }\n      value = parsed\n    }\n  }\n\n  if (value != null) {\n    const fontToken = getLastFontFamilyToken()\n    if (key === 'fontFamily' && fontToken) {\n      styleState.fontFamily = fontToken\n    }\n\n    const expanded = styleProps.noExpand ? null : expandStyle(key, value)\n\n    if (expanded) {\n      const max = expanded.length\n      for (let i = 0; i < max; i++) {\n        const [nkey, nvalue] = expanded[i]\n        map(nkey, nvalue, originalValue)\n      }\n    } else {\n      map(key, value, originalValue)\n    }\n  }\n}\n\nconst resolveVariants: StyleResolver = (\n  key,\n  value,\n  styleProps,\n  styleState,\n  parentVariantKey\n) => {\n  const { staticConfig, conf, debug } = styleState\n  const { variants } = staticConfig\n  if (!variants) return\n\n  let variantValue = getVariantDefinition(variants[key], value, conf, styleState)\n\n  if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n    console.groupCollapsed(`♦️♦️♦️ resolve variant ${key}`)\n    console.info({\n      key,\n      value,\n      variantValue,\n      variants,\n    })\n    console.groupEnd()\n  }\n\n  if (!variantValue) {\n    // variant at key exists, but no matching variant\n    // disabling warnings, its fine to pass through, could re-enable later somehoiw\n    if (process.env.TAMAGUI_WARN_ON_MISSING_VARIANT === '1') {\n      // don't warn on missing booleans\n      if (typeof value !== 'boolean') {\n        const name = staticConfig.componentName || '[UnnamedComponent]'\n        console.warn(\n          `No variant found: ${name} has variant \"${key}\", but no matching value \"${value}\"`\n        )\n      }\n    }\n    return\n  }\n\n  if (typeof variantValue === 'function') {\n    const fn = variantValue as VariantSpreadFunction<any>\n    const extras = getVariantExtras(styleState)\n    variantValue = fn(value, extras)\n\n    if (\n      process.env.NODE_ENV === 'development' &&\n      debug === 'verbose' &&\n      process.env.TAMAGUI_TARGET !== 'native'\n    ) {\n      console.groupCollapsed('   expanded functional variant', key)\n      console.info({ fn, variantValue, extras })\n      console.groupEnd()\n    }\n  }\n\n  let fontFamilyResult: any\n\n  if (isObj(variantValue)) {\n    const fontFamilyUpdate =\n      variantValue.fontFamily || variantValue[conf.inverseShorthands.fontFamily]\n\n    if (fontFamilyUpdate) {\n      fontFamilyResult = getFontFamilyFromNameOrVariable(fontFamilyUpdate, conf)\n      styleState.fontFamily = fontFamilyResult\n\n      if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n        console.info(`   updating font family`, fontFamilyResult)\n      }\n    }\n\n    variantValue = resolveTokensAndVariants(\n      key,\n      variantValue,\n      styleProps,\n      styleState,\n      parentVariantKey\n    )\n  }\n\n  if (variantValue) {\n    const expanded = normalizeStyle(variantValue, !!styleProps.noNormalize)\n\n    if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n      console.info(`   expanding styles from `, variantValue, `to`, expanded)\n    }\n    const next = Object.entries(expanded)\n\n    // store any changed font family (only support variables for now)\n    if (fontFamilyResult && fontFamilyResult[0] === '$') {\n      setLastFontFamilyToken(getVariableValue(fontFamilyResult))\n    }\n\n    return next\n  }\n}\n\n// handles finding and resolving the fontFamily to the token name\n// this is used as `font_[name]` in className for nice css variable support\nexport function getFontFamilyFromNameOrVariable(input: any, conf: TamaguiInternalConfig) {\n  if (isVariable(input)) {\n    const val = variableToFontNameCache.get(input)\n    if (val) return val\n    for (const key in conf.fontsParsed) {\n      const familyVariable = conf.fontsParsed[key].family\n      if (isVariable(familyVariable)) {\n        variableToFontNameCache.set(familyVariable, key)\n        if (familyVariable === input) {\n          return key\n        }\n      }\n    }\n  } else if (typeof input === 'string') {\n    if (input[0] === '$') {\n      return input\n    }\n  }\n}\n\nconst variableToFontNameCache = new WeakMap<Variable, string>()\n\nconst resolveTokensAndVariants: StyleResolver<object> = (\n  key, // we dont use key assume value is object instead\n  value,\n  styleProps,\n  styleState,\n  parentVariantKey\n) => {\n  const { conf, staticConfig, debug, theme } = styleState\n  const { variants } = staticConfig\n  const res = {}\n\n  if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n    console.info(`   - resolveTokensAndVariants`, key, value)\n  }\n\n  for (const _key in value) {\n    const subKey = conf.shorthands[_key] || _key\n    const val = value[_key]\n\n    if (!styleProps.noSkip && subKey in skipProps) {\n      continue\n    }\n\n    // Track context overrides for any key that's in context props (issues #3670, #3676)\n    // Store the ORIGINAL token value (like '$8') before resolution so that\n    // children's functional variants can look up token values\n    if (staticConfig) {\n      const contextProps =\n        staticConfig.context?.props || staticConfig.parentStaticConfig?.context?.props\n      if (contextProps && subKey in contextProps) {\n        styleState.overriddenContextProps ||= {}\n        styleState.overriddenContextProps[subKey] = val\n        // Also track the original token value separately\n        styleState.originalContextPropValues ||= {}\n        styleState.originalContextPropValues[subKey] = val\n      }\n    }\n\n    if (styleProps.noExpand) {\n      res[subKey] = val\n    } else {\n      if (variants && subKey in variants) {\n        // avoids infinite loop if variant is matching a style prop\n        // eg: { variants: { flex: { true: { flex: 2 } } } }\n        if (parentVariantKey && parentVariantKey === key) {\n          res[subKey] =\n            val[0] === '$' ? getTokenForKey(subKey, val, styleProps, styleState) : val\n        } else {\n          const variantOut = resolveVariants(subKey, val, styleProps, styleState, key)\n\n          // apply, merging sub-styles\n          if (variantOut) {\n            for (const [key, val] of variantOut) {\n              if (val == null) continue\n              if (key in pseudoDescriptors) {\n                res[key] ??= {}\n                Object.assign(res[key], val)\n              } else {\n                res[key] = val\n              }\n            }\n          }\n        }\n        continue\n      }\n    }\n\n    if (isVariable(val)) {\n      res[subKey] = resolveVariableValue(subKey, val, styleProps.resolveValues)\n\n      if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n        console.info(`variable`, subKey, res[subKey])\n      }\n      continue\n    }\n\n    if (typeof val === 'string') {\n      const fVal =\n        val[0] === '$'\n          ? getTokenForKey(subKey, val, styleProps, styleState)\n          : resolveCompoundTokens(subKey, val, styleProps, styleState)\n\n      res[subKey] = fVal === val && isRemValue(val) ? resolveRem(val) : fVal\n      continue\n    }\n\n    if (isObj(val)) {\n      const subObject = resolveTokensAndVariants(subKey, val, styleProps, styleState, key)\n\n      if (process.env.NODE_ENV === 'development' && debug === 'verbose') {\n        console.info(`object`, subKey, subObject)\n      }\n\n      // sub-objects: media queries, pseudos, shadowOffset\n      res[subKey] ??= {}\n      Object.assign(res[subKey], subObject)\n    } else {\n      // nullish values cant be tokens, need no extra parsing\n      res[subKey] = val\n    }\n\n    if (process.env.NODE_ENV === 'development') {\n      if (debug) {\n        if (res[subKey]?.[0] === '$') {\n          console.warn(\n            `⚠️ Missing token in theme ${theme.name}:`,\n            subKey,\n            res[subKey],\n            theme\n          )\n        }\n      }\n    }\n  }\n\n  return res\n}\n\nconst tokenCats = ['size', 'color', 'radius', 'space', 'zIndex'].map((name) => ({\n  name,\n  spreadName: `...${name}`,\n}))\n\n// goes through specificity finding best matching variant function\nfunction getVariantDefinition(\n  variant: any,\n  value: any,\n  conf: TamaguiInternalConfig,\n  { theme }: Partial<GetStyleState>\n) {\n  if (!variant) return\n  if (typeof variant === 'function') {\n    return variant\n  }\n  const exact = variant[value]\n  if (exact) {\n    return exact\n  }\n  if (value != null) {\n    const { tokensParsed } = conf\n    for (const { name, spreadName } of tokenCats) {\n      if (spreadName in variant) {\n        // check tokens first\n        if (name in tokensParsed && value in tokensParsed[name]) {\n          return variant[spreadName]\n        }\n        // or check theme (only color lives in theme, others are in tokens)\n        if (name === 'color' && theme && typeof value === 'string' && value[0] === '$') {\n          const themeKey = value.slice(1)\n          if (themeKey in theme) {\n            return variant[spreadName]\n          }\n        }\n      }\n    }\n    const fontSizeVariant = variant['...fontSize']\n    if (fontSizeVariant && conf.fontSizeTokens.has(value)) {\n      return fontSizeVariant\n    }\n  }\n  // fallback to catch all | size\n  return variant[`:${typeof value}`] || variant['...']\n}\n","export const sortString = (a: string, b: string) => (a < b ? -1 : a > b ? 1 : 0)\n","import { composeRefs } from '@tamagui/compose-refs'\nimport { composeEventHandlers } from '@tamagui/helpers'\n\nconst isEventHandler = /^on[A-Z]/\n\n/**\n * Merges props with special handling for style, className, ref, and event handlers.\n * Used by Slot and render prop implementations.\n *\n * @param base - Base props (typically from parent/slot)\n * @param overlay - Props to merge on top (typically from child/element)\n * @returns Merged props object (mutates and returns base for perf)\n */\nexport function mergeSlotStyleProps(\n  base: Record<string, any>,\n  overlay: Record<string, any>\n): Record<string, any> {\n  for (const key in overlay) {\n    const baseVal = base[key]\n    const overlayVal = overlay[key]\n\n    if (overlayVal === undefined) continue\n\n    if (key === 'style') {\n      base.style =\n        baseVal && overlayVal ? { ...baseVal, ...overlayVal } : overlayVal || baseVal\n    } else if (key === 'className') {\n      base.className =\n        baseVal && overlayVal ? `${baseVal} ${overlayVal}` : overlayVal || baseVal\n    } else if (key === 'ref') {\n      base.ref =\n        baseVal && overlayVal ? composeRefs(baseVal, overlayVal) : overlayVal || baseVal\n    } else if (\n      isEventHandler.test(key) &&\n      typeof baseVal === 'function' &&\n      typeof overlayVal === 'function'\n    ) {\n      base[key] = composeEventHandlers(baseVal, overlayVal)\n    } else {\n      // overlay wins for regular props\n      base[key] = overlayVal\n    }\n  }\n\n  return base\n}\n","import { mergeSlotStyleProps } from './mergeSlotStyleProps'\n\n/**\n * Merges props from a render element with viewProps from Tamagui.\n * viewProps takes precedence, elementProps provides fallbacks.\n * Style/className are merged, refs and event handlers are composed.\n */\nexport function mergeRenderElementProps(\n  elementProps: Record<string, any>,\n  viewProps: Record<string, any>,\n  children: any\n): Record<string, any> {\n  // elementProps as base, viewProps as overlay (viewProps wins)\n  const merged = mergeSlotStyleProps({ ...elementProps }, viewProps)\n  merged.children = children\n  return merged\n}\n","/**\n * Web pointer events - no-op, pointer events work natively on web\n *\n * For drag scenarios, users should call e.target.setPointerCapture(e.pointerId)\n * in their onPointerDown handler to receive move events outside element bounds.\n */\nexport function usePointerEvents(_props: any, _viewProps: any) {\n  // pointer events pass through directly on web\n}\n","import type { TransitionProp, PseudoTransitions, TamaguiComponentState } from '../types'\n\n/**\n * Pseudo state for tracking enter/exit transitions\n */\nexport type PseudoState = {\n  hover?: boolean\n  press?: boolean\n  focus?: boolean\n  // track group pseudo states: { groupName: { hover: boolean, press: boolean } }\n  groups?: Record<string, { hover?: boolean; press?: boolean; focus?: boolean }>\n}\n\n/**\n * Resolves the effective transition based on pseudo state changes.\n * When entering a pseudo state (e.g., hover), use that pseudo's transition.\n * When exiting (returning to base), use the base transition.\n *\n * CSS-like semantics:\n * - Enter hover: Uses hover's transition (fast snap)\n * - Exit hover: Uses base transition (slow fade)\n */\nexport function resolveEffectivePseudoTransition(\n  prev: PseudoState | undefined,\n  next: TamaguiComponentState,\n  pseudoTransitions: PseudoTransitions | undefined | null,\n  baseTransition: TransitionProp | undefined | null\n): TransitionProp | undefined | null {\n  if (!pseudoTransitions) {\n    return baseTransition\n  }\n\n  // treat undefined prev as all-false so first interaction detects entering\n  const prevState = prev || { hover: false, press: false, focus: false, groups: {} }\n\n  // check which pseudo states are being entered (priority: press > hover > focus)\n  if (next.press && !prevState.press && pseudoTransitions.pressStyle) {\n    return pseudoTransitions.pressStyle\n  }\n  if (next.hover && !prevState.hover && pseudoTransitions.hoverStyle) {\n    return pseudoTransitions.hoverStyle\n  }\n  if (next.focus && !prevState.focus && pseudoTransitions.focusStyle) {\n    return pseudoTransitions.focusStyle\n  }\n\n  // check group pseudo transitions (e.g., $group-scenario4-hover)\n  for (const key in pseudoTransitions) {\n    if (key.startsWith('$group-')) {\n      // parse $group-{name}-{pseudo} format\n      const match = key.match(/^\\$group-(.+)-(hover|press|focus)$/)\n      if (!match) continue\n\n      const groupName = match[1]\n      const pseudoType = match[2] as 'hover' | 'press' | 'focus'\n\n      // get current and previous group pseudo state\n      const nextGroupPseudo = next.group?.[groupName]?.pseudo\n      const prevGroupPseudo = prevState.groups?.[groupName]\n\n      // check if entering this group pseudo state\n      if (nextGroupPseudo?.[pseudoType] && !prevGroupPseudo?.[pseudoType]) {\n        return pseudoTransitions[key as `$group-${string}-${'hover' | 'press' | 'focus'}`]\n      }\n    }\n  }\n\n  // exiting uses base transition\n  return baseTransition\n}\n\n/**\n * Extracts pseudo state from TamaguiComponentState for storage in prevPseudoState\n */\nexport function extractPseudoState(state: TamaguiComponentState): PseudoState {\n  const groups: PseudoState['groups'] = {}\n\n  if (state.group) {\n    for (const groupName in state.group) {\n      const pseudo = state.group[groupName]?.pseudo\n      if (pseudo) {\n        groups[groupName] = {\n          hover: pseudo.hover,\n          press: pseudo.press,\n          focus: pseudo.focus,\n        }\n      }\n    }\n  }\n\n  return {\n    hover: state.hover,\n    press: state.press,\n    focus: state.focus,\n    groups,\n  }\n}\n","import type { TamaguiComponentStateRef } from './types'\n\nexport const hooks: InternalHooks = {}\n\n// internal hooks setup\nexport function setupHooks(next: InternalHooks) {\n  Object.assign(hooks, next)\n}\n\ntype InternalHooks = {\n  usePropsTransform?: (\n    elementType: any,\n    props: Record<string, any>,\n    stateRef: { current: TamaguiComponentStateRef },\n    willHydrate?: boolean\n  ) => any\n\n  setElementProps?: (node?: any) => void\n\n  useChildren?: (elementType: any, children: any, viewProps: Record<string, any>) => any\n\n  getBaseViews?: () => {\n    View: any\n    Text: any\n    TextAncestor: any\n  }\n}\n","import { hooks } from '../setupHooks'\n\nexport const setElementProps = (node) => {\n  hooks.setElementProps?.(node)\n}\n","import { mergeIfNotShallowEqual } from '@tamagui/is-equal-shallow'\nimport { getMediaState } from '../hooks/useMedia'\nimport type { ComponentSetStateShallow, DisposeFn, AllGroupContexts } from '../types'\n\ntype SubscribeToContextGroupProps = {\n  setStateShallow: ComponentSetStateShallow\n  pseudoGroups?: Set<string>\n  mediaGroups?: Set<string>\n  groupContext: AllGroupContexts\n}\n\nexport const subscribeToContextGroup = (props: SubscribeToContextGroupProps) => {\n  const { pseudoGroups, mediaGroups, groupContext } = props\n  if (pseudoGroups || mediaGroups) {\n    if (process.env.NODE_ENV === 'development' && !groupContext) {\n      console.debug(`No context group found`)\n    }\n\n    const disposables = new Set<DisposeFn>()\n\n    if (pseudoGroups) {\n      for (const name of pseudoGroups) {\n        disposables.add(createGroupListener(name, props))\n      }\n    }\n\n    if (mediaGroups) {\n      for (const name of mediaGroups) {\n        disposables.add(createGroupListener(name, props))\n      }\n    }\n\n    return () => {\n      disposables.forEach((d) => d())\n    }\n  }\n}\n\nconst createGroupListener = (\n  name: string,\n  {\n    setStateShallow,\n    pseudoGroups,\n    mediaGroups,\n    groupContext,\n  }: SubscribeToContextGroupProps\n): DisposeFn => {\n  const parent = groupContext?.[name]\n\n  if (!parent) {\n    return () => {}\n  }\n\n  const dispose = parent.subscribe(({ layout, pseudo }) => {\n    setStateShallow((prev) => {\n      let didChange = false\n      const group = prev.group?.[name] || {\n        pseudo: {},\n        media: {},\n      }\n\n      if (pseudo && pseudoGroups?.has(name)) {\n        group.pseudo ||= {}\n        const next = mergeIfNotShallowEqual(group.pseudo, pseudo)\n        if (next !== group.pseudo) {\n          Object.assign(group.pseudo, pseudo)\n          didChange = true\n        }\n      } else if (layout && mediaGroups) {\n        group.media ||= {}\n        const mediaState = getMediaState(mediaGroups, layout)\n        const next = mergeIfNotShallowEqual(group.media, mediaState)\n        if (next !== group.media) {\n          Object.assign(group.media, next)\n          didChange = true\n        }\n      }\n\n      if (didChange) {\n        return {\n          group: {\n            ...prev.group,\n            [name]: group,\n          },\n        }\n      }\n\n      return prev\n    })\n  })\n\n  return () => {\n    dispose()\n    // we no longer have any active group, need to remove state so the style updates\n    setStateShallow({\n      group: {},\n    })\n  }\n}\n","import React from 'react'\n\nimport type { StaticConfig, ThemeableProps, ThemeProps } from '../types'\nimport { Theme } from '../views/Theme'\nimport { getDefaultProps } from './getDefaultProps'\n\nexport function themeable<ComponentType extends (props: any) => any>(\n  Component: ComponentType,\n  staticConfig: Partial<StaticConfig>,\n  optimize = false\n) {\n  const withThemeComponent = React.forwardRef(function WithTheme(\n    props: ThemeableProps,\n    ref\n  ) {\n    const userDefaults = getDefaultProps(staticConfig, props.componentName)\n    const defaultTheme = userDefaults?.theme\n    const defaultResetTheme = userDefaults?.themeReset\n    const { theme, componentName, themeReset, ...rest } = props\n\n    let overriddenContextProps: object | undefined\n    const context = staticConfig?.context\n    if (context) {\n      for (const key in context.props) {\n        const val = props[key]\n        if (val !== undefined) {\n          overriddenContextProps ||= {}\n          overriddenContextProps[key] = val\n        }\n      }\n    }\n\n    const element = (\n      // @ts-expect-error its ok\n      <Component ref={ref} {...rest} data-disable-theme />\n    )\n\n    // we filter out the props here, why?\n    // Theme internally avoids wrapping <span /> unless 'theme' in props\n    // reason for this is to avoid wrapping every single component with span\n    // *if* ever it themes once, it leaves the span, to avoid reparenting\n    // its expected if users want to avoid re-parenting, they keep the theme prop\n    // and just set it to null. but we need to \"respect\" that here by filtering\n    // one example of a bug caused by not doing this is in <Select native> on web\n    // where it renders to an <option />, and then Theme would wrap a <span /> in that\n    // which is not allowed in HTML and causes hydration errors / logs\n    let filteredProps: Partial<ThemeProps> | null = null\n\n    const compName = componentName || staticConfig?.componentName\n    if (compName) {\n      filteredProps ||= {}\n      filteredProps.componentName = compName\n    }\n    if ('debug' in props) {\n      filteredProps ||= {}\n      filteredProps.debug = props.debug\n    }\n    if ('theme' in props || defaultTheme) {\n      filteredProps ||= {}\n      filteredProps.name = 'theme' in props ? props.theme : defaultTheme\n    }\n    if ('themeReset' in props || defaultResetTheme) {\n      filteredProps ||= {}\n      filteredProps.reset = 'themeReset' in props ? themeReset : defaultResetTheme\n    }\n\n    if (optimize && !filteredProps) {\n      // optimize by avoiding theme! this can re-parent but we should just document that to avoid performance\n      // in cases where you remove/add themes, just keep a theme={x ? '' : null} pattern\n      return element\n    }\n\n    let contents = (\n      <Theme disable-child-theme {...filteredProps}>\n        {element}\n      </Theme>\n    )\n\n    if (context) {\n      const Provider = context.Provider\n      const contextValue = React.useContext(context)\n      contents = (\n        <Provider {...contextValue} {...overriddenContextProps}>\n          {contents}\n        </Provider>\n      )\n    }\n\n    return contents\n  })\n\n  const withTheme: any = withThemeComponent\n  withTheme.displayName = `Themed(${\n    (Component as any)?.displayName || (Component as any)?.name || 'Anonymous'\n  })`\n\n  type FinalComponentType = ComponentType extends (props: infer P) => infer R\n    ? (props: Omit<P, 'theme'> & ThemeableProps) => R\n    : unknown\n\n  return withTheme as FinalComponentType\n}\n","import { isWeb } from '@tamagui/constants'\nimport type { MutableRefObject } from 'react'\nimport React, { Children, cloneElement, forwardRef, isValidElement, useRef } from 'react'\nimport { getSetting } from '../config'\nimport { variableToString } from '../createVariable'\nimport { useThemeWithState } from '../hooks/useTheme'\nimport {\n  getThemeState,\n  hasThemeUpdatingProps,\n  ThemeStateContext,\n} from '../hooks/useThemeState'\nimport type { ThemeProps, ThemeState } from '../types'\nimport { ThemeDebug } from './ThemeDebug'\n\ntype ThemeComponentPropsOnly = ThemeProps & { passThrough?: boolean; contain?: boolean }\n\nexport const Theme = forwardRef(function Theme(props: ThemeComponentPropsOnly, ref) {\n  // @ts-expect-error only for internal views\n  if (props.disable) {\n    return props.children\n  }\n\n  const { passThrough } = props\n\n  const isRoot = !!props['_isRoot']\n\n  const [_, themeState] = useThemeWithState(props, isRoot)\n\n  const disableDirectChildTheme = props['disable-child-theme']\n\n  let finalChildren = disableDirectChildTheme\n    ? Children.map(props.children, (child) =>\n        passThrough || !isValidElement(child)\n          ? child\n          : cloneElement(child, { ['data-disable-theme']: true } as any)\n      )\n    : props.children\n\n  if (ref) {\n    try {\n      React.Children.only(finalChildren)\n      // TODO deprecate react 18 and then avoid clone here and just pass prop\n      finalChildren = cloneElement(finalChildren, { ref })\n    } catch {\n      //ok\n    }\n  }\n\n  const stateRef = useRef({\n    hasEverThemed: false,\n  })\n\n  return getThemedChildren(\n    themeState,\n    finalChildren,\n    props,\n    isRoot,\n    stateRef,\n    passThrough\n  )\n})\n\nTheme['avoidForwardRef'] = true\n\nexport function getThemedChildren(\n  themeState: ThemeState,\n  children: any,\n  props: ThemeComponentPropsOnly,\n  isRoot = false,\n  stateRef: MutableRefObject<{ hasEverThemed?: boolean | 'wrapped' }>,\n  passThrough = false\n) {\n  const { shallow, forceClassName } = props\n\n  // always be true if ever themed so we avoid re-parenting\n  const state = stateRef.current\n  let hasEverThemed = state.hasEverThemed\n\n  let shouldRenderChildrenWithTheme =\n    hasEverThemed || themeState.isNew || isRoot || hasThemeUpdatingProps(props)\n\n  if (process.env.NODE_ENV === 'development' && props.debug === 'visualize') {\n    children = (\n      <ThemeDebug themeState={themeState} themeProps={props}>\n        {children}\n      </ThemeDebug>\n    )\n  }\n\n  if (!shouldRenderChildrenWithTheme) {\n    return children\n  }\n\n  // from here on out we have to be careful not to re-parent\n  children = (\n    <ThemeStateContext.Provider value={themeState.id}>\n      {children}\n    </ThemeStateContext.Provider>\n  )\n\n  const { isInverse, name } = themeState\n  const requiresExtraWrapper = isInverse || forceClassName\n\n  // it only ever progresses from false => true => 'wrapped'\n  if (!state.hasEverThemed) {\n    state.hasEverThemed = true\n  }\n  if (\n    requiresExtraWrapper ||\n    // if the theme is exactly dark or light, its likely to change between dark/light\n    // and that would require wrapping which would re-parent, so to avoid re-parenting do this\n    themeState.name === 'dark' ||\n    themeState.name === 'light'\n  ) {\n    state.hasEverThemed = 'wrapped'\n  }\n\n  // each children of these children wont get the theme\n  if (shallow) {\n    if (!themeState.parentId) {\n      // they are doing shallow but didnt change actually change a theme theme?\n    } else {\n      const parentState = getThemeState(\n        themeState.isNew ? themeState.id : themeState.parentId\n      )\n      if (!parentState) throw new Error(`‼️010`)\n      children = Children.toArray(children).map((child) => {\n        return isValidElement(child)\n          ? passThrough\n            ? child\n            : cloneElement(\n                child,\n                undefined,\n                <Theme name={parentState.name}>{(child as any).props.children}</Theme>\n              )\n          : child\n      })\n    }\n  }\n\n  if (process.env.NODE_ENV === 'development') {\n    if (!passThrough && props.debug) {\n      console.warn(` getThemedChildren`, {\n        requiresExtraWrapper,\n        forceClassName,\n        themeState,\n        state,\n        themeSpanProps: getThemeClassNameAndColor(themeState, props, isRoot),\n      })\n    }\n  }\n\n  // this has to be after a few of the above items so it properly sets context (even if shallow set)\n  if (forceClassName === false) {\n    return children\n  }\n\n  if (isWeb) {\n    const baseStyle = props.contain ? inertContainedStyle : inertStyle\n    const { className = '', color } = passThrough\n      ? {}\n      : getThemeClassNameAndColor(themeState, props, isRoot)\n\n    children = (\n      <span\n        className={`${className} is_Theme`}\n        style={passThrough ? baseStyle : { color, ...baseStyle }}\n      >\n        {children}\n      </span>\n    )\n\n    // to prevent tree structure changes always render this if inverse is true or false\n    if (state.hasEverThemed === 'wrapped') {\n      // but still calculate if we need the classnames\n      const className = requiresExtraWrapper\n        ? `${\n            name.startsWith('light') ? 't_light' : name.startsWith('dark') ? 't_dark' : ''\n          } _dsp_contents`\n        : `_dsp_contents`\n      children = <span className={className}>{children}</span>\n    }\n\n    return children\n  }\n\n  return children\n}\n\nconst inertStyle = {\n  display: 'contents',\n}\n\nconst inertContainedStyle = {\n  display: 'contents',\n  contain: 'strict',\n}\n\nconst empty = { className: '', color: undefined }\n\nfunction getThemeClassNameAndColor(\n  themeState: ThemeState,\n  props: ThemeProps,\n  isRoot = false\n) {\n  if (!themeState.isNew && !props.forceClassName) {\n    return empty\n  }\n\n  // in order to provide currentColor, set color by default\n  const themeColor =\n    themeState?.theme && themeState.isNew ? variableToString(themeState.theme.color) : ''\n\n  const style = themeColor\n    ? {\n        color: themeColor,\n      }\n    : undefined\n\n  const themeClassName = themeState.name.replace(schemePrefix, '')\n\n  // Build full hierarchy of theme classes for CSS variable inheritance\n  // Examples:\n  // - \"red_surface1\" → \"t_red t_red_surface1\"\n  // - \"green_active_Button\" → \"t_green t_green_active t_green_active_Button\"\n  const themeNameParts = themeClassName.split('_')\n  let themeClasses = `t_${themeClassName}`\n\n  if (themeNameParts.length > 1) {\n    // Build full hierarchy for all multi-part themes (sub-themes, component themes, etc.)\n    // This enables CSS variable inheritance through all levels\n    const hierarchyClasses: string[] = []\n    for (let i = 1; i <= themeNameParts.length; i++) {\n      hierarchyClasses.push(`t_${themeNameParts.slice(0, i).join('_')}`)\n    }\n    themeClasses = hierarchyClasses.join(' ')\n  }\n\n  const className = `${isRoot ? '' : 't_sub_theme'} ${themeClasses}`\n\n  return { color: themeColor, className }\n}\n\nconst schemePrefix = /^(dark|light)_/\n","import * as React from 'react'\nimport { ClientOnlyContext } from './ClientOnly'\n\nexport { ClientOnly, ClientOnlyContext } from './ClientOnly'\n\nexport const useIsClientOnly = (): boolean => {\n  return React.useContext(ClientOnlyContext)\n}\n\nexport function useDidFinishSSR(): boolean {\n  const clientOnly = React.useContext(ClientOnlyContext)\n\n  if (clientOnly || process.env.TAMAGUI_TARGET === 'native') {\n    return true\n  }\n\n  return React.useSyncExternalStore(\n    subscribe,\n    () => true,\n    () => false\n  )\n}\n\nconst subscribe = () => () => {}\n\ntype FunctionOrValue<Value> = Value extends () => infer X ? X : Value\n\nexport function useClientValue<Value>(value?: Value): FunctionOrValue<Value> | undefined {\n  const done = useDidFinishSSR()\n  // @ts-expect-error this is fine but started to error in ts latest\n  return !done ? undefined : typeof value === 'function' ? value() : value\n}\n","import { createContext, useContext } from 'react'\n\nexport const ClientOnlyContext: React.Context<boolean> = createContext(false)\n\nexport const ClientOnly = ({\n  children,\n  enabled,\n}: {\n  children: any\n  enabled?: boolean\n}): React.ReactNode => {\n  const existingValue = useContext(ClientOnlyContext)\n  return (\n    <ClientOnlyContext.Provider value={enabled ?? existingValue}>\n      {children}\n    </ClientOnlyContext.Provider>\n  )\n}\n","import { useDidFinishSSR } from '@tamagui/use-did-finish-ssr'\nimport { useEffect } from 'react'\nimport { createPortal } from 'react-dom'\nimport { getThemeState } from '../hooks/useThemeState'\nimport type { ThemeProps, ThemeState } from '../types'\n\nlet node\n\nexport function ThemeDebug({\n  themeState,\n  themeProps,\n  children,\n}: {\n  themeState: ThemeState\n  themeProps: ThemeProps\n  children: any\n}) {\n  if (process.env.NODE_ENV === 'development') {\n    const isHydrated = useDidFinishSSR()\n\n    if (process.env.NODE_ENV === 'development' && typeof document !== 'undefined') {\n      if (!node) {\n        node = document.createElement('div')\n        node.style.height = '200px'\n        node.style.overflowY = 'scroll'\n        node.style.position = 'fixed'\n        node.style.zIndex = 10000000\n        node.style.bottom = '30px'\n        node.style.left = '30px'\n        node.style.right = '30px'\n        node.style.display = 'flex'\n        node.style.border = '1px solid #888'\n        node.style.flexDirection = 'row'\n        node.style.background = 'var(--background)'\n      }\n    }\n\n    useEffect(() => {\n      document.body.appendChild(node)\n    }, [])\n\n    if (themeProps['disable-child-theme'] || !isHydrated) {\n      return children\n    }\n\n    const parentState = themeState.parentId ? getThemeState(themeState.parentId) : null\n\n    // hsla(0, 0%, 9%, 1)\n\n    return (\n      <>\n        {createPortal(\n          <code\n            style={{\n              whiteSpace: 'pre',\n              maxWidth: 250,\n              overflow: 'auto',\n              padding: 5,\n            }}\n          >\n            &lt;Theme {themeState.id} /&gt;&nbsp;\n            {JSON.stringify(\n              {\n                name: themeState.name,\n                color1: themeState.theme.color1.val,\n                parentId: themeState.parentId,\n                // inverses: themeState.inverses,\n                isNew: themeState.isNew,\n                themeProps: {\n                  name: themeProps.name,\n                  componentName: themeProps.componentName,\n                  reset: themeProps.reset,\n                },\n                parentState: {\n                  name: parentState?.name,\n                  isNew: parentState?.isNew,\n                },\n              },\n              null,\n              2\n            )}\n          </code>,\n          node\n        )}\n\n        <div style={{ color: 'red' }}>{themeState.id}</div>\n\n        {children}\n      </>\n    )\n  }\n  return children\n}\n\nThemeDebug['displayName'] = 'ThemeDebug'\n","import { StyleObjectIdentifier, StyleObjectRules } from '@tamagui/helpers'\nimport type { StyleObject } from '../types'\n\n// turns out this is pretty slow, creating a bunch of extra tags...\n\nexport function getStyleTags(styles: StyleObject[]) {\n  if (process.env.TAMAGUI_TARGET !== 'native') {\n    if (styles.length) {\n      return (\n        <>\n          {styles.map((styleObject) => {\n            const identifier = styleObject[StyleObjectIdentifier]\n            return (\n              <style\n                key={identifier}\n                // @ts-ignore\n                href={`t_${identifier}`}\n                // @ts-ignore\n                precedence=\"default\"\n                // we remove after first render in favor of inserting to a global stylesheet (faster)\n                suppressHydrationWarning\n              >\n                {styleObject[StyleObjectRules].join('\\n')}\n              </style>\n            )\n          })}\n        </>\n      )\n    }\n  }\n}\n","import { isServer, isWeb } from '@tamagui/constants'\nimport { useCreateShallowSetState } from '@tamagui/is-equal-shallow'\nimport { useDidFinishSSR, useIsClientOnly } from '@tamagui/use-did-finish-ssr'\nimport { useRef, useState } from 'react'\nimport { getSetting } from '../config'\nimport {\n  defaultComponentState,\n  defaultComponentStateMounted,\n  defaultComponentStateShouldEnter,\n} from '../defaultComponentState'\nimport { isObj } from '../helpers/isObj'\nimport { log } from '../helpers/log'\nimport type {\n  ComponentContextI,\n  StaticConfig,\n  TamaguiComponentState,\n  TamaguiComponentStateRef,\n  TamaguiInternalConfig,\n  TextProps,\n  UseAnimationHook,\n} from '../types'\nimport type { ViewProps } from '../views/View'\n\nexport const useComponentState = (\n  props: ViewProps | TextProps | Record<string, any>,\n  animationDriver: ComponentContextI['animationDriver'],\n  staticConfig: StaticConfig,\n  config: TamaguiInternalConfig\n) => {\n  const isHydrated = useDidFinishSSR()\n  const needsHydration = !useIsClientOnly()\n\n  const useAnimations = animationDriver?.isStub\n    ? undefined\n    : (animationDriver?.useAnimations as UseAnimationHook | undefined)\n\n  const { isHOC } = staticConfig\n\n  const stateRef = useRef<TamaguiComponentStateRef>(\n    // performance: avoid creating object every render\n    undefined as unknown as TamaguiComponentStateRef\n  )\n\n  if (!stateRef.current) {\n    stateRef.current = {\n      startedUnhydrated: needsHydration && !isHydrated,\n    }\n  }\n\n  // after we get states mount we need to turn off isAnimated for server side\n  const hasAnimationProp = Boolean(\n    (!isHOC && 'transition' in props) ||\n    (props.style && hasAnimatedStyleValue(props.style))\n  )\n\n  // for backwards compat, derive from supportsCSS if new props not set\n  const inputStyle =\n    animationDriver?.inputStyle ?? (animationDriver?.supportsCSS ? 'css' : 'inline')\n  const supportsCSS = inputStyle === 'css'\n  const curStateRef = stateRef.current\n\n  if (!needsHydration && hasAnimationProp) {\n    curStateRef.hasAnimated = true\n  }\n\n  const willBeAnimatedClient = (() => {\n    const next = !!(hasAnimationProp && !isHOC && useAnimations)\n    return Boolean(next || curStateRef.hasAnimated)\n  })()\n\n  const willBeAnimated = !isServer && willBeAnimatedClient\n\n  // once animated, always animated to preserve hooks / vdom structure\n  if (willBeAnimated && !curStateRef.hasAnimated) {\n    curStateRef.hasAnimated = true\n  }\n\n  const { disableClassName } = props\n\n  // HOOK\n  const presence =\n    (!isHOC &&\n      willBeAnimated &&\n      props['animatePresence'] !== false &&\n      animationDriver?.usePresence?.()) ||\n    null\n\n  const presenceState = presence?.[2]\n  const isExiting = presenceState?.isPresent === false\n  const isEntering = presenceState?.isPresent === true && presenceState.initial !== false\n\n  const hasEnterStyle = !!props.enterStyle\n\n  const hasAnimationThatNeedsHydrate =\n    hasAnimationProp && !isHydrated && (animationDriver?.isReactNative || !supportsCSS)\n\n  const canImmediatelyEnter = hasEnterStyle || isEntering\n\n  // this can be conditional because its only ever needed with animations\n  const shouldEnter =\n    !isHOC &&\n    (hasEnterStyle ||\n      isEntering ||\n      hasAnimationThatNeedsHydrate ||\n      // disableClassName doesnt work server side, only client, so needs hydrate\n      // this is just for a better ux, supports css variables for light/dark, media queries, etc\n      disableClassName)\n\n  // two stage enter: because we switch from css driver to spring driver\n  //   - first render: render to match server with css driver\n  //   - second render: state.unmounted = should-enter, still rendering the initial,\n  //     non-entered state but now with the spring animation driver\n\n  const initialState = shouldEnter\n    ? // on the very first render we switch all spring animation drivers to css rendering\n      // this is because we need to use css variables, which they don't support to do proper SSR\n      // without flickers of the wrong colors.\n      // but once we do that initial hydration and we are in client side rendering mode,\n      // we can avoid the extra re-render on mount\n      canImmediatelyEnter\n      ? defaultComponentStateShouldEnter\n      : defaultComponentState\n    : defaultComponentStateMounted\n\n  // will be nice to deprecate half of these:\n  const disabled = isDisabled(props)\n\n  if (disabled != null) {\n    initialState.disabled = disabled\n  }\n\n  // HOOK\n  const states = useState<TamaguiComponentState>(initialState)\n\n  const state = props.forceStyle ? { ...states[0], [props.forceStyle]: true } : states[0]\n  const setState = states[1]\n\n  // apply states we never updated from avoiding re-renders in animation driver\n  // unsafe yea yea\n  // if (stateRef.current.nextComponentState) {\n  //   Object.assign(state, stateRef.current.nextComponentState)\n  // }\n\n  // only web server + initial client render run this when not hydrated:\n  let isAnimated = willBeAnimated\n  if (isWeb && hasAnimationThatNeedsHydrate && !staticConfig.isHOC && !isHydrated) {\n    isAnimated = false\n    curStateRef.willHydrate = true\n  }\n\n  // immediately update disabled state and reset component state\n  if (disabled !== state.disabled) {\n    // if disabled remove all press/focus/hover states\n    if (disabled) {\n      Object.assign(state, defaultComponentStateMounted)\n    }\n    state.disabled = disabled\n    setState((_) => ({ ...state }))\n  }\n\n  const groupName = props.group as any as string | undefined\n\n  const setStateShallow = useCreateShallowSetState(setState, props.debug)\n\n  // set enter/exit variants onto our new props object\n  if (presenceState && isAnimated && isHydrated && staticConfig.variants) {\n    if (process.env.NODE_ENV === 'development' && props.debug === 'verbose') {\n      console.warn(`has presenceState ${JSON.stringify(presenceState)}`)\n    }\n    const { enterVariant, exitVariant, enterExitVariant, custom } = presenceState\n    if (isObj(custom)) {\n      Object.assign(props, custom)\n    }\n    const exv = exitVariant ?? enterExitVariant\n    const env = enterVariant ?? enterExitVariant\n    if (state.unmounted && env && staticConfig.variants[env]) {\n      if (process.env.NODE_ENV === 'development' && props.debug === 'verbose') {\n        console.warn(`Animating presence ENTER \"${env}\"`)\n      }\n      props[env] = true\n    } else if (isExiting && exv) {\n      if (process.env.NODE_ENV === 'development' && props.debug === 'verbose') {\n        console.warn(`Animating presence EXIT \"${exv}\"`)\n      }\n      props[exv] = exitVariant !== enterExitVariant\n    }\n  }\n\n  let noClass = !isWeb || !!props.forceStyle\n\n  if (!isHydrated) {\n    noClass = false\n  } else {\n    // on server for SSR and animation compat added the && isHydrated but perhaps we want\n    // disableClassName=\"until-hydrated\" to be more straightforward\n    // see issue if not, Button sets disableClassName to true <Button transition=\"\" /> with\n    // the react-native driver errors because it tries to animate var(--color) to rbga(..)\n    // no matter what if fully unmounted or on the server we use className\n    // only once we hydrate do we switch to spring animation drivers or disableClassName etc\n    if (isWeb && isHydrated) {\n      const isAnimatedAndHydrated = isAnimated && isHydrated\n\n      const isClassNameDisabled =\n        !staticConfig.acceptsClassName && (getSetting('disableSSR') || !state.unmounted)\n\n      const isDisabledManually = disableClassName && !state.unmounted\n\n      if (\n        // Only disable className for animation drivers that need inline styles\n        (isAnimatedAndHydrated && !animationDriver?.classNameAnimation) ||\n        isDisabledManually ||\n        isClassNameDisabled\n      ) {\n        noClass = true\n\n        if (process.env.NODE_ENV === 'development' && props.debug === 'verbose') {\n          log(`avoiding className`, {\n            isAnimatedAndHydrated,\n            isDisabledManually,\n            isClassNameDisabled,\n          })\n        }\n      }\n    }\n  }\n\n  return {\n    startedUnhydrated: curStateRef.startedUnhydrated,\n    curStateRef,\n    disabled,\n    groupName,\n    hasAnimationProp,\n    hasEnterStyle,\n    isAnimated,\n    isExiting,\n    isHydrated,\n    presence,\n    presenceState,\n    setState,\n    setStateShallow,\n    noClass,\n    state,\n    stateRef,\n    supportsCSS,\n    willBeAnimated,\n    willBeAnimatedClient,\n  }\n}\n\nfunction hasAnimatedStyleValue(style: object) {\n  return Object.keys(style).some((k) => {\n    const val = style[k]\n    return val && typeof val === 'object' && '_animation' in val\n  })\n}\n\nconst isDisabled = (props: any) => {\n  return (\n    props.disabled ||\n    props.passThrough ||\n    props.accessibilityState?.disabled ||\n    props['aria-disabled'] ||\n    props.accessibilityDisabled ||\n    false\n  )\n}\n","// via radix\n\nimport { composeRefs } from '@tamagui/compose-refs'\nimport { isWeb } from '@tamagui/constants'\nimport type { ReactNode } from 'react'\nimport { Children, cloneElement, forwardRef, isValidElement, memo } from 'react'\nimport { mergeSlotStyleProps } from '../helpers/mergeSlotStyleProps'\n\n/* -------------------------------------------------------------------------------------------------\n * Slot\n * -----------------------------------------------------------------------------------------------*/\n\ninterface SlotProps {\n  children: ReactNode\n}\n\nexport const Slot = memo(\n  forwardRef<any, SlotProps>(function Slot(props, forwardedRef) {\n    const { children, ...slotProps } = props\n\n    if (isValidElement(children)) {\n      const mergedProps = mergeSlotProps(children, slotProps)\n      return cloneElement(\n        children,\n        children.type['avoidForwardRef']\n          ? mergedProps\n          : {\n              ...mergedProps,\n              ref: composeRefs(forwardedRef, (children as any).props.ref),\n            }\n      )\n    }\n\n    return Children.count(children) > 1 ? Children.only(null) : null\n  })\n)\n\n/* -------------------------------------------------------------------------------------------------\n * Slottable\n * -----------------------------------------------------------------------------------------------*/\n\nexport const Slottable = ({ children }: { children: ReactNode }) => {\n  return <>{children}</>\n}\n\nSlottable['displayName'] = 'Slottable'\n\n/* ---------------------------------------------------------------------------------------------- */\n\nconst pressMap = isWeb\n  ? {\n      onPress: 'onClick',\n      onPressOut: 'onMouseUp',\n      onPressIn: 'onMouseDown',\n    }\n  : {}\n\nfunction mergeSlotProps(child: any, slotProps: Record<string, any>) {\n  const childProps = child.props\n  const isHTMLChild = typeof child.type === 'string'\n\n  // convert RN press events to web events for HTML children\n  if (isHTMLChild) {\n    for (const key in pressMap) {\n      if (key in slotProps) {\n        slotProps[pressMap[key]] = slotProps[key]\n        delete slotProps[key]\n      }\n    }\n  }\n\n  // merge slot props with child props (child wins via overlay)\n  const merged = mergeSlotStyleProps(slotProps, childProps)\n\n  // convert child's RN press events to web events after merge\n  if (isHTMLChild) {\n    for (const key in pressMap) {\n      if (key in merged) {\n        merged[pressMap[key]] = merged[key]\n        delete merged[key]\n      }\n    }\n  }\n\n  return merged\n}\n","import type { FontWeightValues, GenericFont } from './types'\n\nconst fontWeights: FontWeightValues[] = [\n  '100',\n  '200',\n  '300',\n  '400',\n  '500',\n  '600',\n  '700',\n  '800',\n  '900',\n]\n\nconst processSection = <T>(\n  section: string | Record<string, T>,\n  keys: string[],\n  defaultValue?: any\n): string | Record<string, T> => {\n  if (typeof section === 'string') return section\n\n  const sectionKeys = Object.keys(section)\n  let fillValue = section[sectionKeys[0]]\n\n  return Object.fromEntries(\n    [...new Set([...keys, ...sectionKeys])].map((key) => {\n      const value = section[key] ?? defaultValue ?? fillValue\n      fillValue = value\n      defaultValue = value\n      return [key, value]\n    })\n  )\n}\n\nexport const createFont = <A extends GenericFont>(font: A): A => {\n  const sizeKeys = Object.keys(font.size || {})\n  const processedFont = Object.fromEntries(\n    Object.entries(font).map(([key, section]) => {\n      return [\n        key,\n        processSection(\n          section as any,\n          key === 'face' ? fontWeights : sizeKeys,\n          key === 'face' ? { normal: font.family } : undefined\n        ),\n      ]\n    })\n  )\n  return Object.freeze(processedFont) as A\n}\n","import { isWeb } from '@tamagui/constants'\nimport { simpleHash } from '@tamagui/helpers'\nimport { createVariable, isVariable } from './createVariable'\nimport type { Variable } from './types'\n\ntype DeepTokenObject<Val extends string | number = any> = {\n  [key: string]: Val | DeepTokenObject<Val>\n}\n\nexport type DeepVariableObject<A extends DeepTokenObject> = {\n  [Key in keyof A]: A[Key] extends string | number\n    ? Variable<A[Key]>\n    : A[Key] extends DeepTokenObject\n      ? DeepVariableObject<A[Key]>\n      : never\n}\n\nconst cache = new WeakMap()\n\n// recursive...\n\nexport const createVariables = <A extends DeepTokenObject>(\n  tokens: A,\n  parentPath = '',\n  isFont = false\n): DeepVariableObject<A> => {\n  if (cache.has(tokens)) return tokens\n\n  const res: any = {}\n  let i = 0\n  for (let keyIn in tokens) {\n    i++\n    const val = tokens[keyIn]\n    const isPrefixed = keyIn[0] === '$'\n    const keyWithPrefix = isPrefixed ? keyIn : `$${keyIn}`\n    const key = isPrefixed ? keyWithPrefix.slice(1) : keyIn\n\n    if (isVariable(val)) {\n      res[key] = val\n      continue\n    }\n    const niceKey = simpleHash(key, 1000)\n    const name =\n      parentPath && parentPath !== 't-color' ? `${parentPath}-${niceKey}` : `c-${niceKey}`\n\n    // Handle px() helper objects\n    if (val && typeof val === 'object' && 'needsPx' in val && 'val' in val) {\n      const finalValue = createVariable({\n        val: val.val,\n        name,\n        key: keyWithPrefix,\n      })\n      // Only set needsPx flag on web platform, avoid on native\n      if (isWeb) {\n        finalValue.needsPx = val.needsPx\n      }\n      res[key] = finalValue\n      continue\n    }\n\n    if (val && typeof val === 'object') {\n      // recurse\n      res[key] = createVariables(\n        tokens[key] as any,\n        name,\n        false /* note: don't pass isFont down, we want to avoid it past the first level */\n      )\n      continue\n    }\n    const finalValue = isVariable(val)\n      ? val\n      : createVariable({ val, name, key: keyWithPrefix })\n    res[key] = finalValue\n  }\n\n  cache.set(res, true)\n  return res\n}\n","import { createVariables } from './createVariables'\nimport type { CreateTokens, Variable } from './types'\n\nexport function createTokens<T extends CreateTokens>(tokens: T): MakeTokens<T> {\n  return createVariables(tokens, process.env.TAMAGUI_TOKEN_PREFIX ?? 't') as any\n}\n\ntype NormalizeTokens<A, Type = A[keyof A]> = {\n  [Key in keyof A as Key extends number ? `${Key}` : Key]: Variable<Type>\n}\n\ntype MakeTokens<T extends CreateTokens> = T extends {\n  color?: infer E\n  space?: infer F\n  size?: infer G\n  radius?: infer H\n  zIndex?: infer J\n}\n  ? {\n      color: NormalizeTokens<E, string>\n      space: NormalizeTokens<F, number>\n      size: NormalizeTokens<G, number>\n      radius: NormalizeTokens<H, number>\n      zIndex: NormalizeTokens<J, number>\n    } & Omit<\n      {\n        [key in keyof T]: NormalizeTokens<T[key]>\n      },\n      'color' | 'space' | 'size' | 'radius' | 'zIndex'\n    >\n  : never\n","import type { StaticConfig } from './types'\n\nconst ReactNativeStaticConfigs = new WeakMap<any, Partial<StaticConfig> | null>()\n\nexport function getReactNativeConfig(Component: any) {\n  if (!Component) return\n\n  if (process.env.TAMAGUI_TARGET === 'native') {\n    if (Component.propTypes?.onTextInput || Component.propTypes?.onChangeText) {\n      return RNConfigs.TextInput\n    }\n    if (Component.getSizeWithHeaders) {\n      return RNConfigs.Image\n    }\n    if (Component.propTypes?.textBreakStrategy) {\n      return RNConfigs.Text\n    }\n\n    // can optimize plain View or Text to not be react native specific\n\n    // can assume everything else is react native on native\n    return RNConfigs.default\n  }\n  if (Component.getSize && Component.prefetch) {\n    return RNConfigs.Image\n  }\n  if (Component.displayName === 'Text' && Component.render) {\n    return RNConfigs.Text\n  }\n  if (\n    Component.render &&\n    (Component.displayName === 'ScrollView' || Component.displayName === 'View')\n  ) {\n    return RNConfigs.default\n  }\n  if (Component.State?.blurTextInput) {\n    return RNConfigs.TextInput\n  }\n\n  return ReactNativeStaticConfigs.get(Component)\n}\n\nconst RNConfigs = {\n  Image: {\n    isReactNative: true,\n    inlineProps: new Set(['src', 'width', 'height']),\n  },\n  Text: {\n    isReactNative: true,\n    isText: true,\n  },\n  TextInput: {\n    isReactNative: true,\n    isInput: true,\n    isText: true,\n  },\n  default: {\n    isReactNative: true,\n  },\n} satisfies Record<string, Partial<StaticConfig>>\n","import type { GenericVariantDefinitions } from '../types'\n\n// deep merge variants\n// except for functions which override any parents\n\nexport const mergeVariants = (\n  parentVariants: GenericVariantDefinitions,\n  ourVariants: GenericVariantDefinitions,\n  level = 0\n) => {\n  const variants = {}\n\n  for (const key in ourVariants) {\n    const parentVariant = parentVariants?.[key]\n    const ourVariant = ourVariants[key]\n    if (!parentVariant || typeof ourVariant === 'function') {\n      variants[key] = ourVariant\n    } else if (parentVariant && !ourVariant) {\n      variants[key] = parentVariant[key]\n    } else {\n      if (level === 0) {\n        variants[key] = mergeVariants(\n          parentVariant as Record<string, any>,\n          ourVariant as Record<string, any>,\n          level + 1\n        )\n      } else {\n        variants[key] = {\n          ...parentVariant,\n          ...ourVariant,\n        }\n      }\n    }\n  }\n\n  return {\n    ...parentVariants,\n    ...variants,\n  }\n}\n","import type {\n  AnchorHTMLAttributes,\n  ButtonHTMLAttributes,\n  FormHTMLAttributes,\n  HTMLAttributes,\n  InputHTMLAttributes,\n  LabelHTMLAttributes,\n  SelectHTMLAttributes,\n  TextareaHTMLAttributes,\n} from 'react'\nimport { createComponent } from './createComponent'\nimport { mergeVariants } from './helpers/mergeVariants'\nimport type { GetRef } from './interfaces/GetRef'\nimport { getReactNativeConfig } from './setupReactNative'\nimport type {\n  GetBaseStyles,\n  GetNonStyledProps,\n  GetStaticConfig,\n  GetStyledVariants,\n  GetVariantValues,\n  InferStyleProps,\n  InferStyledProps,\n  StackStyle,\n  StackStyleBase,\n  StaticConfig,\n  StaticConfigPublic,\n  StylableComponent,\n  StyledContext,\n  TamaDefer,\n  TamaguiComponent,\n  TamaguiComponentPropsBase,\n  TextStyle,\n  TextStylePropsBase,\n  ThemeValueByCategory,\n  ThemeValueGet,\n  VariantDefinitions,\n  VariantSpreadFunction,\n} from './types'\nimport type { Text } from './views/Text'\n\ntype AreVariantsUndefined<Variants> =\n  // because we pass in the Generic variants which for some reason has this :)\n  Required<Variants> extends { _isEmpty: 1 } ? true : false\n\ntype GetVariantAcceptedValues<V> = V extends object\n  ? {\n      [Key in keyof V]?: V[Key] extends VariantSpreadFunction<any, infer Val>\n        ? Val\n        : GetVariantValues<keyof V[Key]>\n    }\n  : undefined\n\n// ---- HTML element support for styledHtml('tagName') ----\n\n// text-like elements use TextStylePropsBase\ntype TextLikeElements =\n  | 'a'\n  | 'abbr'\n  | 'b'\n  | 'bdi'\n  | 'bdo'\n  | 'cite'\n  | 'code'\n  | 'data'\n  | 'del'\n  | 'dfn'\n  | 'em'\n  | 'i'\n  | 'ins'\n  | 'kbd'\n  | 'label'\n  | 'mark'\n  | 'q'\n  | 's'\n  | 'samp'\n  | 'small'\n  | 'span'\n  | 'strong'\n  | 'sub'\n  | 'sup'\n  | 'time'\n  | 'u'\n  | 'var'\n\n// props that conflict with tamagui style props\ntype ConflictingHTMLProps =\n  | 'color'\n  | 'display'\n  | 'height'\n  | 'width'\n  | 'size'\n  | 'left'\n  | 'right'\n  | 'top'\n  | 'bottom'\n  | 'translate'\n  | 'content'\n\n// map HTML tag to its specific attributes\ntype HTMLElementSpecificProps<T extends keyof HTMLElementTagNameMap> = T extends 'a'\n  ? Omit<AnchorHTMLAttributes<HTMLAnchorElement>, ConflictingHTMLProps>\n  : T extends 'button'\n    ? Omit<ButtonHTMLAttributes<HTMLButtonElement>, ConflictingHTMLProps>\n    : T extends 'input'\n      ? Omit<InputHTMLAttributes<HTMLInputElement>, ConflictingHTMLProps>\n      : T extends 'select'\n        ? Omit<SelectHTMLAttributes<HTMLSelectElement>, ConflictingHTMLProps>\n        : T extends 'textarea'\n          ? Omit<TextareaHTMLAttributes<HTMLTextAreaElement>, ConflictingHTMLProps>\n          : T extends 'form'\n            ? Omit<FormHTMLAttributes<HTMLFormElement>, ConflictingHTMLProps>\n            : T extends 'label'\n              ? Omit<LabelHTMLAttributes<HTMLLabelElement>, ConflictingHTMLProps>\n              : Omit<HTMLAttributes<HTMLElement>, ConflictingHTMLProps>\n\n// base style props based on element type\n// use StackStyle/TextStyle to get token support (WithThemeShorthandsPseudosMedia)\ntype HTMLElementStyleBase<T extends keyof HTMLElementTagNameMap> =\n  T extends TextLikeElements ? TextStyle : StackStyle\n\n// runtime check for text-like elements\nconst textLikeElements = new Set<string>([\n  'a',\n  'abbr',\n  'b',\n  'bdi',\n  'bdo',\n  'cite',\n  'code',\n  'data',\n  'del',\n  'dfn',\n  'em',\n  'i',\n  'ins',\n  'kbd',\n  'label',\n  'mark',\n  'q',\n  's',\n  'samp',\n  'small',\n  'span',\n  'strong',\n  'sub',\n  'sup',\n  'time',\n  'u',\n  'var',\n])\n\n/**\n * styledHtml() for HTML element tags like 'a', 'button', 'div', etc.\n * Automatically provides element-specific props (href for anchors, type for buttons, etc.)\n *\n * @example\n * const StyledAnchor = styledHtml('a', {\n *   color: '$blue10',\n *   textDecorationLine: 'underline',\n * })\n * // StyledAnchor now accepts `href` prop with proper typing\n * <StyledAnchor href=\"/path\">Link</StyledAnchor>\n */\nexport function styledHtml<\n  Tag extends keyof HTMLElementTagNameMap,\n  Variants extends VariantDefinitions<any, any> | undefined = undefined,\n>(\n  tag: Tag,\n  options?: Partial<HTMLElementStyleBase<Tag>> & {\n    name?: string\n    variants?: Variants\n    defaultVariants?: GetVariantAcceptedValues<NonNullable<Variants>>\n    context?: StyledContext\n  }\n) {\n  type StyleBase = HTMLElementStyleBase<Tag>\n  type HTMLProps = HTMLElementSpecificProps<Tag>\n  type VariantProps = Variants extends undefined\n    ? {}\n    : AreVariantsUndefined<NonNullable<Variants>> extends true\n      ? {}\n      : GetVariantAcceptedValues<NonNullable<Variants>>\n\n  const isText = textLikeElements.has(tag)\n  const { variants, name, defaultVariants, context, ...defaultProps } = options || {}\n\n  const conf: Partial<StaticConfig> = {\n    Component: tag as any,\n    variants: variants as any,\n    defaultProps: defaultProps as any,\n    defaultVariants,\n    componentName: name,\n    isReactNative: false,\n    isText,\n    acceptsClassName: true,\n    context,\n  }\n\n  if (defaultProps['children'] || context) {\n    conf.neverFlatten = true\n  }\n\n  const component = createComponent(conf)\n\n  return component as any as TamaguiComponent<\n    TamaDefer,\n    HTMLElementTagNameMap[Tag],\n    TamaguiComponentPropsBase & HTMLProps,\n    StyleBase,\n    VariantProps,\n    {}\n  >\n}\n\n/**\n * styled() for creating Tamagui components from other components.\n */\nfunction styled<\n  ParentComponent extends StylableComponent,\n  StyledConfig extends StaticConfigPublic,\n  Variants extends VariantDefinitions<ParentComponent, StyledConfig>,\n>(\n  ComponentIn: ParentComponent,\n  // this should be Partial<GetProps<ParentComponent>> but causes excessively deep type issues\n  options?: Partial<InferStyledProps<ParentComponent, StyledConfig>> & {\n    name?: string\n    variants?: Variants | undefined\n    defaultVariants?: GetVariantAcceptedValues<Variants>\n    context?: StyledContext\n    render?: string | React.ReactElement\n  },\n  config?: StyledConfig\n) {\n  // do type stuff at top for easier readability\n\n  // get parent props without pseudos and medias so we can rebuild both with new variants\n  // get parent props without pseudos and medias so we can rebuild both with new variants\n  type ParentNonStyledProps = GetNonStyledProps<ParentComponent>\n  type ParentStylesBase = GetBaseStyles<ParentComponent, StyledConfig>\n  type ParentVariants = GetStyledVariants<ParentComponent>\n\n  type OurVariantProps =\n    AreVariantsUndefined<Variants> extends true ? {} : GetVariantAcceptedValues<Variants>\n  type MergedVariants =\n    AreVariantsUndefined<Variants> extends true\n      ? ParentVariants\n      : AreVariantsUndefined<ParentVariants> extends true\n        ? Omit<OurVariantProps, '_isEmpty'>\n        : {\n            // exclude _isEmpty as it no longer is empty\n            [Key in Exclude<keyof ParentVariants | keyof OurVariantProps, '_isEmpty'>]?:\n              | (Key extends keyof ParentVariants ? ParentVariants[Key] : undefined)\n              | (Key extends keyof OurVariantProps ? OurVariantProps[Key] : undefined)\n          }\n\n  type Accepted = StyledConfig['accept']\n  type CustomTokenProps =\n    Accepted extends Record<string, any>\n      ? {\n          [Key in keyof Accepted]?:\n            | (Key extends keyof ParentStylesBase ? ParentStylesBase[Key] : never)\n            | (Accepted[Key] extends 'style'\n                ? Partial<InferStyleProps<ParentComponent, StyledConfig>>\n                : Accepted[Key] extends 'textStyle'\n                  ? Partial<InferStyleProps<typeof Text, StyledConfig>>\n                  : ThemeValueByCategory<Accepted[Key]>)\n        }\n      : {}\n\n  /**\n   * de-opting a bit of type niceness because were hitting depth issues too soon\n   * before we had:\n   *\n   * type OurPropsBase = OurStylesBase & PseudoProps<Partial<OurStylesBase>>\n   * and then below in type Props you would remove the PseudoProps line\n   * that would give you nicely merged pseudo sub-styles but its just too much for TS\n   * so now pseudos wont be nicely typed inside media queries, but at least we can nest\n   */\n\n  type StyledComponent = TamaguiComponent<\n    TamaDefer,\n    GetRef<ParentComponent>,\n    ParentNonStyledProps,\n    Accepted extends Record<string, any>\n      ? ParentStylesBase & CustomTokenProps\n      : ParentStylesBase,\n    MergedVariants,\n    GetStaticConfig<ParentComponent, StyledConfig>\n  >\n\n  // validate not using a variant over an existing valid style\n  if (process.env.NODE_ENV !== 'production') {\n    if (!ComponentIn) {\n      throw new Error(`No component given to styled()`)\n    }\n  }\n\n  const parentStaticConfig = ComponentIn['staticConfig'] as StaticConfig | undefined\n\n  const isPlainStyledComponent =\n    !!parentStaticConfig &&\n    !(parentStaticConfig.isReactNative || parentStaticConfig.isHOC)\n\n  const isNonStyledHOC = parentStaticConfig?.isHOC && !parentStaticConfig?.isStyledHOC\n\n  let Component: any =\n    isNonStyledHOC || isPlainStyledComponent\n      ? ComponentIn\n      : parentStaticConfig?.Component || ComponentIn\n\n  const reactNativeConfig = !parentStaticConfig\n    ? getReactNativeConfig(Component)\n    : undefined\n\n  const isReactNative = Boolean(\n    reactNativeConfig || config?.isReactNative || parentStaticConfig?.isReactNative\n  )\n\n  const staticConfigProps = (() => {\n    let { variants, name, defaultVariants, context, ...defaultProps } = options || {}\n\n    let parentDefaultVariants\n    let parentDefaultProps\n\n    if (parentStaticConfig) {\n      const avoid = parentStaticConfig.isHOC && !parentStaticConfig.isStyledHOC\n      if (!avoid) {\n        const pdp = parentStaticConfig.defaultProps\n\n        // apply parent props only if not already defined, they are lesser specificity\n        for (const key in pdp) {\n          const val = pdp[key]\n          if (parentStaticConfig.defaultVariants) {\n            if (key in parentStaticConfig.defaultVariants) {\n              // ensure we don't add it if its also in our default variants so we keep the order!\n              if (!defaultVariants || !(key in defaultVariants)) {\n                parentDefaultVariants ||= {}\n                parentDefaultVariants[key] = val\n              }\n            }\n          }\n          if (!(key in defaultProps) && (!defaultVariants || !(key in defaultVariants))) {\n            parentDefaultProps ||= {}\n            parentDefaultProps[key] = pdp[key]\n          }\n        }\n        if (parentStaticConfig.variants) {\n          // @ts-expect-error\n          variants = mergeVariants(parentStaticConfig.variants, variants)\n        }\n      }\n    }\n\n    // applies everything in the right order! order is important\n    if (parentDefaultProps || defaultVariants || parentDefaultVariants) {\n      defaultProps = {\n        ...parentDefaultProps,\n        ...parentDefaultVariants,\n        ...defaultProps,\n        ...defaultVariants,\n      }\n    }\n\n    if (parentStaticConfig?.isHOC) {\n      // if HOC we map name => componentName as we have a difference in how we name prop vs styled() there\n      if (name) {\n        // @ts-ignore\n        defaultProps.componentName = name\n      }\n    }\n\n    const isText = Boolean(config?.isText || parentStaticConfig?.isText)\n\n    const acceptsClassName =\n      config?.acceptsClassName ??\n      (isPlainStyledComponent ||\n        isReactNative ||\n        (parentStaticConfig?.isHOC && parentStaticConfig?.acceptsClassName))\n\n    const conf: Partial<StaticConfig> = {\n      ...parentStaticConfig,\n      ...config,\n      ...(!isPlainStyledComponent && {\n        Component,\n      }),\n      // @ts-expect-error\n      variants,\n      defaultProps,\n      defaultVariants,\n      componentName: name || parentStaticConfig?.componentName,\n      isReactNative,\n      isText,\n      acceptsClassName,\n      context,\n      ...reactNativeConfig,\n      isStyledHOC: Boolean(parentStaticConfig?.isHOC),\n      parentStaticConfig,\n    }\n\n    // bail on non className views as well\n    if (defaultProps['children'] || !acceptsClassName || context) {\n      conf.neverFlatten = true\n    }\n\n    return conf\n  })()\n\n  const component = createComponent(staticConfigProps || {})\n\n  for (const key in ComponentIn) {\n    // dont inherit propTypes\n    if (key === 'propTypes') continue\n    if (key in component) continue\n    // @ts-expect-error assigning static properties over\n    component[key] = ComponentIn[key]\n  }\n\n  return component as any as StyledComponent\n}\n\n// sanity check types:\n\n// type YP = GetProps<typeof InputFrame>\n// type x = YP['onChangeText']\n// type x2 = YP['size']\n// const X = <InputFrame placeholder=\"red\" hoverStyle={{}} />\n\n// import { Stack } from './views/Stack'\n// const X = styled(Stack, {\n//   variants: {\n//     size: {\n//       '...size': (val) => {\n//         return {\n//           pointerEvents: 'auto'\n//         }\n//       }\n//     },\n//     disabled: {\n//       true: {\n//         alignContent: 'center',\n//         opacity: 0.5,\n//         pointerEvents: 'none',\n//       },\n//     },\n//   } as const\n// })\n\n// const TestStyleable = X.styleable<{ abc: 123 }>((props) => {\n//   return null\n// })\n\n// // type variants = GetStyledVariants<typeof X>\n// const y = <X disabled size=\"$10\" />\n\n// sanity check more complex types:\n\n// import { Paragraph } from '../../text/src/Paragraph'\n// import { Text } from './views/Text'\n// import { getFontSized } from '../../get-font-sized/src'\n// import { SizableText } from '../../text/src/SizableText'\n// const Text1 = styled(Text, {\n//   name: 'SizableText',\n//   fontFamily: '$body',\n\n//   variants: {\n//     size: getFontSized,\n//   } as const,\n\n//   defaultVariants: {\n//     size: '$true',\n//   },\n// })\n\n// const Test2 = styled(Text1, {\n//   render: 'p',\n//   userSelect: 'auto',\n//   color: '$color',\n// })\n\n// const Test3 = styled(Test2, {\n//   render: 'p',\n//   userSelect: 'auto',\n//   color: '$color',\n\n//   variants: {\n//     ork: {\n//       true: {}\n//     }\n//   }\n// })\n\n// const Test = styled(Paragraph, {\n//   render: 'p',\n//   userSelect: 'auto',\n//   color: '$color',\n\n//   variants: {\n//     someting: {\n//       true: {},\n//     },\n//   } as const,\n// })\n\n// type X = typeof Paragraph\n// type Props1 = GetProps<typeof Paragraph>\n// type z = typeof Text1\n// type ParentV = GetVariantProps<typeof Text1>\n// type Props = GetProps<typeof Test>\n\n// const y = <Test someting>sadad</Test>\n// const z = <Test3 someting=\"$true\" ork>sadad</Test3>\n\n//\n// merges variant types properly:\n\n// const OneVariant = styled(Stack, {\n//   variants: {\n//     variant: {\n//       test: { backgroundColor: 'gray' },\n//     },\n//   } as const,\n// })\n// const Second = styled(Stack, {\n//   variants: {\n//     variant: {\n//       simple: { backgroundColor: 'gray' },\n//       colorful: { backgroundColor: 'violet' },\n//     },\n//   } as const,\n// })\n// const TwoVariant = styled(OneVariant, {\n//   variants: {\n//     variant: {\n//       simple: { backgroundColor: 'gray' },\n//       colorful: { backgroundColor: 'violet' },\n//     },\n//   } as const,\n// })\n\n// type X = typeof OneVariant extends TamaguiComponent<any, any, any, infer V> ? V : any\n// type V = typeof Second extends TamaguiComponent<any, any, any, infer V> ? V : any\n\n// type V2 = VariantDefinitions<typeof OneVariant>\n\n// type R = typeof TwoVariant extends TamaguiComponent<any, any, any, infer V> ? V : any\n\n// type Keys = keyof X | keyof V\n// type Z = {\n//   [Key in Keys]: V[Key] | X[Key]\n// }\n\n// const a: Z = {\n//   variant: 'colorful',\n// }\n// const b: Z = {\n//   variant: 'simple',\n// }\n// const c: Z = {\n//   variant: 'invalid',\n// }\n\n// const y = <TwoVariant variant=\"colorful\" />\n\n// ---- styled.a, styled.div, styled.button, etc. API ----\n\ntype StyledHtmlFactory<Tag extends keyof HTMLElementTagNameMap> = <\n  Variants extends VariantDefinitions<any, any> | undefined = undefined,\n>(\n  options?: Partial<HTMLElementStyleBase<Tag>> & {\n    name?: string\n    variants?: Variants\n    defaultVariants?: GetVariantAcceptedValues<NonNullable<Variants>>\n    context?: StyledContext\n  }\n) => TamaguiComponent<\n  TamaDefer,\n  HTMLElementTagNameMap[Tag],\n  TamaguiComponentPropsBase & HTMLElementSpecificProps<Tag>,\n  HTMLElementStyleBase<Tag>,\n  Variants extends undefined\n    ? {}\n    : AreVariantsUndefined<NonNullable<Variants>> extends true\n      ? {}\n      : GetVariantAcceptedValues<NonNullable<Variants>>,\n  {}\n>\n\ntype StyledHtmlFactories = {\n  [K in keyof HTMLElementTagNameMap]: StyledHtmlFactory<K>\n}\n\n// use a proxy to make styled.a(), styled.div() etc work\nconst styledExport = new Proxy(styled as typeof styled & StyledHtmlFactories, {\n  get(target, prop: string) {\n    if (prop in target) {\n      return (target as any)[prop]\n    }\n    // return factory for HTML elements\n    return (options: any) => styledHtml(prop as keyof HTMLElementTagNameMap, options)\n  },\n})\n\nexport { styledExport as styled }\n","import { useIsomorphicLayoutEffect } from '@tamagui/constants'\nimport React from 'react'\nimport { getConfig } from '../config'\nimport { ComponentContext } from '../contexts/ComponentContext'\nimport { GroupContext } from '../contexts/GroupContext'\nimport { useSplitStyles } from '../helpers/getSplitStyles'\nimport { subscribeToContextGroup } from '../helpers/subscribeToContextGroup'\nimport type { SplitStyleProps, StaticConfig, ThemeParsed, UseMediaState } from '../types'\nimport type { ViewProps, ViewStyle } from '../views/View'\nimport { View } from '../views/View'\nimport { useComponentState } from './useComponentState'\nimport { mediaState } from '../helpers/mediaState'\nimport { useMedia } from './useMedia'\nimport { useThemeWithState } from './useTheme'\n\ntype UsePropsOptions = Pick<\n  SplitStyleProps,\n  'noExpand' | 'noNormalize' | 'noClass' | 'resolveValues'\n> & {\n  disableExpandShorthands?: boolean\n  forComponent?: { staticConfig: StaticConfig }\n  noClass?: boolean\n\n  /**\n   * Disable watching for media queries\n   */\n  noMedia?: boolean\n}\n\nexport type PropsWithoutMediaStyles<A> = {\n  // remove all media\n  [Key in keyof A as Key extends `$${string}` ? never : Key]?: A[Key]\n}\n\ntype PropsLikeObject = (ViewProps & Record<string, any>) | object\ntype StyleLikeObject = (ViewStyle & Record<string, any>) | object\n\n/**\n * Returns props and style as a single object, expanding and merging shorthands and media queries.\n *\n * Use sparingly, it will loop props and trigger re-render on all media queries you access.\n *\n * */\nexport function useProps<A extends PropsLikeObject>(\n  props: A,\n  opts?: UsePropsOptions\n): PropsWithoutMediaStyles<A> {\n  const [propsOut, styleOut] = usePropsAndStyle(props, {\n    ...opts,\n    noExpand: true,\n    noNormalize: true,\n    resolveValues: 'none',\n  })\n  return {\n    ...propsOut,\n    ...styleOut,\n  }\n}\n\n/**\n * Returns only style values fully resolved and flattened with merged media queries and shorthands with all theme and token values resolved.\n *\n * Use sparingly, it will loop props and trigger re-render on all media queries you access.\n *\n * */\nexport function useStyle<A extends StyleLikeObject>(\n  props: A,\n  opts?: UsePropsOptions\n): PropsWithoutMediaStyles<A> {\n  return usePropsAndStyle(props, opts)[1] || {}\n}\n\n/**\n * Returns [props, styles, theme, media] fully resolved and flattened with merged media queries and shorthands with all theme and token values resolved.\n *\n * Use sparingly, it will loop props and trigger re-render on all media queries you access.\n *\n * */\nexport function usePropsAndStyle<A extends PropsLikeObject>(\n  props: A,\n  opts?: UsePropsOptions\n): [PropsWithoutMediaStyles<A>, PropsWithoutMediaStyles<A>, ThemeParsed, UseMediaState] {\n  const staticConfig = opts?.forComponent?.staticConfig ?? View.staticConfig\n  const [theme, themeState] = useThemeWithState({\n    componentName: staticConfig.componentName,\n    name: 'theme' in props ? props.theme : undefined,\n    needsUpdate() {\n      return true\n    },\n  })\n  const componentContext = React.useContext(ComponentContext)\n  const groupContext = React.useContext(GroupContext)\n  const { state, disabled, setStateShallow } = useComponentState(\n    props,\n    componentContext.animationDriver,\n    staticConfig,\n    getConfig()\n  )\n\n  const mediaStateNow = opts?.noMedia\n    ? // not safe to use mediaState but really marginal to hit this\n      mediaState\n    : useMedia()\n\n  const splitStyles = useSplitStyles(\n    props,\n    staticConfig,\n    theme,\n    themeState?.name || '',\n    state,\n    {\n      isAnimated: false,\n      mediaState: mediaStateNow,\n      noSkip: true,\n      noMergeStyle: true,\n      noClass: true,\n      resolveValues: 'auto',\n      ...opts,\n    },\n    null,\n    componentContext,\n    groupContext\n  )\n\n  const { mediaGroups, pseudoGroups } = splitStyles || {}\n\n  useIsomorphicLayoutEffect(() => {\n    if (disabled) {\n      return\n    }\n\n    if (state.unmounted) {\n      setStateShallow({ unmounted: false })\n      return\n    }\n\n    if (groupContext) {\n      return subscribeToContextGroup({\n        groupContext,\n        setStateShallow,\n        mediaGroups,\n        pseudoGroups,\n      })\n    }\n  }, [\n    disabled,\n    groupContext,\n    pseudoGroups ? Object.keys([...pseudoGroups]).join('') : 0,\n    mediaGroups ? Object.keys([...mediaGroups]).join('') : 0,\n  ])\n\n  return [\n    splitStyles?.viewProps || {},\n    splitStyles?.style || {},\n    theme,\n    mediaState,\n  ] as any\n}\n","import { validStyles } from '@tamagui/helpers'\n\nimport { viewDefaultStyles } from '../constants/constants'\nimport { createComponent } from '../createComponent'\nimport type {\n  StackNonStyleProps,\n  StackStyle,\n  StackStyleBase,\n  TamaguiElement,\n} from '../types'\n\nexport type View = TamaguiElement\nexport type ViewNonStyleProps = StackNonStyleProps\nexport type ViewStylePropsBase = StackStyleBase\nexport type ViewStyle = StackStyle\nexport type ViewProps = ViewNonStyleProps & ViewStyle\n\nexport const View = createComponent<\n  ViewProps,\n  View,\n  ViewNonStyleProps,\n  ViewStylePropsBase\n>({\n  acceptsClassName: true,\n  defaultProps: viewDefaultStyles,\n  validStyles,\n})\n","import { stylePropsTextOnly, validStyles } from '@tamagui/helpers'\n\nimport { createComponent } from '../createComponent'\nimport type {\n  TamaguiTextElement,\n  TextNonStyleProps,\n  TextProps,\n  TextStylePropsBase,\n} from '../types'\n\nexport type Text = TamaguiTextElement\n\nconst ellipsisStyle =\n  process.env.TAMAGUI_TARGET === 'web'\n    ? {\n        maxWidth: '100%',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n      }\n    : {\n        numberOfLines: 1,\n        lineBreakMode: 'clip',\n      }\n\nexport const Text = createComponent<\n  TextProps,\n  Text,\n  TextNonStyleProps,\n  TextStylePropsBase\n>({\n  componentName: 'Text',\n  acceptsClassName: true,\n  isText: true,\n\n  defaultProps:\n    process.env.TAMAGUI_TARGET === 'web'\n      ? {\n          display: 'inline', // display: inline breaks css transform styles\n          boxSizing: 'border-box',\n          wordWrap: 'break-word',\n          whiteSpace: 'pre-wrap',\n          margin: 0,\n        }\n      : {\n          suppressHighlighting: true,\n        },\n\n  inlineWhenUnflattened: new Set(['fontFamily']),\n\n  variants: {\n    ...(process.env.TAMAGUI_TARGET === 'web' && {\n      numberOfLines: {\n        1: ellipsisStyle,\n\n        ':number': (numberOfLines) =>\n          numberOfLines >= 1\n            ? {\n                WebkitLineClamp: numberOfLines,\n                WebkitBoxOrient: 'vertical',\n                display: '-webkit-box',\n                overflow: 'hidden',\n              }\n            : null,\n      },\n    }),\n\n    ellipsis: {\n      true: ellipsisStyle,\n    },\n  },\n\n  validStyles: {\n    ...validStyles,\n    ...stylePropsTextOnly,\n  },\n})\n\nText['displayName'] = 'Text'\n","import type { PresenceContextProps } from '@tamagui/web'\nimport * as React from 'react'\n\nexport const PresenceContext: React.Context<PresenceContextProps | null> =\n  React.createContext<PresenceContextProps | null>(null)\n\nexport const ResetPresence = (props: {\n  children?: React.ReactNode\n  disable?: boolean\n}): React.ReactNode => {\n  const parent = React.useContext(PresenceContext)\n  return (\n    <PresenceContext.Provider value={props.disable ? parent : null}>\n      {props.children}\n    </PresenceContext.Provider>\n  )\n}\n","import type { PresenceContextProps, UsePresenceResult } from '@tamagui/web'\nimport * as React from 'react'\n\nimport { PresenceContext } from './PresenceContext'\n\nexport function usePresence(): UsePresenceResult {\n  const context = React.useContext(PresenceContext)\n\n  if (!context) {\n    return [true, null, context]\n  }\n\n  const { id, isPresent, onExitComplete, register } = context\n\n  React.useEffect(() => register(id), [])\n\n  const safeToRemove = () => onExitComplete?.(id)\n\n  return !isPresent && onExitComplete\n    ? [false, safeToRemove, context]\n    : [true, undefined, context]\n}\n\n/**\n * Similar to `usePresence`, except `useIsPresent` simply returns whether or not the component is present.\n * There is no `safeToRemove` function.\n */\nexport function useIsPresent(): boolean {\n  return isPresent(React.useContext(PresenceContext))\n}\n\nexport function isPresent(context: PresenceContextProps | null): boolean {\n  return context === null ? true : context.isPresent\n}\n","import { startTransition as reactStartTransition } from 'react'\n\nexport const startTransition = (callback: React.TransitionFunction): void => {\n  if (process.env.TAMAGUI_TARGET !== 'web') {\n    // Pass-through function\n    callback()\n  } else {\n    // Proxy to react.startTransition\n    reactStartTransition(callback)\n  }\n}\n","import type { GetProps, SizeTokens } from '@tamagui/core'\nimport { View, styled } from '@tamagui/core'\n\nimport { getElevation } from './getElevation'\n\nexport interface StackVariants {\n  /**\n   * @deprecated use `inset: 0, position: 'absolute'` instead\n   */\n  fullscreen?: boolean\n\n  elevation?: number | SizeTokens\n}\n\nexport type YStackProps = Omit<GetProps<typeof YStack>, keyof StackVariants> &\n  StackVariants\n\nexport type XStackProps = YStackProps\nexport type ZStackProps = YStackProps\n\nexport const fullscreenStyle = {\n  position: 'absolute',\n  inset: 0,\n} as const\n\nconst variants = {\n  fullscreen: {\n    true: fullscreenStyle,\n  },\n\n  elevation: {\n    '...size': getElevation,\n    ':number': getElevation,\n  },\n} as const\n\n/**\n * @summary A view that arranges its children in a vertical line.\n * @see — Docs https://tamagui.dev/ui/stacks#xstack-ystack-zstack\n */\nexport const YStack = styled(View, {\n  flexDirection: 'column',\n  variants,\n})\n\nYStack['displayName'] = 'YStack'\n\n/**\n * @summary A view that arranges its children in a horizontal line.\n * @see — Docs https://tamagui.dev/ui/stacks#xstack-ystack-zstack\n */\nexport const XStack = styled(View, {\n  flexDirection: 'row',\n  variants,\n})\n\nXStack['displayName'] = 'XStack'\n\n/**\n * @summary A view that stacks its children on top of each other.\n * @see — Docs https://tamagui.dev/ui/stacks#xstack-ystack-zstack\n */\nexport const ZStack = styled(\n  YStack,\n  {\n    position: 'relative',\n  },\n  {\n    neverFlatten: true,\n    isZStack: true,\n  }\n)\n\nZStack['displayName'] = 'ZStack'\n","import type {\n  SizeTokens,\n  SizeVariantSpreadFunction,\n  ViewProps,\n  VariantSpreadExtras,\n} from '@tamagui/core'\nimport { getVariableValue, isAndroid, isVariable } from '@tamagui/core'\n\nexport const getElevation: SizeVariantSpreadFunction<ViewProps> = (size, extras) => {\n  if (!size) return\n  const { tokens } = extras\n  const token = tokens.size[size]\n  const sizeNum = (isVariable(token) ? +token.val : size) as number\n  return getSizedElevation(sizeNum, extras)\n}\n\nexport const getSizedElevation = (\n  val: SizeTokens | number | boolean,\n  { theme, tokens }: VariantSpreadExtras<any>\n) => {\n  let num = 0\n  if (val === true) {\n    const val = getVariableValue(tokens.size['true'])\n    if (typeof val === 'number') {\n      num = val\n    } else {\n      num = 10\n    }\n  } else {\n    num = +val\n  }\n  if (num === 0) {\n    return\n  }\n  const [height, shadowRadius] = [Math.round(num / 4 + 1), Math.round(num / 2 + 2)]\n  const shadow = {\n    shadowColor: theme.shadowColor,\n    shadowRadius,\n    shadowOffset: { height, width: 0 },\n    ...(isAndroid\n      ? {\n          elevationAndroid: 2 * height,\n        }\n      : {}),\n  }\n  return shadow\n}\n","import type { GetProps } from '@tamagui/core'\nimport { styled } from '@tamagui/core'\n\nimport { YStack } from './Stacks'\n\nimport { bordered, circular, elevate } from './variants'\n\nconst chromelessStyle = {\n  backgroundColor: 'transparent',\n  borderColor: 'transparent',\n  shadowColor: 'transparent',\n\n  hoverStyle: {\n    borderColor: 'transparent',\n  },\n}\n\nexport const themeableVariants = {\n  circular,\n  elevate,\n\n  bordered: {\n    true: bordered,\n  },\n\n  transparent: {\n    true: {\n      backgroundColor: 'transparent',\n    },\n  },\n\n  chromeless: {\n    true: chromelessStyle,\n    all: {\n      ...chromelessStyle,\n      hoverStyle: chromelessStyle,\n      pressStyle: chromelessStyle,\n      focusStyle: chromelessStyle,\n    },\n  },\n} as const\n\nexport const ThemeableStack = styled(YStack, {\n  variants: themeableVariants,\n})\n\nexport type ThemeableStackProps = GetProps<typeof ThemeableStack>\n","import { getElevation } from './getElevation'\n\nexport const elevate = {\n  true: (_: boolean, extras: any) => {\n    return getElevation(extras.props['size'], extras) as any\n  },\n}\n\nexport const bordered = (val: boolean | number, { props }) => {\n  return {\n    // TODO size it with size in '...size'\n    borderWidth: typeof val === 'number' ? val : 1,\n    borderColor: '$borderColor',\n  }\n}\n\nconst circularStyle = {\n  borderRadius: 100_000,\n  padding: 0,\n}\n\nexport const circular = {\n  true: (_, { props, tokens }) => {\n    if (!('size' in props)) {\n      return circularStyle\n    }\n    const size = typeof props.size === 'number' ? props.size : tokens.size[props.size]\n    return {\n      ...circularStyle,\n      width: size,\n      height: size,\n      maxWidth: size,\n      maxHeight: size,\n      minWidth: size,\n      minHeight: size,\n    }\n  },\n}\n","import type { Variable, VariableValGeneric } from '@tamagui/web'\nimport { getTokens, isVariable } from '@tamagui/web'\n\n// technically number | undefined just for compat with the generic VariableVal\ntype GetTokenBase = Variable | string | number | undefined | VariableValGeneric\n\ntype GetTokenOptions = {\n  shift?: number\n  bounds?: [number] | [number, number]\n  excludeHalfSteps?: boolean\n}\n\nconst defaultOptions: GetTokenOptions = {\n  shift: 0,\n  bounds: [0],\n}\n\nexport const getSize = (size: GetTokenBase, options?: GetTokenOptions) => {\n  return getTokenRelative('size', size, options)\n}\n\nexport const getSpace = (space: GetTokenBase, options?: GetTokenOptions) => {\n  return getTokenRelative('space', space, options)\n}\n\nexport const getRadius = (radius: GetTokenBase, options?: GetTokenOptions) => {\n  return getTokenRelative('radius', radius, options)\n}\n\nconst cacheVariables: Record<string, Variable[]> = {}\nconst cacheWholeVariables: Record<string, Variable[]> = {}\nconst cacheKeys: Record<string, string[]> = {}\nconst cacheWholeKeys: Record<string, string[]> = {}\n\n/** @deprecated use getSize, getSpace, or getTokenRelative instead */\nexport const stepTokenUpOrDown = (\n  type: 'size' | 'space' | 'zIndex' | 'radius',\n  current: GetTokenBase,\n  options: GetTokenOptions = defaultOptions\n): Variable<number> => {\n  const tokens = getTokens({ prefixed: true })[type] as Record<string, Variable>\n\n  if (!(type in cacheVariables)) {\n    cacheKeys[type] = []\n    cacheVariables[type] = []\n    cacheWholeKeys[type] = []\n    cacheWholeVariables[type] = []\n\n    const sorted = Object.keys(tokens)\n      .map((k) => tokens[k])\n      .sort((a, b) => a.val - b.val)\n\n    for (const token of sorted) {\n      cacheKeys[type].push(token.key)\n      cacheVariables[type].push(token)\n    }\n\n    const sortedExcludingHalfSteps = sorted.filter((x) => !x.key.endsWith('.5'))\n    for (const token of sortedExcludingHalfSteps) {\n      cacheWholeKeys[type].push(token.key)\n      cacheWholeVariables[type].push(token)\n    }\n  }\n\n  const isString = typeof current === 'string'\n  const cache = options.excludeHalfSteps\n    ? isString\n      ? cacheWholeKeys\n      : cacheWholeVariables\n    : isString\n      ? cacheKeys\n      : cacheVariables\n\n  const tokensOrdered = cache[type]\n\n  const min = options.bounds?.[0] ?? 0\n  const max = options.bounds?.[1] ?? tokensOrdered.length - 1\n  const currentIndex = tokensOrdered.indexOf(current as any)\n\n  let shift = options.shift || 0\n  if (shift) {\n    if (current === '$true' || (isVariable(current) && current.name === 'true')) {\n      shift += shift > 0 ? 1 : -1\n    }\n  }\n\n  const index = Math.min(max, Math.max(min, currentIndex + shift))\n  const found = tokensOrdered[index]\n\n  const result = (typeof found === 'string' ? tokens[found] : found) || tokens['$true']\n\n  // console.log('found', { current, shift, index, found, result })\n\n  // @ts-ignore\n  return result\n}\n\nexport const getTokenRelative = stepTokenUpOrDown\n","import { getSpace } from '@tamagui/get-token'\nimport type { SizeTokens, VariantSpreadExtras } from '@tamagui/web'\n\nexport const getButtonSized = (\n  val: SizeTokens | number,\n  { tokens, props }: VariantSpreadExtras<any>\n) => {\n  if (!val || props.circular) {\n    return\n  }\n  if (typeof val === 'number') {\n    return {\n      paddingHorizontal: val * 0.25,\n      height: val,\n      borderRadius: props.circular ? 100_000 : val * 0.2,\n    }\n  }\n  const xSize = getSpace(val)\n  const radiusToken = tokens.radius[val] ?? tokens.radius['$true']\n  return {\n    paddingHorizontal: xSize,\n    height: val,\n    borderRadius: props.circular ? 100_000 : radiusToken,\n  }\n}\n","import React from 'react'\n\nexport const ButtonNestingContext = React.createContext(false)\n","import { isClient } from '@tamagui/constants'\nimport type {\n  FontSizeTokens,\n  GenericFont,\n  TextProps,\n  TextStyle,\n  VariantSpreadFunction,\n} from '@tamagui/web'\nimport { getTokens, styled, Text } from '@tamagui/web'\n\nexport const getFontSized: VariantSpreadFunction<TextProps, FontSizeTokens> = (\n  sizeTokenIn = '$true',\n  { font, fontFamily, props }\n) => {\n  if (!font) {\n    return {\n      fontSize: sizeTokenIn,\n    }\n  }\n\n  const sizeToken = sizeTokenIn === '$true' ? getDefaultSizeToken(font) : sizeTokenIn\n\n  const style: TextStyle = {}\n\n  // size related, treat them as overrides\n  const fontSize = font.size[sizeToken]\n  const lineHeight = font.lineHeight?.[sizeToken]\n  const fontWeight = font.weight?.[sizeToken]\n  const letterSpacing = font.letterSpacing?.[sizeToken]\n  const textTransform = font.transform?.[sizeToken]\n  const fontStyle = props.fontStyle ?? font.style?.[sizeToken]\n  const color = props.color ?? font.color?.[sizeToken]\n\n  if (fontStyle) style.fontStyle = fontStyle\n  if (textTransform) style.textTransform = textTransform\n  if (fontFamily) style.fontFamily = fontFamily\n  if (fontWeight) style.fontWeight = fontWeight\n  if (letterSpacing) style.letterSpacing = letterSpacing\n  if (fontSize) style.fontSize = fontSize\n  if (lineHeight) style.lineHeight = lineHeight\n  if (color) style.color = color\n\n  if (process.env.NODE_ENV === 'development') {\n    if (props['debug'] && props['debug'] === 'verbose') {\n      console.groupCollapsed('  🔹 getFontSized', sizeTokenIn, sizeToken)\n      if (isClient) {\n        console.info({ style, props, font })\n      }\n      console.groupEnd()\n    }\n  }\n\n  return style\n}\n\nexport const SizableText = styled(Text, {\n  name: 'SizableText',\n  fontFamily: '$body',\n\n  variants: {\n    size: {\n      '...fontSize': getFontSized,\n    },\n  } as const,\n\n  defaultVariants: {\n    size: '$true',\n  },\n})\n\nconst cache = new WeakMap<any, FontSizeTokens>()\n\nfunction getDefaultSizeToken(font: GenericFont) {\n  if (typeof font === 'object' && cache.has(font)) {\n    return cache.get(font)!\n  }\n\n  // use either font.size if it has true set, or fallback to tokens.size mapping to the same\n  const sizeTokens = '$true' in font.size ? font.size : getTokens().size\n  const sizeDefault = sizeTokens['$true']\n  const sizeDefaultSpecific = sizeDefault\n    ? Object.keys(sizeTokens).find(\n        (x) => x !== '$true' && sizeTokens[x]['val'] === sizeDefault['val']\n      )\n    : null\n\n  if (!sizeDefault || !sizeDefaultSpecific) {\n    if (process.env.NODE_ENV === 'development') {\n      console.warn(`No default size is set in your tokens for the \"true\" key, fonts will be inconsistent.\n\n      Fix this by having consistent tokens across fonts and sizes and setting a true key for your size tokens, or\n      set true keys for all your font tokens: \"size\", \"lineHeight\", \"fontStyle\", etc.`)\n    }\n    return Object.keys(font.size)[3]\n  }\n\n  cache.set(font, sizeDefaultSpecific as FontSizeTokens)\n  return sizeDefaultSpecific\n}\n","import { getFontSized } from '@tamagui/get-font-sized'\nimport type { GetProps } from '@tamagui/web'\nimport { Text, styled } from '@tamagui/web'\n\nexport const SizableText = styled(Text, {\n  name: 'SizableText',\n  fontFamily: '$body',\n\n  variants: {\n    unstyled: {\n      false: {\n        size: '$true',\n        color: '$color',\n      },\n    },\n\n    size: getFontSized,\n  },\n\n  defaultVariants: {\n    unstyled: process.env.TAMAGUI_HEADLESS === '1',\n  },\n})\n\n// we are doing weird stuff to avoid bad types\n// TODO make this just work\nSizableText.staticConfig.variants!.fontFamily = {\n  '...': (val, extras) => {\n    // pass through inherit directly without font variant expansion\n    if (val === 'inherit') {\n      return { fontFamily: 'inherit' }\n    }\n\n    const sizeProp = extras.props['size']\n    const fontSizeProp = extras.props['fontSize']\n    const size =\n      sizeProp === '$true' && fontSizeProp\n        ? fontSizeProp\n        : extras.props['size'] || '$true'\n    return getFontSized(size, extras)\n  },\n}\n\nexport type SizableTextProps = GetProps<typeof SizableText>\n","import type { SizeTokens } from '@tamagui/web'\nimport React from 'react'\n\nimport type { TextParentStyles } from './types'\n\ntype Props = TextParentStyles & {\n  children?: React.ReactNode\n  size?: SizeTokens\n}\n\nexport function wrapChildrenInText(\n  TextComponent: any,\n  propsIn: Props & {\n    unstyled?: boolean\n  },\n  extraProps?: Record<string, any>\n) {\n  const {\n    children,\n    textProps,\n    size,\n    noTextWrap,\n    color,\n    fontFamily,\n    fontSize,\n    fontWeight,\n    letterSpacing,\n    textAlign,\n    fontStyle,\n    maxFontSizeMultiplier,\n  } = propsIn\n\n  if (noTextWrap || !children) {\n    return [children]\n  }\n\n  const props = {\n    ...extraProps,\n  }\n\n  // to avoid setting undefined\n  if (color) props.color = color\n  if (fontFamily) props.fontFamily = fontFamily\n  if (fontSize) props.fontSize = fontSize\n  if (fontWeight) props.fontWeight = fontWeight\n  if (letterSpacing) props.letterSpacing = letterSpacing\n  if (textAlign) props.textAlign = textAlign\n  if (size) props.size = size\n  if (fontStyle) props.fontStyle = fontStyle\n  if (maxFontSizeMultiplier) props.maxFontSizeMultiplier = maxFontSizeMultiplier\n\n  return React.Children.toArray(children).map((child, index) => {\n    return typeof child === 'string' ? (\n      // so \"data-disable-theme\" is a hack to fix themeInverse, don't ask me why\n      <TextComponent key={index} {...props} {...textProps}>\n        {child}\n      </TextComponent>\n    ) : (\n      child\n    )\n  })\n}\n","export function createGlobalState<T extends { enabled: boolean }>(\n  key: string,\n  defaultValue: T\n): {\n  get: () => T\n  set: (next: T) => void\n} {\n  const GLOBAL_KEY = `__tamagui_${key}__`\n\n  type TamaguiGlobal = typeof globalThis & {\n    [GLOBAL_KEY]?: T\n  }\n\n  function getGlobalState(): T {\n    const g = globalThis as TamaguiGlobal\n    if (!g[GLOBAL_KEY]) {\n      // reset on module load so reloadReactNative gets a clean state\n      // (globalThis persists across reloads but module scope re-evaluates)\n      g[GLOBAL_KEY] = defaultValue\n    }\n    return g[GLOBAL_KEY]!\n  }\n\n  function setGlobalState(newState: T): void {\n    ;(globalThis as TamaguiGlobal)[GLOBAL_KEY] = newState\n  }\n\n  return {\n    get: getGlobalState,\n    set: setGlobalState,\n  }\n}\n","import { createGlobalState } from './globalState'\nimport type { NativePortalState } from './types'\n\nconst state = createGlobalState<NativePortalState>(`portal`, {\n  enabled: false,\n  type: null,\n})\n\nexport interface PortalAccessor {\n  readonly isEnabled: boolean\n  readonly state: NativePortalState\n  set(newState: NativePortalState): void\n}\n\nexport function getPortal(): PortalAccessor {\n  return {\n    get isEnabled(): boolean {\n      return state.get().enabled\n    },\n    get state(): NativePortalState {\n      return state.get()\n    },\n    set(newState: NativePortalState): void {\n      state.set(newState)\n    },\n  }\n}\n","import type { ReactNode } from 'react'\nimport { getPortal } from './portalState'\nimport type {\n  NativePortalProps,\n  NativePortalHostProps,\n  NativePortalProviderProps,\n} from './types'\n\nexport type { NativePortalProps, NativePortalHostProps, NativePortalProviderProps }\n\n/**\n * Renders children into a teleport Portal when available.\n * Returns null when teleport is not set up (allows fallback handling by caller).\n */\nexport function NativePortal({\n  hostName = 'root',\n  children,\n}: NativePortalProps): ReactNode {\n  const state = getPortal().state\n  if (state.type !== 'teleport') return null\n\n  const { Portal } = (globalThis as any).__tamagui_teleport\n  return <Portal hostName={hostName}>{children}</Portal>\n}\n\n/**\n * Renders a teleport PortalHost when available.\n * Returns null when teleport is not set up.\n */\nexport function NativePortalHost({ name }: NativePortalHostProps): ReactNode {\n  const state = getPortal().state\n  if (state.type !== 'teleport') return null\n\n  const { PortalHost } = (globalThis as any).__tamagui_teleport\n  return <PortalHost name={name} />\n}\n\n/**\n * Wraps children with teleport PortalProvider when available.\n * Returns children as-is when teleport is not set up.\n */\nexport function NativePortalProvider({ children }: NativePortalProviderProps): ReactNode {\n  const state = getPortal().state\n  if (state.type !== 'teleport') return <>{children}</>\n\n  const { PortalProvider } = (globalThis as any).__tamagui_teleport\n  return <PortalProvider>{children}</PortalProvider>\n}\n","import { createContext } from 'react'\n\n// stacks vertically through tree, based on nesting\nexport const ZIndexStackContext = createContext(1)\n\n// if setting to overriden z index\nexport const ZIndexHardcodedContext = createContext<number | undefined>(undefined)\n","// from https://github.com/gorhom/react-native-portal\n// MIT License Copyright (c) 2020 Mo Gorhom\n// fixing SSR issue\n\nimport { isWeb, useIsomorphicLayoutEffect } from '@tamagui/constants'\nimport { getPortal, NativePortalHost, NativePortalProvider } from '@tamagui/native'\nimport { startTransition } from '@tamagui/start-transition'\nimport type { ReactNode } from 'react'\nimport React, {\n  createContext,\n  memo,\n  useCallback,\n  useContext,\n  useMemo,\n  useReducer,\n} from 'react'\nimport { allPortalHosts, portalListeners } from './constants'\n\ninterface PortalType {\n  name: string\n  node: ReactNode\n}\n\nenum ACTIONS {\n  REGISTER_HOST,\n  DEREGISTER_HOST,\n  ADD_UPDATE_PORTAL,\n  REMOVE_PORTAL,\n}\n\nconst INITIAL_STATE = {}\n\nexport { ACTIONS, INITIAL_STATE }\n\nexport interface AddUpdatePortalAction {\n  type: ACTIONS\n  hostName: string\n  portalName: string\n  node: ReactNode\n}\n\nexport interface RemovePortalAction {\n  type: ACTIONS\n  hostName: string\n  portalName: string\n}\n\nexport interface RegisterHostAction {\n  type: ACTIONS\n  hostName: string\n}\n\nexport interface UnregisterHostAction {\n  type: ACTIONS\n  hostName: string\n}\n\nexport type ActionTypes =\n  | AddUpdatePortalAction\n  | RemovePortalAction\n  | RegisterHostAction\n  | UnregisterHostAction\n\nconst registerHost = (state: Record<string, Array<PortalType>>, hostName: string) => {\n  if (!(hostName in state)) {\n    state[hostName] = []\n  }\n  return state\n}\n\nconst deregisterHost = (state: Record<string, Array<PortalType>>, hostName: string) => {\n  delete state[hostName]\n  return state\n}\n\nconst addUpdatePortal = (\n  state: Record<string, Array<PortalType>>,\n  hostName: string,\n  portalName: string,\n  node: any\n) => {\n  if (!(hostName in state)) {\n    state = registerHost(state, hostName)\n  }\n\n  /**\n   * updated portal, if it was already added.\n   */\n  const index = state[hostName].findIndex((item) => item.name === portalName)\n  if (index !== -1) {\n    state[hostName][index].node = node\n  } else {\n    state[hostName].push({\n      name: portalName,\n      node,\n    })\n  }\n  return state\n}\n\nconst removePortal = (\n  state: Record<string, Array<PortalType>>,\n  hostName: string,\n  portalName: string\n) => {\n  if (!(hostName in state)) {\n    if (process.env.NODE_ENV === 'development') {\n      console.info(\n        `Failed to remove portal '${portalName}', '${hostName}' was not registered!`\n      )\n    }\n    return state\n  }\n\n  const index = state[hostName].findIndex((item) => item.name === portalName)\n  if (index !== -1) state[hostName].splice(index, 1)\n  return state\n}\n\nconst reducer = (state: Record<string, Array<PortalType>>, action: ActionTypes) => {\n  const { type } = action\n  switch (type) {\n    case ACTIONS.REGISTER_HOST:\n      return registerHost({ ...state }, action.hostName)\n    case ACTIONS.DEREGISTER_HOST:\n      return deregisterHost({ ...state }, action.hostName)\n    case ACTIONS.ADD_UPDATE_PORTAL:\n      return addUpdatePortal(\n        { ...state },\n        action.hostName,\n        (action as AddUpdatePortalAction).portalName,\n        (action as AddUpdatePortalAction).node\n      )\n    case ACTIONS.REMOVE_PORTAL:\n      return removePortal(\n        { ...state },\n        action.hostName,\n        (action as RemovePortalAction).portalName\n      )\n    default:\n      return state\n  }\n}\n\nconst PortalStateContext = createContext<Record<string, Array<PortalType>> | null>(null)\nconst PortalDispatchContext = createContext<React.Dispatch<ActionTypes> | null>(null)\n\nconst usePortalState = (hostName: string) => {\n  const state = useContext(PortalStateContext)\n\n  if (state === null) {\n    throw new Error(\n      \"'PortalStateContext' cannot be null, please add 'PortalProvider' to the root component.\"\n    )\n  }\n\n  return state[hostName] || []\n}\n\nexport const usePortal = (hostName = 'root') => {\n  const dispatch = useContext(PortalDispatchContext)\n\n  if (dispatch === null) {\n    throw new Error(\n      \"'PortalDispatchContext' cannot be null, please add 'PortalProvider' to the root component.\"\n    )\n  }\n\n  //#region methods\n  const registerHost = useCallback(() => {\n    dispatch({\n      type: ACTIONS.REGISTER_HOST,\n      hostName: hostName,\n    })\n  }, [])\n\n  const deregisterHost = useCallback(() => {\n    dispatch({\n      type: ACTIONS.DEREGISTER_HOST,\n      hostName: hostName,\n    })\n  }, [])\n\n  const addUpdatePortal = useCallback((name: string, node: ReactNode) => {\n    dispatch({\n      type: ACTIONS.ADD_UPDATE_PORTAL,\n      hostName,\n      portalName: name,\n      node,\n    })\n  }, [])\n\n  const removePortal = useCallback((name: string) => {\n    dispatch({\n      type: ACTIONS.REMOVE_PORTAL,\n      hostName,\n      portalName: name,\n    })\n  }, [])\n  //#endregion\n\n  return {\n    registerHost,\n    deregisterHost,\n    addPortal: addUpdatePortal,\n    updatePortal: addUpdatePortal,\n    removePortal,\n  }\n}\n\nexport interface PortalProviderProps {\n  /**\n   * Defines whether to add a default root host or not.\n   *\n   * @default true\n   * @type boolean\n   */\n  shouldAddRootHost?: boolean\n\n  /**\n   * Defines the root portal host name.\n   *\n   * @default \"root\"\n   * @type string\n   */\n  rootHostName?: string\n\n  children: ReactNode | ReactNode[]\n}\n\nconst PortalProviderComponent = ({\n  rootHostName = 'root',\n  shouldAddRootHost = true,\n  children,\n}: PortalProviderProps) => {\n  const [state, dispatch] = useReducer(reducer, INITIAL_STATE)\n  const transitionDispatch = useMemo(() => {\n    const next = (value: any) => {\n      startTransition(() => {\n        dispatch(value)\n      })\n    }\n    return next as typeof dispatch\n  }, [dispatch])\n\n  const portalState = getPortal().state\n\n  // when teleport is enabled, use NativePortalProvider as the wrapper\n  // the Gorhom context is still needed for fallback cases\n  const content = (\n    <PortalDispatchContext.Provider value={transitionDispatch}>\n      <PortalStateContext.Provider value={state}>\n        {children}\n        {shouldAddRootHost && <PortalHost name={rootHostName} />}\n      </PortalStateContext.Provider>\n    </PortalDispatchContext.Provider>\n  )\n\n  // wrap with NativePortalProvider if teleport is available\n  if (portalState.type === 'teleport') {\n    return <NativePortalProvider>{content}</NativePortalProvider>\n  }\n\n  return content\n}\n\nexport const PortalProvider = memo(PortalProviderComponent)\nPortalProvider.displayName = 'PortalProvider'\n\nexport interface PortalHostProps {\n  /**\n   * Host's key or name to be used as an identifier.\n   * @type string\n   */\n  name: string\n\n  forwardProps?: Record<string, any>\n\n  /**\n   * Useful when trying to animate children with AnimatePresence.\n   *\n   * Not a part of gorhom/react-native-portal\n   */\n  render?: (children: React.ReactNode) => React.ReactElement\n}\nconst defaultRenderer = (children) => <>{children}</>\n\nexport const PortalHost = memo(function PortalHost(props: PortalHostProps) {\n  if (isWeb) {\n    return <PortalHostWeb {...props} />\n  }\n\n  const portalState = getPortal().state\n\n  // use teleport's PortalHost when available\n  if (portalState.type === 'teleport') {\n    return <NativePortalHost name={props.name} />\n  }\n\n  return <PortalHostNonNative {...props} />\n})\n\nfunction PortalHostWeb(props: PortalHostProps) {\n  // if not layout effect race issues\n  useIsomorphicLayoutEffect(() => {\n    return () => {\n      allPortalHosts.delete(props.name)\n    }\n  }, [props.name])\n\n  return (\n    <div\n      style={{ display: 'contents' }}\n      ref={(node) => {\n        if (node) {\n          allPortalHosts.set(props.name, node)\n          portalListeners[props.name]?.forEach((x) => x(node))\n        }\n      }}\n    />\n  )\n}\n\nfunction PortalHostNonNative(props: PortalHostProps) {\n  const { name, forwardProps, render = defaultRenderer } = props\n  const state = usePortalState(name)\n  const { registerHost, deregisterHost } = usePortal(props.name)\n\n  useIsomorphicLayoutEffect(() => {\n    registerHost()\n    return () => {\n      deregisterHost()\n    }\n  }, [])\n\n  if (forwardProps) {\n    return render(\n      state.map((item) => {\n        let next = item.node\n\n        // REMOVE children, can cause gnarly bugs (ask me how i know)\n        const { children, ...restForwardProps } = forwardProps\n\n        if (forwardProps) {\n          return React.Children.map(next, (child) => {\n            return React.isValidElement(child)\n              ? React.cloneElement(child, { key: child.key, ...restForwardProps })\n              : child\n          })\n        }\n\n        return next\n      })\n    )\n  }\n\n  return render(state.map((item) => item.node))\n}\n","import { isAndroid, isIos, isWeb } from '@tamagui/constants'\nimport { getPortal } from '@tamagui/native'\n\n/**\n * Check if teleport is enabled (best portal option - preserves React context)\n */\nexport const isTeleportEnabled = () => {\n  const state = getPortal().state\n  return state.enabled && state.type === 'teleport'\n}\n\n/**\n * Check if we need to manually re-propagate React context through portals.\n * When teleport is enabled, context is automatically preserved.\n * Otherwise, on native platforms we need to manually forward context.\n */\nexport const needsPortalRepropagation = () => {\n  if (isWeb) return false\n  if (isTeleportEnabled()) return false\n  // native without teleport needs repropagation\n  return isAndroid || isIos\n}\n\n// web-only portal host tracking\nexport const allPortalHosts = new Map<string, HTMLElement>()\nexport const portalListeners: Record<string, Set<Function>> = {}\n","import type { FontSizeTokens, FontTokens, Variable } from '@tamagui/core'\nimport { getConfig, isVariable } from '@tamagui/core'\n\ntype GetFontSizeOpts = {\n  relativeSize?: number\n  font?: FontTokens\n}\n\nexport const getFontSize = (\n  inSize: FontSizeTokens | null | undefined,\n  opts?: GetFontSizeOpts\n): number => {\n  const res = getFontSizeVariable(inSize, opts)\n  if (isVariable(res)) {\n    return +res.val\n  }\n  return res ? +res : 16\n}\n\nexport const getFontSizeVariable = (\n  inSize: FontSizeTokens | null | undefined,\n  opts?: GetFontSizeOpts\n): FontSizeTokens | Variable<string> | null | undefined => {\n  const token = getFontSizeToken(inSize, opts)\n  if (!token) {\n    return inSize\n  }\n  const conf = getConfig()\n  const font = conf.fontsParsed[opts?.font || conf.defaultFontToken]\n  return font?.size[token] as Variable<string>\n}\n\nexport const getFontSizeToken = (\n  inSize: FontSizeTokens | null | undefined,\n  opts?: GetFontSizeOpts\n): FontSizeTokens | null => {\n  if (typeof inSize === 'number') {\n    return null\n  }\n  // backwards compat\n  const relativeSize = opts?.relativeSize || 0\n  const conf = getConfig()\n  const font = conf.fontsParsed[opts?.font || conf.defaultFontToken]\n  const fontSize =\n    font?.size ||\n    // fallback to size tokens\n    conf.tokensParsed.size\n  const size =\n    (inSize === '$true' && !('$true' in fontSize) ? '$4' : inSize) ??\n    ('$true' in fontSize ? '$true' : '$4')\n\n  const sizeTokens = Object.keys(fontSize)\n\n  let foundIndex = sizeTokens.indexOf(size)\n  if (foundIndex === -1) {\n    if (size.endsWith('.5')) {\n      foundIndex = sizeTokens.indexOf(size.replace('.5', ''))\n    }\n  }\n  if (process.env.NODE_ENV === 'development') {\n    if (foundIndex === -1) {\n      console.warn('No font size found', size, opts, 'in size tokens', sizeTokens)\n    }\n  }\n  const tokenIndex = Math.min(\n    Math.max(0, foundIndex + relativeSize),\n    sizeTokens.length - 1\n  )\n  return (sizeTokens[tokenIndex] ?? size) as FontSizeTokens\n}\n","import React from 'react'\n\nexport const getIcon = (\n  el: any,\n  props: {\n    size?: number\n    color?: string\n  }\n) => {\n  if (!el) return el\n  if (React.isValidElement(el)) {\n    return React.cloneElement(el, {\n      ...props,\n      // @ts-expect-error\n      ...el.props,\n    })\n  }\n  return React.createElement(el, props)\n}\n","import { getFontSize } from '@tamagui/font-size'\nimport { getButtonSized } from '@tamagui/get-button-sized'\nimport { getIcon } from '@tamagui/helpers-tamagui'\nimport { ButtonNestingContext, getElevation, themeableVariants } from '@tamagui/stacks'\nimport { SizableText, wrapChildrenInText } from '@tamagui/text'\nimport type { ColorTokens, GetProps, SizeTokens, Token } from '@tamagui/web'\nimport {\n  createStyledContext,\n  getTokenValue,\n  styled,\n  useProps,\n  View,\n  withStaticProperties,\n} from '@tamagui/web'\nimport type { FunctionComponent, JSX } from 'react'\nimport { useContext } from 'react'\n\ntype ButtonVariant = 'outlined'\n\nconst context = createStyledContext<{\n  size?: SizeTokens\n  variant?: ButtonVariant\n  color?: ColorTokens | string\n  elevation?: SizeTokens | number\n}>({\n  size: undefined,\n  variant: undefined,\n  color: undefined,\n  elevation: undefined,\n})\n\nconst Frame = styled(View, {\n  context,\n  name: 'Button',\n  role: 'button',\n  render: <button type=\"button\" />,\n  tabIndex: 0,\n\n  variants: {\n    unstyled: {\n      false: {\n        size: '$true',\n        justifyContent: 'center',\n        alignItems: 'center',\n        flexWrap: 'nowrap',\n        flexDirection: 'row',\n        cursor: 'pointer',\n        backgroundColor: '$background',\n        borderWidth: 1,\n        borderColor: 'transparent',\n\n        hoverStyle: {\n          backgroundColor: '$backgroundHover',\n          borderColor: '$borderColorHover',\n        },\n\n        pressStyle: {\n          backgroundColor: '$backgroundPress',\n          borderColor: '$borderColorHover',\n        },\n\n        focusVisibleStyle: {\n          outlineColor: '$outlineColor',\n          outlineStyle: 'solid',\n          outlineWidth: 2,\n        },\n      },\n    },\n\n    variant: {\n      outlined:\n        process.env.TAMAGUI_HEADLESS === '1'\n          ? {}\n          : {\n              backgroundColor: 'transparent',\n              borderWidth: 1,\n              borderColor: '$borderColor',\n\n              hoverStyle: {\n                backgroundColor: 'transparent',\n                borderColor: '$borderColorHover',\n              },\n\n              pressStyle: {\n                backgroundColor: 'transparent',\n                borderColor: '$borderColorPress',\n              },\n            },\n    },\n\n    circular: themeableVariants.circular,\n\n    chromeless: themeableVariants.chromeless,\n\n    size: {\n      '...size': (val, extras) => {\n        const buttonStyle = getButtonSized(val, extras)\n        const gap = getTokenValue(val as Token)\n        return {\n          ...buttonStyle,\n          gap,\n        }\n      },\n      ':number': (val, extras) => {\n        const buttonStyle = getButtonSized(val, extras)\n        const gap = val * 0.4\n        return {\n          ...buttonStyle,\n          gap,\n        }\n      },\n    },\n\n    elevation: {\n      '...size': getElevation,\n      ':number': getElevation,\n    },\n\n    disabled: {\n      true: {\n        pointerEvents: 'none',\n        // @ts-ignore\n        'aria-disabled': true,\n      },\n    },\n  } as const,\n\n  defaultVariants: {\n    unstyled: process.env.TAMAGUI_HEADLESS === '1',\n  },\n})\n\nconst Text = styled(SizableText, {\n  context,\n\n  variants: {\n    unstyled: {\n      false: {\n        userSelect: 'none',\n        cursor: 'pointer',\n        // flexGrow 1 leads to inconsistent native style where text pushes to start of view\n        flexGrow: 0,\n        flexShrink: 1,\n        ellipsis: true,\n        color: '$color',\n      },\n    },\n  } as const,\n\n  defaultVariants: {\n    unstyled: process.env.TAMAGUI_HEADLESS === '1',\n  },\n})\n\nconst Icon = (props: {\n  children: React.ReactNode\n  scaleIcon?: number\n  size?: SizeTokens\n}) => {\n  const { children, scaleIcon = 1, size } = props\n  const styledContext = context.useStyledContext()\n  if (!styledContext) {\n    throw new Error('Button.Icon must be used within a Button')\n  }\n\n  const sizeToken = size ?? styledContext.size\n\n  const iconSize =\n    (typeof sizeToken === 'number' ? sizeToken * 0.5 : getFontSize(sizeToken as Token)) *\n    scaleIcon\n\n  return getIcon(children, {\n    size: iconSize,\n    color: styledContext.color,\n  })\n}\n\nexport const ButtonContext = createStyledContext<{\n  size?: SizeTokens\n  variant?: ButtonVariant\n  color?: ColorTokens | string\n}>({\n  size: undefined,\n  variant: undefined,\n  color: undefined,\n})\n\ntype IconProp = JSX.Element | FunctionComponent<{ color?: any; size?: any }> | null\n\ntype ButtonExtraProps = {\n  icon?: IconProp\n  iconAfter?: IconProp\n  scaleIcon?: number\n  iconSize?: SizeTokens\n}\n\nconst ButtonComponent = Frame.styleable<ButtonExtraProps>((propsIn, ref) => {\n  const isNested = useContext(ButtonNestingContext)\n\n  // Process props through useProps to expand shorthands (like br -> borderRadius)\n  const processedProps = useProps(propsIn, {\n    noNormalize: true,\n    noExpand: true,\n  })\n\n  const { children, iconSize, icon, iconAfter, scaleIcon = 1, ...props } = processedProps\n\n  const size = propsIn.size || (propsIn.unstyled ? undefined : '$true')\n\n  const styledContext = context.useStyledContext()\n  const finalSize = iconSize ?? size ?? styledContext?.size\n  const iconSizeNumber =\n    (typeof finalSize === 'number' ? finalSize * 0.5 : getFontSize(finalSize as Token)) *\n    scaleIcon\n\n  const [themedIcon, themedIconAfter] = [icon, iconAfter].map((icon) => {\n    if (!icon) return null\n    return getIcon(icon, {\n      size: iconSizeNumber,\n      color: styledContext?.color,\n      // No marginLeft or marginRight needed - spacing is handled by the gap property in Frame's size variants\n    })\n  })\n\n  const wrappedChildren = wrapChildrenInText(\n    Text,\n    { children },\n    {\n      unstyled: process.env.TAMAGUI_HEADLESS === '1',\n      size: finalSize ?? styledContext?.size,\n    }\n  )\n\n  return (\n    <ButtonNestingContext.Provider value={true}>\n      <Frame\n        ref={ref}\n        {...props}\n        {...(isNested && { render: 'span' })}\n        // Pass resolved size to circular variant when no explicit size provided\n        {...(props.circular && !propsIn.size && { size })}\n        tabIndex={0}\n      >\n        {themedIcon}\n        {wrappedChildren}\n        {themedIconAfter}\n      </Frame>\n    </ButtonNestingContext.Provider>\n  )\n})\n\nexport const Button = withStaticProperties(ButtonComponent, {\n  Apply: context.Provider,\n  Frame,\n  Text,\n  Icon,\n})\n\nexport type ButtonProps = GetProps<typeof ButtonComponent>\n","import type { Focusable } from './focusable'\n\nexport const registerFocusable = (id: string, input: Focusable) => () => {\n  // noop focus is handed natively\n}\n\nexport const unregisterFocusable = (id: string) => {\n  // noop focus is handed natively\n}\n\nexport const focusFocusable = (id: string) => {\n  // noop focus is handed natively\n}\n","import { useComposedRefs } from '@tamagui/compose-refs'\nimport * as React from 'react'\nimport type { TamaguiElement } from './types'\n\n/**\n * Creates a ref for web-only code that properly types to HTMLElement.\n * Useful when you need to access HTMLElement-specific properties (like selectionStart)\n * that aren't available on the cross-platform TamaguiElement type.\n *\n * @example\n * ```tsx\n * const { ref, composedRef } = useWebRef<HTMLInputElement>(forwardedRef)\n * // ref.current is typed as HTMLInputElement\n * // composedRef is for passing to components\n * ```\n */\nexport function useWebRef<T extends TamaguiElement | HTMLElement>(\n  forwardedRef?: React.ForwardedRef<TamaguiElement>\n) {\n  const ref = React.useRef<T>(null)\n  const composedRef = useComposedRefs(ref, forwardedRef as any)\n  return { ref, composedRef }\n}\n","import { createTamagui as createTamaguiCore } from '@tamagui/core'\n\n/**\n * Adds some helpful validation at dev time only for `tamagui` specifically\n **/\n\nexport const createTamagui: typeof createTamaguiCore =\n  process.env.NODE_ENV !== 'development'\n    ? createTamaguiCore\n    : (conf) => {\n        const sizeTokenKeys = ['$true']\n\n        const hasKeys = (expectedKeys: string[], obj: Record<any, any>) => {\n          return expectedKeys.every((k) => typeof obj[k] !== 'undefined')\n        }\n\n        const tamaguiConfig = createTamaguiCore(conf)\n\n        // size and space should be fully defined\n        for (const name of ['size', 'space'] as const) {\n          const tokenSet = tamaguiConfig.tokensParsed[name]\n          if (!tokenSet) {\n            throw new Error(\n              `Expected tokens for \"${name}\" in ${Object.keys(\n                tamaguiConfig.tokensParsed\n              ).join(', ')}`\n            )\n          }\n          if (!hasKeys(sizeTokenKeys, tokenSet)) {\n            throw new Error(`\ncreateTamagui() missing expected tokens.${name}:\n\nReceived: ${Object.keys(tokenSet).join(', ')}\n\nExpected: ${sizeTokenKeys.join(', ')}\n\nTamagui expects a \"true\" key that is the same value as your default size. This is so \nit can size things up or down from the defaults without assuming which keys you use.\n\nPlease define a \"true\" or \"$true\" key on your size and space tokens like so (example):\n\nsize: {\n  sm: 2,\n  md: 10,\n  true: 10, // this means \"md\" is your default size\n  lg: 20,\n}\n\n`)\n          }\n        }\n\n        // others must define subset of size tokens\n        const expected = Object.keys(tamaguiConfig.tokensParsed.size)\n        for (const name of ['radius', 'zIndex'] as const) {\n          const tokenSet = tamaguiConfig.tokensParsed[name]\n          const received = Object.keys(tokenSet)\n          const hasSomeOverlap = received.some((rk) => expected.includes(rk))\n          if (!hasSomeOverlap) {\n            throw new Error(`\ncreateTamagui() invalid tokens.${name}:\n\nReceived: ${received.join(', ')}\n\nExpected a subset of: ${expected.join(', ')}\n\n`)\n          }\n        }\n\n        return tamaguiConfig\n      }\n","import type { TamaguiProviderProps } from '@tamagui/core'\nimport { TamaguiProvider as OGProvider } from '@tamagui/core'\nimport { PortalProvider } from '@tamagui/portal'\nimport { ZIndexStackContext } from '@tamagui/z-index-stack'\n\nexport const TamaguiProvider = ({ children, ...props }: TamaguiProviderProps) => {\n  return (\n    <OGProvider {...props}>\n      <ZIndexStackContext.Provider value={1}>\n        <PortalProvider shouldAddRootHost>{children}</PortalProvider>\n      </ZIndexStackContext.Provider>\n    </OGProvider>\n  )\n}\n","import { View, styled, useTheme } from '@tamagui/core'\nimport { registerFocusable } from '@tamagui/focusable'\nimport { useWebRef } from '@tamagui/element'\nimport React from 'react'\nimport { styledBody } from './shared'\nimport type { InputProps } from './types'\n\nconst StyledInput = styled(View, styledBody[0], styledBody[1])\n\n/**\n * A web-aligned input component.\n * @see — Docs https://tamagui.dev/ui/inputs#input\n */\nexport const Input = StyledInput.styleable<InputProps>((props, _forwardedRef) => {\n  const {\n    disabled,\n    id,\n    onChangeText,\n    onSubmitEditing,\n    onSelectionChange,\n    selection,\n    placeholderTextColor,\n    selectionColor,\n    rows,\n\n    // Native-only props (ignored on web)\n    keyboardAppearance,\n    returnKeyType,\n    submitBehavior,\n    blurOnSubmit,\n    caretHidden,\n    contextMenuHidden,\n    selectTextOnFocus,\n    secureTextEntry,\n    maxFontSizeMultiplier,\n    allowFontScaling,\n    multiline,\n    keyboardType,\n    autoCapitalize: autoCapitalizeProp,\n    autoCorrect: autoCorrectProp,\n    autoFocusNative,\n    textContentType,\n    onEndEditing,\n    onContentSizeChange,\n    onScroll,\n    onKeyPress,\n\n    // iOS-only props (ignored on web)\n    clearButtonMode,\n    clearTextOnFocus,\n    enablesReturnKeyAutomatically,\n    dataDetectorTypes,\n    scrollEnabled,\n    passwordRules,\n    rejectResponderTermination,\n    spellCheck,\n    lineBreakStrategyIOS,\n    lineBreakModeIOS,\n    smartInsertDelete,\n    inputAccessoryViewID,\n    inputAccessoryViewButtonLabel,\n    disableKeyboardShortcuts,\n\n    // Android-only props (ignored on web)\n    cursorColor,\n    selectionHandleColor,\n    underlineColorAndroid,\n    importantForAutofill,\n    disableFullscreenUI,\n    inlineImageLeft,\n    inlineImagePadding,\n    returnKeyLabel,\n    textBreakStrategy,\n    textAlignVertical,\n    verticalAlign,\n    showSoftInputOnFocus,\n    numberOfLines,\n\n    ...rest\n  } = props\n\n  const { ref, composedRef } = useWebRef<HTMLInputElement>(_forwardedRef)\n  const theme = useTheme()\n\n  // convert native-style values to web equivalents\n  const autoCorrect =\n    autoCorrectProp === true ? 'on' : autoCorrectProp === false ? 'off' : autoCorrectProp\n  const autoCapitalize =\n    autoCapitalizeProp === 'sentences' || autoCapitalizeProp === 'words'\n      ? 'on'\n      : autoCapitalizeProp === 'none' || autoCapitalizeProp === 'characters'\n        ? 'off'\n        : autoCapitalizeProp\n\n  // Handle selection changes\n  React.useEffect(() => {\n    if (!onSelectionChange) return\n\n    const node = ref.current\n    if (!node) return\n\n    const handleSelectionChange = () => {\n      onSelectionChange({\n        nativeEvent: {\n          selection: {\n            start: node.selectionStart ?? 0,\n            end: node.selectionEnd ?? 0,\n          },\n        },\n      })\n    }\n\n    node.addEventListener('select', handleSelectionChange)\n    return () => node.removeEventListener('select', handleSelectionChange)\n  }, [onSelectionChange])\n\n  // Sync selection prop\n  React.useEffect(() => {\n    if (selection && ref.current) {\n      ref.current.setSelectionRange(selection.start, selection.end ?? selection.start)\n    }\n  }, [selection?.start, selection?.end])\n\n  // Register focusable\n  React.useEffect(() => {\n    if (!id || disabled) return\n    return registerFocusable(id, {\n      focusAndSelect: () => ref.current?.focus(),\n      focus: () => ref.current?.focus(),\n    })\n  }, [id, disabled])\n\n  // Handle keyboard submit\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter' && onSubmitEditing) {\n      onSubmitEditing({\n        nativeEvent: { text: (e.target as HTMLInputElement).value },\n      })\n    }\n    rest.onKeyDown?.(e)\n  }\n\n  // Handle change with onChangeText support\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    onChangeText?.(e.target.value)\n    rest.onChange?.(e)\n  }\n\n  const finalProps = {\n    ...rest,\n    disabled,\n    id,\n    rows,\n    autoCorrect,\n    autoCapitalize,\n    onKeyDown: onSubmitEditing ? handleKeyDown : rest.onKeyDown,\n    onChange: onChangeText ? handleChange : rest.onChange,\n    style: {\n      ...(rest.style as any),\n      ...(placeholderTextColor && {\n        '--placeholderColor':\n          theme[placeholderTextColor]?.variable || placeholderTextColor,\n      }),\n      ...(selectionColor && {\n        '--selectionColor': theme[selectionColor]?.variable || selectionColor,\n      }),\n    },\n  } as any\n\n  return <StyledInput ref={composedRef} {...finalProps} />\n})\n","import type { SizeVariantSpreadFunction } from '@tamagui/core'\nimport { Text } from '@tamagui/core'\nimport { getVariableValue, isWeb } from '@tamagui/core'\nimport { getButtonSized } from '@tamagui/get-button-sized'\nimport { getFontSized } from '@tamagui/get-font-sized'\nimport { getSpace } from '@tamagui/get-token'\n\nexport const defaultStyles = {\n  size: '$true',\n  fontFamily: '$body',\n  borderWidth: 1,\n  outlineWidth: 0,\n  color: '$color',\n\n  ...(isWeb\n    ? {\n        tabIndex: 0 as const,\n      }\n    : {\n        focusable: true,\n      }),\n\n  borderColor: '$borderColor',\n  backgroundColor: '$background',\n\n  // this fixes a flex bug where it overflows container\n  minWidth: 0,\n\n  hoverStyle: {\n    borderColor: '$borderColorHover',\n  },\n\n  focusStyle: {\n    borderColor: '$borderColorFocus',\n  },\n\n  focusVisibleStyle: {\n    outlineColor: '$outlineColor',\n    outlineWidth: 2,\n    outlineStyle: 'solid',\n  },\n} as const\n\nexport const inputSizeVariant: SizeVariantSpreadFunction<any> = (\n  val = '$true',\n  extras\n) => {\n  // Check for textarea mode via tag, rows, multiline, or numberOfLines\n  if (\n    extras.props.tag === 'textarea' ||\n    extras.props.rows > 1 ||\n    extras.props.multiline ||\n    extras.props.numberOfLines > 1\n  ) {\n    return textAreaSizeVariant(val, extras)\n  }\n  const buttonStyles = getButtonSized(val, extras)\n  const paddingHorizontal = getSpace(val, {\n    shift: -1,\n    bounds: [2],\n  })\n  const fontStyle = getFontSized(val as any, extras)\n  // lineHeight messes up input on native\n  if (!isWeb && fontStyle) {\n    delete fontStyle['lineHeight']\n  }\n  return {\n    ...fontStyle,\n    ...buttonStyles,\n    paddingHorizontal,\n  }\n}\n\nexport const textAreaSizeVariant: SizeVariantSpreadFunction<any> = (\n  val = '$true',\n  extras\n) => {\n  const { props } = extras\n  const buttonStyles = getButtonSized(val, extras)\n  const fontStyle = getFontSized(val as any, extras)!\n  const lines = props.rows ?? props.numberOfLines\n  const height =\n    typeof lines === 'number' ? lines * getVariableValue(fontStyle.lineHeight) : 'auto'\n  // lineHeight messes up input on native\n  if (!isWeb && fontStyle) {\n    delete fontStyle['lineHeight']\n  }\n  const paddingVertical = getSpace(val, {\n    shift: -2,\n    bounds: [2],\n  })\n  const paddingHorizontal = getSpace(val, {\n    shift: -1,\n    bounds: [2],\n  })\n  return {\n    ...buttonStyles,\n    ...fontStyle,\n    paddingVertical,\n    paddingHorizontal,\n    height,\n  }\n}\nexport const INPUT_NAME = 'Input'\n\nexport const styledBody = [\n  {\n    name: INPUT_NAME,\n    render: 'input',\n    variants: {\n      unstyled: {\n        false: defaultStyles,\n      },\n\n      size: {\n        '...size': inputSizeVariant,\n      },\n\n      disabled: {\n        true: {},\n      },\n    } as const,\n\n    defaultVariants: {\n      unstyled: process.env.TAMAGUI_HEADLESS === '1',\n    },\n  },\n\n  {\n    isInput: true,\n    accept: {\n      placeholderTextColor: 'color',\n      selectionColor: 'color',\n      cursorColor: 'color',\n      selectionHandleColor: 'color',\n      underlineColorAndroid: 'color',\n    } as const,\n\n    validStyles: Text.staticConfig.validStyles,\n  },\n] as const\n","import { Text as TamaguiText, styled } from '@tamagui/core'\n\nexport const Text = styled(TamaguiText, {\n  variants: {\n    unstyled: {\n      false: {\n        color: '$color',\n      },\n    },\n  } as const,\n\n  defaultVariants: {\n    unstyled: process.env.TAMAGUI_HEADLESS === '1',\n  },\n})\n","import './setup'\n\nexport * from '@tamagui/spacer'\nexport * from '@tamagui/accordion'\nexport * from '@tamagui/adapt'\nexport * from '@tamagui/alert-dialog'\nexport * from '@tamagui/animate'\nexport * from '@tamagui/animate-presence'\nexport * from '@tamagui/avatar'\nexport * from '@tamagui/button'\nexport * from '@tamagui/card'\nexport * from '@tamagui/checkbox'\nexport * from '@tamagui/collapsible'\nexport * from '@tamagui/compose-refs'\nexport * from '@tamagui/create-context'\nexport * from '@tamagui/dialog'\nexport * from '@tamagui/font-size'\nexport * from '@tamagui/form'\nexport * from '@tamagui/group'\nexport * from '@tamagui/react-native-media-driver'\nexport * from '@tamagui/elements'\nexport * from '@tamagui/helpers-tamagui'\nexport * from '@tamagui/image'\nexport * from '@tamagui/label'\nexport * from '@tamagui/list-item'\nexport * from '@tamagui/menu'\nexport * from '@tamagui/context-menu'\nexport * from '@tamagui/create-menu'\nexport * from '@tamagui/popover'\nexport * from '@tamagui/popper'\nexport * from '@tamagui/portal'\nexport * from '@tamagui/progress'\nexport * from '@tamagui/radio-group'\nexport * from '@tamagui/scroll-view'\nexport * from '@tamagui/select'\nexport * from '@tamagui/separator'\nexport * from '@tamagui/shapes'\nexport * from '@tamagui/sheet'\nexport * from '@tamagui/slider'\nexport * from '@tamagui/stacks'\nexport * from '@tamagui/switch'\nexport * from '@tamagui/tabs'\nexport * from '@tamagui/text'\nexport * from '@tamagui/theme'\nexport * from '@tamagui/toast'\nexport * from '@tamagui/toggle-group'\nexport * from '@tamagui/tooltip'\nexport * from '@tamagui/use-controllable-state'\nexport * from '@tamagui/use-debounce'\nexport * from '@tamagui/use-force-update'\nexport * from '@tamagui/element'\nexport * from '@tamagui/use-window-dimensions'\nexport * from '@tamagui/visually-hidden'\n\nexport * from './createTamagui'\n\nexport * from './viewTypes'\nexport * from './views/TamaguiProvider'\n\nexport * from './views/Anchor'\nexport * from './views/EnsureFlexed'\nexport * from './views/Fieldset'\nexport * from '@tamagui/input'\nexport * from './views/Spinner'\nexport * from './views/Text'\n\n// since we overlap with ViewProps and potentially others\n// lets be explicit on what gets exported\nexport type {\n  TransitionKeys,\n  TransitionProp,\n  ColorTokens,\n  CreateTamaguiConfig,\n  CreateTamaguiProps,\n  FontColorTokens,\n  FontLanguages,\n  FontLetterSpacingTokens,\n  FontLineHeightTokens,\n  FontFamilyTokens,\n  FontSizeTokens,\n  FontStyleTokens,\n  FontTokens,\n  FontTransformTokens,\n  FontWeightTokens,\n  GenericFont,\n  GenericStackVariants,\n  GenericTamaguiConfig,\n  GenericTextVariants,\n  GetAnimationKeys,\n  GetProps,\n  GetRef,\n  GetThemeValueForKey,\n  GroupNames,\n  Longhands,\n  Media,\n  MediaPropKeys,\n  MediaQueries,\n  MediaQueryState,\n  RadiusTokens,\n  Shorthands,\n  SizeTokens,\n  SpaceTokens,\n  SpecificTokens,\n  StackNonStyleProps,\n  ViewProps,\n  StaticConfig,\n  Styleable,\n  TamaguiBaseTheme,\n  TamaguiBuildOptions,\n  TamaguiComponent,\n  TamaguiConfig,\n  TamaguiCustomConfig,\n  TamaguiElement,\n  TamaguiInternalConfig,\n  TamaguiProviderProps,\n  TamaguiSettings,\n  TamaguiTextElement,\n  TextNonStyleProps,\n  TextProps,\n  ThemeKeys,\n  ThemeName,\n  ThemeParsed,\n  ThemeProps,\n  Themes,\n  ThemeTokens,\n  ThemeValueFallback,\n  Token,\n  Tokens,\n  TypeOverride,\n  Variable,\n  VariantSpreadExtras,\n  VariantSpreadFunction,\n  ZIndexTokens,\n  ViewStyle,\n  TextStyle,\n} from '@tamagui/core'\n\nexport {\n  ClientOnly,\n  Configuration,\n  ComponentContext,\n  GroupContext,\n  FontLanguage,\n  // components\n  Theme,\n  View,\n  createComponent,\n  createFont,\n  createShorthands,\n  createStyledContext,\n  createTokens,\n  createVariable,\n  getConfig,\n  getMedia,\n  getCSSStylesAtomic,\n  getThemes,\n  getToken,\n  getTokenValue,\n  getTokens,\n  getVariable,\n  getVariableName,\n  getVariableValue,\n  insertFont,\n  setConfig,\n  setupDev,\n  // constants\n  isBrowser,\n  isChrome,\n  isClient,\n  isServer,\n  isTamaguiComponent,\n  isTamaguiElement,\n  isTouchable,\n  isVariable,\n  isWeb,\n  isWebTouchable,\n  matchMedia,\n  mediaObjectToString,\n  mediaQueryConfig,\n  mediaState,\n  setOnLayoutStrategy,\n  styled,\n  themeable,\n  // hooks\n  useDidFinishSSR,\n  useEvent,\n  useGet,\n  useIsTouchDevice,\n  useIsomorphicLayoutEffect,\n  useMedia,\n  useProps,\n  usePropsAndStyle,\n  useStyle,\n  useConfiguration,\n  useTheme,\n  useThemeName,\n  variableToString,\n  withStaticProperties,\n} from '@tamagui/core'\n","export const blue = {\n  blue1: 'hsl(212, 35.0%, 9.2%)',\n  blue2: 'hsl(216, 50.0%, 11.8%)',\n  blue3: 'hsl(214, 59.4%, 15.3%)',\n  blue4: 'hsl(214, 65.8%, 17.9%)',\n  blue5: 'hsl(213, 71.2%, 20.2%)',\n  blue6: 'hsl(212, 77.4%, 23.1%)',\n  blue7: 'hsl(211, 85.1%, 27.4%)',\n  blue8: 'hsl(211, 89.7%, 34.1%)',\n  blue9: 'hsl(206, 100%, 50.0%)',\n  blue10: 'hsl(209, 100%, 60.6%)',\n  blue11: 'hsl(210, 100%, 66.1%)',\n  blue12: 'hsl(206, 98.0%, 95.8%)',\n}\n","export const gray = {\n  gray1: 'hsl(0, 0%, 8.5%)',\n  gray2: 'hsl(0, 0%, 11.0%)',\n  gray3: 'hsl(0, 0%, 13.6%)',\n  gray4: 'hsl(0, 0%, 15.8%)',\n  gray5: 'hsl(0, 0%, 17.9%)',\n  gray6: 'hsl(0, 0%, 20.5%)',\n  gray7: 'hsl(0, 0%, 24.3%)',\n  gray8: 'hsl(0, 0%, 31.2%)',\n  gray9: 'hsl(0, 0%, 43.9%)',\n  gray10: 'hsl(0, 0%, 49.4%)',\n  gray11: 'hsl(0, 0%, 62.8%)',\n  gray12: 'hsl(0, 0%, 93.0%)',\n}\n","export const green = {\n  green1: 'hsl(146, 30.0%, 7.4%)',\n  green2: 'hsl(155, 44.2%, 8.4%)',\n  green3: 'hsl(155, 46.7%, 10.9%)',\n  green4: 'hsl(154, 48.4%, 12.9%)',\n  green5: 'hsl(154, 49.7%, 14.9%)',\n  green6: 'hsl(154, 50.9%, 17.6%)',\n  green7: 'hsl(153, 51.8%, 21.8%)',\n  green8: 'hsl(151, 51.7%, 28.4%)',\n  green9: 'hsl(151, 55.0%, 41.5%)',\n  green10: 'hsl(151, 49.3%, 46.5%)',\n  green11: 'hsl(151, 50.0%, 53.2%)',\n  green12: 'hsl(137, 72.0%, 94.0%)',\n}\n","export const orange = {\n  orange1: 'hsl(30, 70.0%, 7.2%)',\n  orange2: 'hsl(28, 100%, 8.4%)',\n  orange3: 'hsl(26, 91.1%, 11.6%)',\n  orange4: 'hsl(25, 88.3%, 14.1%)',\n  orange5: 'hsl(24, 87.6%, 16.6%)',\n  orange6: 'hsl(24, 88.6%, 19.8%)',\n  orange7: 'hsl(24, 92.4%, 24.0%)',\n  orange8: 'hsl(25, 100%, 29.0%)',\n  orange9: 'hsl(24, 94.0%, 50.0%)',\n  orange10: 'hsl(24, 100%, 58.5%)',\n  orange11: 'hsl(24, 100%, 62.2%)',\n  orange12: 'hsl(24, 97.0%, 93.2%)',\n}\n","export const pink = {\n  pink1: 'hsl(318, 25.0%, 9.6%)',\n  pink2: 'hsl(319, 32.2%, 11.6%)',\n  pink3: 'hsl(319, 41.0%, 16.0%)',\n  pink4: 'hsl(320, 45.4%, 18.7%)',\n  pink5: 'hsl(320, 49.0%, 21.1%)',\n  pink6: 'hsl(321, 53.6%, 24.4%)',\n  pink7: 'hsl(321, 61.1%, 29.7%)',\n  pink8: 'hsl(322, 74.9%, 37.5%)',\n  pink9: 'hsl(322, 65.0%, 54.5%)',\n  pink10: 'hsl(323, 72.8%, 59.2%)',\n  pink11: 'hsl(325, 90.0%, 66.4%)',\n  pink12: 'hsl(322, 90.0%, 95.8%)',\n}\n","export const purple = {\n  purple1: 'hsl(284, 20.0%, 9.6%)',\n  purple2: 'hsl(283, 30.0%, 11.8%)',\n  purple3: 'hsl(281, 37.5%, 16.5%)',\n  purple4: 'hsl(280, 41.2%, 20.0%)',\n  purple5: 'hsl(279, 43.8%, 23.3%)',\n  purple6: 'hsl(277, 46.4%, 27.5%)',\n  purple7: 'hsl(275, 49.3%, 34.6%)',\n  purple8: 'hsl(272, 52.1%, 45.9%)',\n  purple9: 'hsl(272, 51.0%, 54.0%)',\n  purple10: 'hsl(273, 57.3%, 59.1%)',\n  purple11: 'hsl(275, 80.0%, 71.0%)',\n  purple12: 'hsl(279, 75.0%, 95.7%)',\n}\n","export const red = {\n  red1: 'hsl(353, 23.0%, 9.8%)',\n  red2: 'hsl(357, 34.4%, 12.0%)',\n  red3: 'hsl(356, 43.4%, 16.4%)',\n  red4: 'hsl(356, 47.6%, 19.2%)',\n  red5: 'hsl(356, 51.1%, 21.9%)',\n  red6: 'hsl(356, 55.2%, 25.9%)',\n  red7: 'hsl(357, 60.2%, 31.8%)',\n  red8: 'hsl(358, 65.0%, 40.4%)',\n  red9: 'hsl(358, 75.0%, 59.0%)',\n  red10: 'hsl(358, 85.3%, 64.0%)',\n  red11: 'hsl(358, 100%, 69.5%)',\n  red12: 'hsl(351, 89.0%, 96.0%)',\n}\n","export const yellow = {\n  yellow1: 'hsl(45, 100%, 5.5%)',\n  yellow2: 'hsl(46, 100%, 6.7%)',\n  yellow3: 'hsl(45, 100%, 8.7%)',\n  yellow4: 'hsl(45, 100%, 10.4%)',\n  yellow5: 'hsl(47, 100%, 12.1%)',\n  yellow6: 'hsl(49, 100%, 14.3%)',\n  yellow7: 'hsl(49, 90.3%, 18.4%)',\n  yellow8: 'hsl(50, 100%, 22.0%)',\n  yellow9: 'hsl(53, 92.0%, 50.0%)',\n  yellow10: 'hsl(54, 100%, 68.0%)',\n  yellow11: 'hsl(48, 100%, 47.0%)',\n  yellow12: 'hsl(53, 100%, 91.0%)',\n}\n","export const blue = {\n  blue1: 'hsl(206, 100%, 99.2%)',\n  blue2: 'hsl(210, 100%, 98.0%)',\n  blue3: 'hsl(209, 100%, 96.5%)',\n  blue4: 'hsl(210, 98.8%, 94.0%)',\n  blue5: 'hsl(209, 95.0%, 90.1%)',\n  blue6: 'hsl(209, 81.2%, 84.5%)',\n  blue7: 'hsl(208, 77.5%, 76.9%)',\n  blue8: 'hsl(206, 81.9%, 65.3%)',\n  blue9: 'hsl(206, 100%, 50.0%)',\n  blue10: 'hsl(208, 100%, 47.3%)',\n  blue11: 'hsl(211, 100%, 43.2%)',\n  blue12: 'hsl(211, 100%, 15.0%)',\n}\n","export const gray = {\n  gray1: 'hsl(0, 0%, 99.0%)',\n  gray2: 'hsl(0, 0%, 97.3%)',\n  gray3: 'hsl(0, 0%, 95.1%)',\n  gray4: 'hsl(0, 0%, 93.0%)',\n  gray5: 'hsl(0, 0%, 90.9%)',\n  gray6: 'hsl(0, 0%, 88.7%)',\n  gray7: 'hsl(0, 0%, 85.8%)',\n  gray8: 'hsl(0, 0%, 78.0%)',\n  gray9: 'hsl(0, 0%, 56.1%)',\n  gray10: 'hsl(0, 0%, 52.3%)',\n  gray11: 'hsl(0, 0%, 43.5%)',\n  gray12: 'hsl(0, 0%, 9.0%)',\n}\n","export const green = {\n  green1: 'hsl(136, 50.0%, 98.9%)',\n  green2: 'hsl(138, 62.5%, 96.9%)',\n  green3: 'hsl(139, 55.2%, 94.5%)',\n  green4: 'hsl(140, 48.7%, 91.0%)',\n  green5: 'hsl(141, 43.7%, 86.0%)',\n  green6: 'hsl(143, 40.3%, 79.0%)',\n  green7: 'hsl(146, 38.5%, 69.0%)',\n  green8: 'hsl(151, 40.2%, 54.1%)',\n  green9: 'hsl(151, 55.0%, 41.5%)',\n  green10: 'hsl(152, 57.5%, 37.6%)',\n  green11: 'hsl(153, 67.0%, 28.5%)',\n  green12: 'hsl(155, 40.0%, 14.0%)',\n}\n","export const orange = {\n  orange1: 'hsl(24, 70.0%, 99.0%)',\n  orange2: 'hsl(24, 83.3%, 97.6%)',\n  orange3: 'hsl(24, 100%, 95.3%)',\n  orange4: 'hsl(25, 100%, 92.2%)',\n  orange5: 'hsl(25, 100%, 88.2%)',\n  orange6: 'hsl(25, 100%, 82.8%)',\n  orange7: 'hsl(24, 100%, 75.3%)',\n  orange8: 'hsl(24, 94.5%, 64.3%)',\n  orange9: 'hsl(24, 94.0%, 50.0%)',\n  orange10: 'hsl(24, 100%, 46.5%)',\n  orange11: 'hsl(24, 100%, 37.0%)',\n  orange12: 'hsl(15, 60.0%, 17.0%)',\n}\n","export const pink = {\n  pink1: 'hsl(322, 100%, 99.4%)',\n  pink2: 'hsl(323, 100%, 98.4%)',\n  pink3: 'hsl(323, 86.3%, 96.5%)',\n  pink4: 'hsl(323, 78.7%, 94.2%)',\n  pink5: 'hsl(323, 72.2%, 91.1%)',\n  pink6: 'hsl(323, 66.3%, 86.6%)',\n  pink7: 'hsl(323, 62.0%, 80.1%)',\n  pink8: 'hsl(323, 60.3%, 72.4%)',\n  pink9: 'hsl(322, 65.0%, 54.5%)',\n  pink10: 'hsl(322, 63.9%, 50.7%)',\n  pink11: 'hsl(322, 75.0%, 46.0%)',\n  pink12: 'hsl(320, 70.0%, 13.5%)',\n}\n","export const purple = {\n  purple1: 'hsl(280, 65.0%, 99.4%)',\n  purple2: 'hsl(276, 100%, 99.0%)',\n  purple3: 'hsl(276, 83.1%, 97.0%)',\n  purple4: 'hsl(275, 76.4%, 94.7%)',\n  purple5: 'hsl(275, 70.8%, 91.8%)',\n  purple6: 'hsl(274, 65.4%, 87.8%)',\n  purple7: 'hsl(273, 61.0%, 81.7%)',\n  purple8: 'hsl(272, 60.0%, 73.5%)',\n  purple9: 'hsl(272, 51.0%, 54.0%)',\n  purple10: 'hsl(272, 46.8%, 50.3%)',\n  purple11: 'hsl(272, 50.0%, 45.8%)',\n  purple12: 'hsl(272, 66.0%, 16.0%)',\n}\n","export const red = {\n  red1: 'hsl(359, 100%, 99.4%)',\n  red2: 'hsl(359, 100%, 98.6%)',\n  red3: 'hsl(360, 100%, 96.8%)',\n  red4: 'hsl(360, 97.9%, 94.8%)',\n  red5: 'hsl(360, 90.2%, 91.9%)',\n  red6: 'hsl(360, 81.7%, 87.8%)',\n  red7: 'hsl(359, 74.2%, 81.7%)',\n  red8: 'hsl(359, 69.5%, 74.3%)',\n  red9: 'hsl(358, 75.0%, 59.0%)',\n  red10: 'hsl(358, 69.4%, 55.2%)',\n  red11: 'hsl(358, 65.0%, 48.7%)',\n  red12: 'hsl(354, 50.0%, 14.6%)',\n}\n","export const yellow = {\n  yellow1: 'hsl(60, 54.0%, 98.5%)',\n  yellow2: 'hsl(52, 100%, 95.5%)',\n  yellow3: 'hsl(55, 100%, 90.9%)',\n  yellow4: 'hsl(54, 100%, 86.6%)',\n  yellow5: 'hsl(52, 97.9%, 82.0%)',\n  yellow6: 'hsl(50, 89.4%, 76.1%)',\n  yellow7: 'hsl(47, 80.4%, 68.0%)',\n  yellow8: 'hsl(48, 100%, 46.1%)',\n  yellow9: 'hsl(53, 92.0%, 50.0%)',\n  yellow10: 'hsl(50, 100%, 48.5%)',\n  yellow11: 'hsl(42, 100%, 29.0%)',\n  yellow12: 'hsl(40, 55.0%, 13.5%)',\n}\n","export function isMinusZero(value: number): boolean {\n  return 1 / value === Number.NEGATIVE_INFINITY\n}\n","import type {\n  CreateThemeOptions,\n  CreateThemePalette,\n  GenericTheme,\n  ThemeMask,\n} from './createThemeTypes'\n\nexport type ThemeInfo = {\n  palette: CreateThemePalette\n  definition: ThemeMask\n  options?: CreateThemeOptions\n  cache: Map<any, any>\n}\n\nconst THEME_INFO = new Map<string, ThemeInfo>()\n\nexport const getThemeInfo = (\n  theme: GenericTheme | ThemeMask,\n  name?: string\n): ThemeInfo | undefined => {\n  return THEME_INFO.get(name || JSON.stringify(theme))\n}\n\nexport const setThemeInfo = (\n  theme: GenericTheme | ThemeMask,\n  info: Pick<ThemeInfo, 'palette' | 'definition' | 'options'> & {\n    name?: string\n  }\n): void => {\n  const next = {\n    ...info,\n    cache: new Map(),\n  }\n  THEME_INFO.set(info.name || JSON.stringify(theme), next)\n  THEME_INFO.set(JSON.stringify(info.definition), next)\n}\n","import type {\n  CreateThemeOptions,\n  CreateThemePalette,\n  GenericTheme,\n  ThemeMask,\n} from './createThemeTypes'\nimport { isMinusZero } from './isMinusZero'\nimport { setThemeInfo } from './themeInfo'\n\nconst identityCache = new Map()\n\nexport function createThemeWithPalettes<\n  Definition extends ThemeMask,\n  Extras extends GenericTheme = {},\n>(\n  palettes: Record<string, CreateThemePalette>,\n  defaultPalette: string,\n  definition: Definition,\n  options?: CreateThemeOptions,\n  name?: string,\n  skipCache = false\n): {\n  [key in keyof Definition | keyof Extras]: string\n} {\n  if (!palettes[defaultPalette]) {\n    throw new Error(`No palette: ${defaultPalette}`)\n  }\n  const newDef = { ...definition }\n  for (const key in definition) {\n    let val = definition[key]\n    if (typeof val === 'string' && val[0] === '$') {\n      const [altPaletteName$, altPaletteIndex] = val.split('.')\n      const altPaletteName = altPaletteName$.slice(1)\n      const parentName = defaultPalette.split('_')[0]\n      const altPalette =\n        palettes[altPaletteName] || palettes[`${parentName}_${altPaletteName}`]\n\n      if (altPalette) {\n        const next = getValue(altPalette, +altPaletteIndex)\n        if (typeof next !== 'undefined') {\n          newDef[key] = next as any\n        }\n      }\n    }\n  }\n\n  return createTheme(palettes[defaultPalette], newDef, options, name, skipCache)\n}\n\nexport function createTheme<\n  Definition extends ThemeMask,\n  Extras extends GenericTheme = {},\n>(\n  palette: CreateThemePalette,\n  definition: Definition,\n  options?: CreateThemeOptions,\n  name?: string,\n  skipCache = false\n): {\n  [key in keyof Definition | keyof Extras]: string\n} {\n  const cacheKey = skipCache ? '' : JSON.stringify([name, palette, definition, options])\n  if (!skipCache) {\n    if (identityCache.has(cacheKey)) {\n      return identityCache.get(cacheKey)\n    }\n  }\n\n  const theme = {\n    ...(Object.fromEntries(\n      Object.entries(definition).map(([key, offset]) => {\n        return [key, getValue(palette, offset)]\n      })\n    ) as any),\n    ...options?.nonInheritedValues,\n  }\n\n  setThemeInfo(theme, { palette, definition, options, name })\n\n  if (cacheKey) {\n    identityCache.set(cacheKey, theme)\n  }\n\n  return theme\n}\n\nconst getValue = (palette: CreateThemePalette, value: string | number) => {\n  if (!palette) {\n    throw new Error(`No palette!`)\n  }\n  if (typeof value === 'string') {\n    return value\n  }\n  const max = palette.length - 1\n  const isPositive = value === 0 ? !isMinusZero(value) : value >= 0\n  const next = isPositive ? value : max + value\n  const index = Math.min(Math.max(0, next), max)\n  return palette[index]\n}\n\ntype SubThemeKeys<ParentKeys, ChildKeys> = `${ParentKeys extends string\n  ? ParentKeys\n  : never}_${ChildKeys extends string ? ChildKeys : never}`\n\ntype ChildGetter<Name extends string | number | symbol, Theme extends GenericTheme> = (\n  name: Name,\n  theme: Theme\n) => { [key: string]: Theme }\n\nexport function addChildren<\n  Themes extends { [key: string]: GenericTheme },\n  GetChildren extends ChildGetter<keyof Themes, Themes[keyof Themes]>,\n>(\n  themes: Themes,\n  getChildren: GetChildren\n): Themes & {\n  [key in SubThemeKeys<keyof Themes, keyof ReturnType<GetChildren>>]: Themes[keyof Themes]\n} {\n  const out = { ...themes }\n  for (const key in themes) {\n    const subThemes = getChildren(key, themes[key])\n    for (const sKey in subThemes) {\n      out[`${key}_${sKey}`] = subThemes[sKey] as any\n    }\n  }\n  return out as any\n}\n","type ObjectType = Record<PropertyKey, unknown>\n\ntype PickByValue<OBJ_T, VALUE_T> = // From https://stackoverflow.com/a/55153000\n  Pick<OBJ_T, { [K in keyof OBJ_T]: OBJ_T[K] extends VALUE_T ? K : never }[keyof OBJ_T]>\n\ntype ObjectEntries<OBJ_T> = // From https://stackoverflow.com/a/60142095\n  { [K in keyof OBJ_T]: [keyof PickByValue<OBJ_T, OBJ_T[K]>, OBJ_T[K]] }[keyof OBJ_T][]\n\nexport const objectKeys = <O extends object>(obj: O) => Object.keys(obj) as Array<keyof O>\n\nexport function objectEntries<OBJ_T extends ObjectType>(\n  obj: OBJ_T\n): ObjectEntries<OBJ_T> {\n  return Object.entries(obj) as ObjectEntries<OBJ_T>\n}\n\ntype EntriesType =\n  | [PropertyKey, unknown][]\n  | ReadonlyArray<readonly [PropertyKey, unknown]>\n\n// Existing Utils\ntype DeepWritable<OBJ_T> = { -readonly [P in keyof OBJ_T]: DeepWritable<OBJ_T[P]> }\ntype UnionToIntersection<UNION_T> = // From https://stackoverflow.com/a/50375286\n  (UNION_T extends any ? (k: UNION_T) => void : never) extends (k: infer I) => void\n    ? I\n    : never\n\n// New Utils\ntype UnionObjectFromArrayOfPairs<ARR_T extends EntriesType> =\n  DeepWritable<ARR_T> extends (infer R)[]\n    ? R extends [infer key, infer val]\n      ? { [prop in key & PropertyKey]: val }\n      : never\n    : never\ntype MergeIntersectingObjects<ObjT> = { [key in keyof ObjT]: ObjT[key] }\ntype EntriesToObject<ARR_T extends EntriesType> = MergeIntersectingObjects<\n  UnionToIntersection<UnionObjectFromArrayOfPairs<ARR_T>>\n>\n\nexport function objectFromEntries<ARR_T extends EntriesType>(\n  arr: ARR_T\n): EntriesToObject<ARR_T> {\n  return Object.fromEntries(arr) as EntriesToObject<ARR_T>\n}\n","import type { CreateMask, MaskFunction, MaskOptions } from './createThemeTypes'\nimport { objectEntries, objectFromEntries } from './helpers'\nimport { isMinusZero } from './isMinusZero'\n\nexport const createMask = <C extends CreateMask | MaskFunction>(\n  createMask: C\n): CreateMask =>\n  typeof createMask === 'function'\n    ? { name: createMask.name || 'unnamed', mask: createMask }\n    : createMask\n\nexport const skipMask: CreateMask = {\n  name: 'skip-mask',\n  mask: (template, opts) => {\n    const { skip } = opts\n    const result = Object.fromEntries(\n      Object.entries(template)\n        .filter(([k]) => !skip || !(k in skip))\n        .map(([k, v]) => [k, applyOverrides(k, v, opts)])\n    ) as typeof template\n\n    return result\n  },\n}\n\nfunction applyOverrides(key: string, value: number | string, opts: MaskOptions) {\n  let override: string | number | undefined\n  let strategy = opts.overrideStrategy\n\n  const overrideSwap = opts.overrideSwap?.[key]\n  if (typeof overrideSwap !== 'undefined') {\n    override = overrideSwap\n    strategy = 'swap'\n  } else {\n    const overrideShift = opts.overrideShift?.[key]\n    if (typeof overrideShift !== 'undefined') {\n      override = overrideShift\n      strategy = 'shift'\n    } else {\n      const overrideDefault = opts.override?.[key]\n      if (typeof overrideDefault !== 'undefined') {\n        override = overrideDefault\n        strategy = opts.overrideStrategy\n      }\n    }\n  }\n\n  if (typeof override === 'undefined') return value\n  if (typeof override === 'string') return value\n\n  if (strategy === 'swap') {\n    return override\n  }\n\n  return value\n}\n\nexport const createIdentityMask = (): CreateMask => ({\n  name: 'identity-mask',\n  mask: (template, opts) => skipMask.mask(template, opts),\n})\n\nexport const createInverseMask = (): CreateMask => {\n  const mask: CreateMask = {\n    name: 'inverse-mask',\n    mask: (template, opts) => {\n      const inversed = objectFromEntries(\n        objectEntries(template).map(([k, v]) => [k, -v])\n      ) as any\n      return skipMask.mask(inversed, opts)\n    },\n  }\n  return mask\n}\n\ntype ShiftMaskOptions = { inverse?: boolean }\n\nexport const createShiftMask = (\n  { inverse }: ShiftMaskOptions = {},\n  defaultOptions?: MaskOptions\n): CreateMask => {\n  const mask: CreateMask = {\n    name: 'shift-mask',\n    mask: (template, opts) => {\n      const {\n        override,\n        overrideStrategy = 'shift',\n        max: maxIn,\n        palette,\n        min = 0,\n        strength = 1,\n      } = { ...defaultOptions, ...opts }\n      const values = Object.entries(template)\n      const max =\n        maxIn ?? (palette ? Object.values(palette).length - 1 : Number.POSITIVE_INFINITY)\n      const out = {}\n      for (const [key, value] of values) {\n        if (typeof value === 'string') continue\n        if (typeof override?.[key] === 'number') {\n          const overrideVal = override[key] as number\n          out[key] = overrideStrategy === 'shift' ? value + overrideVal : overrideVal\n          continue\n        }\n        if (typeof override?.[key] === 'string') {\n          out[key] = override[key]\n          continue\n        }\n        const isPositive = value === 0 ? !isMinusZero(value) : value >= 0\n        const direction = isPositive ? 1 : -1\n        const invert = inverse ? -1 : 1\n        const next = value + strength * direction * invert\n        const clamped = isPositive\n          ? Math.max(min, Math.min(max, next))\n          : Math.min(-min, Math.max(-max, next))\n\n        out[key] = clamped\n      }\n\n      const skipped = skipMask.mask(out, opts) as typeof template\n      return skipped\n    },\n  }\n  return mask\n}\n\nexport const createWeakenMask = (defaultOptions?: MaskOptions): CreateMask => ({\n  name: 'soften-mask',\n  mask: createShiftMask({}, defaultOptions).mask,\n})\n\nexport const createSoftenMask: (defaultOptions?: MaskOptions) => CreateMask =\n  createWeakenMask\n\nexport const createStrengthenMask = (defaultOptions?: MaskOptions): CreateMask => ({\n  name: 'strengthen-mask',\n  mask: createShiftMask({ inverse: true }, defaultOptions).mask,\n})\n","import { createTheme } from './createTheme'\nimport type { CreateMask, GenericTheme, MaskOptions, ThemeMask } from './createThemeTypes'\nimport type { ThemeInfo } from './themeInfo'\nimport { getThemeInfo, setThemeInfo } from './themeInfo'\n\nexport function applyMask<Theme extends GenericTheme | ThemeMask>(\n  theme: Theme,\n  mask: CreateMask,\n  options: MaskOptions = {},\n  parentName?: string,\n  nextName?: string\n): Theme {\n  const info = getThemeInfo(theme, parentName)\n  if (!info) {\n    throw new Error(\n      process.env.NODE_ENV !== 'production'\n        ? `No info found for theme, you must pass the theme created by createThemeFromPalette directly to extendTheme`\n        : `❌ Err2`\n    )\n  }\n\n  const next = applyMaskStateless(info, mask, options, parentName)\n\n  setThemeInfo(next.theme, {\n    definition: next.definition,\n    palette: info.palette,\n    name: nextName,\n  })\n\n  return next.theme as Theme\n}\n\nexport function applyMaskStateless<Theme extends GenericTheme | ThemeMask>(\n  info: ThemeInfo,\n  mask: CreateMask,\n  options: MaskOptions = {},\n  parentName?: string\n): ThemeInfo & {\n  theme: Theme\n} {\n  const skip = {\n    ...options.skip,\n  }\n\n  // skip nonInheritedValues from parent theme\n  if (info.options?.nonInheritedValues) {\n    for (const key in info.options.nonInheritedValues) {\n      skip[key] = 1\n    }\n  }\n\n  // convert theme back to template first\n  const maskOptions = {\n    parentName,\n    palette: info.palette,\n    ...options,\n    skip,\n  }\n\n  const template = mask.mask(info.definition, maskOptions)\n  const theme = createTheme(info.palette, template) as Theme\n\n  return {\n    ...info,\n    cache: new Map(),\n    definition: template,\n    theme,\n  }\n}\n","import type {\n  MaskDefinitions,\n  PaletteDefinitions,\n  Template,\n  TemplateDefinitions,\n  ThemeDefinitions,\n  ThemeUsingMask,\n} from '@tamagui/create-theme'\nimport {\n  applyMask,\n  createMask,\n  createThemeWithPalettes,\n  objectEntries,\n  objectFromEntries,\n} from '@tamagui/create-theme'\nimport type { Narrow } from '@tamagui/web'\nimport type { GetThemeFn } from './types'\n\nexport type ThemeBuilderInternalState = {\n  palettes?: PaletteDefinitions\n  templates?: TemplateDefinitions\n  themes?: ThemeDefinitions\n  masks?: MaskDefinitions\n}\n\ntype ObjectStringKeys<A extends object | undefined> = A extends object\n  ? Exclude<keyof A, symbol | number>\n  : never\n\ntype GetGeneratedThemeFromTemplate<Template, TD> = {\n  [key in keyof Template]: string\n}\n\ntype GetParentTheme<P, Themes extends ThemeDefinitions | undefined> = P extends string\n  ? P extends keyof Themes\n    ? Themes[P]\n    : GetParentName<P> extends keyof Themes\n      ? Themes[GetParentName<P>]\n      : GetParentName<GetParentName<P>> extends keyof Themes\n        ? Themes[GetParentName<GetParentName<P>>]\n        : GetParentName<GetParentName<GetParentName<P>>> extends keyof Themes\n          ? Themes[GetParentName<GetParentName<GetParentName<P>>>]\n          : never\n  : never\n\ntype GetGeneratedTheme<TD, S extends ThemeBuilderInternalState> = TD extends {\n  theme: infer T\n}\n  ? T\n  : TD extends { parent: infer P }\n    ? GetGeneratedTheme<GetParentTheme<P, S['themes']>, S>\n    : TD extends { template: infer T }\n      ? T extends keyof S['templates']\n        ? GetGeneratedThemeFromTemplate<S['templates'][T], TD>\n        : TD\n      : TD\n\ntype ThemeBuilderBuildResult<\n  S extends ThemeBuilderInternalState,\n  FinalTheme extends Record<string, string | number> = Record<string, string>,\n> =\n  Record<string, string> extends FinalTheme\n    ? FinalTheme extends Record<string, string>\n      ? {\n          [Key in keyof S['themes']]: GetGeneratedTheme<S['themes'][Key], S>\n        }\n      : {\n          [Key in keyof S['themes']]: FinalTheme\n        }\n    : {\n        [Key in keyof S['themes']]: FinalTheme\n      }\n\ntype GetParentName<N extends string> =\n  N extends `${infer A}_${infer B}_${infer C}_${infer D}_${string}`\n    ? `${A}_${B}_${C}_${D}`\n    : N extends `${infer A}_${infer B}_${infer C}_${string}`\n      ? `${A}_${B}_${C}`\n      : N extends `${infer A}_${infer B}_${string}`\n        ? `${A}_${B}`\n        : N extends `${infer A}_${string}`\n          ? `${A}`\n          : never\n\n// Flatten union types into a single object with optional properties\ntype UnionToIntersection<U> = (U extends any ? (k: U) => void : never) extends (\n  k: infer I\n) => void\n  ? I\n  : never\n\ntype Prettify<T> = {\n  [K in keyof T]: T[K]\n} & {}\n\ntype FlattenUnion<T extends Record<string, string | number>> =\n  Prettify<{\n    [K in keyof UnionToIntersection<T>]: UnionToIntersection<T>[K]\n  }> extends infer R extends Record<string, string | number>\n    ? R\n    : never\n\nexport class ThemeBuilder<\n  State extends ThemeBuilderInternalState = ThemeBuilderInternalState,\n  FinalTheme extends Record<string, string | number> = Record<string, string>,\n> {\n  private _getThemeFn?: GetThemeFn<FinalTheme>\n\n  constructor(public state: State) {}\n\n  addPalettes<const P extends PaletteDefinitions>(palettes: P) {\n    this.state.palettes = {\n      // as {} prevents generic string key merge messing up types\n      ...(this.state.palettes as {}),\n      ...palettes,\n    }\n    return this as any as ThemeBuilder<\n      State & {\n        palettes: P\n      },\n      FinalTheme\n    >\n  }\n\n  addTemplates<const T extends TemplateDefinitions>(templates: T) {\n    this.state.templates = {\n      // as {} prevents generic string key merge messing up types\n      ...(this.state.templates as {}),\n      ...templates,\n    }\n    return this as any as ThemeBuilder<\n      State & {\n        templates: T\n      },\n      FinalTheme\n    >\n  }\n\n  addMasks<const M extends MaskDefinitions>(masks: M) {\n    this.state.masks = {\n      // as {} prevents generic string key merge messing up types\n      ...(this.state.masks as {}),\n      ...(objectFromEntries(\n        objectEntries(masks).map(([key, val]) => [key, createMask(val)])\n      ) as M),\n    }\n    return this as any as ThemeBuilder<\n      State & {\n        masks: M\n      },\n      FinalTheme\n    >\n  }\n\n  // for dev mode only really\n  _addedThemes: { type: 'themes' | 'childThemes'; args: any }[] = []\n\n  addThemes<const T extends ThemeDefinitions<ObjectStringKeys<State['masks']>>>(\n    themes: T\n  ) {\n    this._addedThemes.push({ type: 'themes', args: [themes] })\n\n    this.state.themes = {\n      // as {} prevents generic string key merge messing up types\n      ...(this.state.themes as {}),\n      ...themes,\n    }\n\n    // type TemplateToTheme<X> = State['templates'] extends {}\n    //   ? X extends { template: infer Y; nonInheritedValues: infer Z }\n    //     ? Y extends keyof State['templates']\n    //       ? { theme: Record<keyof State['templates'][Y] | keyof Z, string> }\n    //       : X\n    //     : X\n    //   : X\n\n    return this as any as ThemeBuilder<\n      Omit<State, 'themes'> & {\n        // lets infer template themes directly onto here to avoid some type nesting issues later one\n        // themes: {\n        //   [Key in keyof T]: TemplateToTheme<T[Key]>\n        // } & State['themes']\n        themes: T\n      },\n      FinalTheme\n    >\n  }\n\n  // these wont be typed to save some complexity and because they don't need to be typed!\n  addComponentThemes<\n    CTD extends Narrow<ThemeDefinitions<ObjectStringKeys<State['masks']>>>,\n  >(\n    childThemeDefinition: CTD,\n    options?: {\n      avoidNestingWithin?: string[]\n    }\n  ) {\n    void this.addChildThemes(childThemeDefinition, options)\n    return this\n  }\n\n  addChildThemes<\n    CTD extends Narrow<ThemeDefinitions<ObjectStringKeys<State['masks']>>>,\n    const AvoidNestingWithin extends string[] = [],\n  >(\n    childThemeDefinition: CTD,\n    options?: {\n      avoidNestingWithin?: AvoidNestingWithin\n    }\n  ) {\n    const currentThemes = this.state.themes as State['themes']\n    if (!currentThemes) {\n      throw new Error(\n        `No themes defined yet, use addThemes first to set your base themes`\n      )\n    }\n\n    this._addedThemes.push({ type: 'childThemes', args: [childThemeDefinition, options] })\n\n    // AvoidNestingWithin[number] exclude isn't working here...\n    type CurrentNames = Exclude<keyof typeof currentThemes, symbol | number>\n    type ChildNames = Exclude<keyof CTD, symbol | number>\n\n    const currentThemeNames = Object.keys(currentThemes) as CurrentNames[]\n    const incomingThemeNames = Object.keys(childThemeDefinition) as ChildNames[]\n\n    const namesWithDefinitions = currentThemeNames.flatMap((prefix) => {\n      const avoidNestingWithin = options?.avoidNestingWithin\n      if (avoidNestingWithin) {\n        if (\n          avoidNestingWithin.some(\n            (avoidName) => prefix.startsWith(avoidName) || prefix.endsWith(avoidName)\n          )\n        ) {\n          return []\n        }\n      }\n\n      return incomingThemeNames\n        .map((subName) => {\n          const fullName = `${prefix}_${subName}`\n          const definition = childThemeDefinition[subName]\n\n          if ('avoidNestingWithin' in definition) {\n            const avoidNest = definition.avoidNestingWithin as string[]\n            if (\n              avoidNest.some((name) => {\n                // For base scheme names (light/dark), use exact match to avoid matching derivatives\n                if ((name === 'light' || name === 'dark') && prefix.includes('_')) {\n                  return false\n                }\n                return prefix.startsWith(name) || prefix.endsWith(name)\n              })\n            ) {\n              return null as never\n            }\n          }\n\n          // Avoid double-nesting: don't add a child theme to a parent that already ends with that child\n          // e.g., don't create light_blue_accent_accent from light_blue_accent + accent\n          if (prefix.endsWith(`_${subName}`)) {\n            return null as never\n          }\n\n          return [fullName, definition] as const\n        })\n        .filter(Boolean)\n    })\n\n    type ChildThemes = {\n      [key in `${CurrentNames}_${ChildNames}`]: CTD & {\n        parent: GetParentName<key>\n      }\n    }\n\n    const childThemes = Object.fromEntries(namesWithDefinitions) as any as ChildThemes\n\n    const next = {\n      // as {} prevents generic string key merge messing up types\n      ...(this.state.themes as {}),\n      ...childThemes,\n    }\n\n    // @ts-ignore\n    this.state.themes = next\n\n    return this as any as ThemeBuilder<\n      State & {\n        themes: ChildThemes\n      },\n      FinalTheme\n    >\n  }\n\n  getTheme<NewTheme extends Record<string, string | number>>(\n    fn: (props: {\n      name: string\n      theme: GetGeneratedTheme<State['themes'][keyof State['themes']], State>\n      scheme?: 'light' | 'dark'\n      parentName: string\n      parentNames: string[]\n      level: number\n      palette?: string[]\n      template?: Template\n    }) => NewTheme\n  ) {\n    this._getThemeFn = fn as any\n    return this as any as ThemeBuilder<State, FlattenUnion<NewTheme>>\n  }\n\n  build(): ThemeBuilderBuildResult<State, FinalTheme> {\n    if (!this.state.themes) {\n      return {} as any\n    }\n\n    const out = {}\n    const maskedThemes: {\n      parentName: string\n      themeName: string\n      mask: ThemeUsingMask\n    }[] = []\n\n    for (const themeName in this.state.themes) {\n      const nameParts = themeName.split('_')\n      const parentName = nameParts.slice(0, nameParts.length - 1).join('_')\n\n      const definitions = this.state.themes[themeName]\n      const themeDefinition = Array.isArray(definitions)\n        ? (() => {\n            const found = definitions.find(\n              // endWith match stronger than startsWith\n              (d) =>\n                d.parent\n                  ? parentName.endsWith(d.parent!) || parentName.startsWith(d.parent!)\n                  : true\n            )\n            if (!found) {\n              return null\n            }\n            return found\n          })()\n        : definitions\n\n      if (!themeDefinition) {\n        // `No parent for ${themeName}: ${parentName} - Continuing...`\n        continue\n      }\n\n      if ('theme' in themeDefinition) {\n        out[themeName] = themeDefinition.theme\n      } else if ('mask' in themeDefinition) {\n        maskedThemes.push({ parentName, themeName, mask: themeDefinition })\n      } else {\n        let {\n          palette: paletteName = '',\n          template: templateName,\n          ...options\n        } = themeDefinition\n\n        const parentDefinition = this.state.themes[parentName]\n\n        if (!this.state.palettes) {\n          throw new Error(\n            `No palettes defined for theme with palette expected: ${themeName}`\n          )\n        }\n\n        let palette = this.state.palettes[paletteName || '']\n        let attemptParentName = `${parentName}_${paletteName}`\n\n        while (!palette && attemptParentName) {\n          if (attemptParentName in this.state.palettes) {\n            palette = this.state.palettes[attemptParentName]\n            paletteName = attemptParentName\n          } else {\n            attemptParentName = attemptParentName.split('_').slice(0, -1).join('_')\n          }\n        }\n\n        if (!palette) {\n          const msg =\n            process.env.NODE_ENV !== 'production'\n              ? `: ${themeName}: ${paletteName}\n          Definition: ${JSON.stringify(themeDefinition)}\n          Parent: ${JSON.stringify(parentDefinition)}\n          Potential: (${Object.keys(this.state.palettes).join(', ')})`\n              : ``\n          throw new Error(`No palette for theme${msg}`)\n        }\n\n        const template =\n          this.state.templates?.[templateName] ??\n          // fall back to finding the scheme specific on if it exists\n          this.state.templates?.[`${nameParts[0]}_${templateName}`]\n\n        if (!template) {\n          throw new Error(\n            `No template for theme ${themeName}: ${templateName} in templates:\\n- ${Object.keys(this.state.templates || {}).join('\\n - ')}`\n          )\n        }\n\n        const theme = createThemeWithPalettes(\n          this.state.palettes,\n          paletteName,\n          template,\n          options,\n          themeName,\n          true\n        )\n\n        out[themeName] = this._getThemeFn\n          ? {\n              ...theme,\n              ...this._getThemeFn({\n                theme,\n                name: themeName,\n                level: nameParts.length,\n                parentName,\n                scheme: /^(light|dark)$/.test(nameParts[0])\n                  ? (nameParts[0] as 'light' | 'dark')\n                  : undefined,\n                parentNames: nameParts.slice(0, -1),\n                palette,\n                template,\n              }),\n            }\n          : theme\n      }\n    }\n\n    for (const { mask, themeName, parentName } of maskedThemes) {\n      const parent = out[parentName]\n\n      if (!parent) {\n        // `No parent theme found with name ${parentName} for theme ${themeName} to use as a mask target - Continuing...`\n        continue\n      }\n\n      const { mask: maskName, ...options } = mask\n      let maskFunction = this.state.masks?.[maskName]\n\n      if (!maskFunction) {\n        throw new Error(`No mask ${maskName}`)\n      }\n\n      const parentTheme = this.state.themes[parentName]\n\n      if (parentTheme && 'childOptions' in parentTheme) {\n        const { mask, ...childOpts } = parentTheme.childOptions as any\n        if (mask) {\n          maskFunction = this.state.masks?.[mask]\n        }\n        Object.assign(options, childOpts)\n      }\n\n      out[themeName] = applyMask(\n        parent,\n        maskFunction as any,\n        options,\n        parentName,\n        themeName\n      )\n    }\n\n    return out as any\n  }\n}\n\nexport function createThemeBuilder() {\n  return new ThemeBuilder({})\n}\n\n// // test types\n// let x = createThemeBuilder()\n//   .addMasks({\n//     test: {\n//       name: 'mask',\n//       mask: (() => {}) as any,\n//     },\n//   })\n//   .addThemes({\n//     light: {\n//       template: '',\n//       palette: '',\n//     },\n//     dark: {\n//       mask: 'test',\n//     },\n//   })\n//   .addChildThemes({\n//     List: [\n//       {\n//         parent: '',\n//         mask: 'test',\n//       },\n//     ],\n//   })\n\n// x\n\n// x.state.themes\n// x.state.masks\n\n// let y = x.addChildThemes({\n//   blue: {\n//     mask: 'ok',\n//   },\n// })\n","export function postfixObjKeys<A extends { [key: string]: string }, B extends string>(\n  obj: A,\n  postfix: B\n): {\n  [Key in `${keyof A extends string ? keyof A : never}${B}`]: string\n} {\n  return Object.fromEntries(\n    Object.entries(obj).map(([k, v]) => [`${k}${postfix}`, v])\n  ) as any\n}\n\n// a bit odd but keeping backward compat for values >8 while fixing below\nexport function sizeToSpace(v: number) {\n  if (v === 0) return 0\n  if (v === 2) return 0.5\n  if (v === 4) return 1\n  if (v === 8) return 1.5\n  if (v <= 16) return Math.round(v * 0.333)\n  return Math.floor(v * 0.7 - 12)\n}\n\nexport function objectFromEntries<ARR_T extends EntriesType>(\n  arr: ARR_T\n): EntriesToObject<ARR_T> {\n  return Object.fromEntries(arr) as EntriesToObject<ARR_T>\n}\n\nexport type EntriesType =\n  | [PropertyKey, unknown][]\n  | ReadonlyArray<readonly [PropertyKey, unknown]>\n\nexport type DeepWritable<OBJ_T> = { -readonly [P in keyof OBJ_T]: DeepWritable<OBJ_T[P]> }\nexport type UnionToIntersection<UNION_T> = // From https://stackoverflow.com/a/50375286\n  (UNION_T extends any ? (k: UNION_T) => void : never) extends (k: infer I) => void\n    ? I\n    : never\n\nexport type UnionObjectFromArrayOfPairs<ARR_T extends EntriesType> =\n  DeepWritable<ARR_T> extends (infer R)[]\n    ? R extends [infer key, infer val]\n      ? { [prop in key & PropertyKey]: val }\n      : never\n    : never\nexport type MergeIntersectingObjects<ObjT> = { [key in keyof ObjT]: ObjT[key] }\nexport type EntriesToObject<ARR_T extends EntriesType> = MergeIntersectingObjects<\n  UnionToIntersection<UnionObjectFromArrayOfPairs<ARR_T>>\n>\n\nexport function objectKeys<O extends object>(obj: O) {\n  return Object.keys(obj) as Array<keyof O>\n}\n","import { sizeToSpace } from './utils'\n\n// --- tokens ---\n\n// should roughly map to button/input etc height at each level\n// fonts should match that height/lineHeight at each stop\n// so these are really non-linear on purpose\n// why?\n//   - at sizes <1, used for fine grained things (borders, smallest paddingY)\n//     - so smallest padY should be roughly 1-4px so it can join with lineHeight\n//   - at sizes >=1, have to consider \"pressability\" (jumps up)\n//   - after that it should go upwards somewhat naturally\n//   - H1 / headings top out at 10 naturally, so after 10 we can go upwards faster\n//  but also one more wrinkle...\n//  space is used in conjunction with size\n//  i'm setting space to generally just a fixed fraction of size (~1/3-2/3 still fine tuning)\nexport const size = {\n  $0: 0,\n  '$0.25': 2,\n  '$0.5': 4,\n  '$0.75': 8,\n  $1: 20,\n  '$1.5': 24,\n  $2: 28,\n  '$2.5': 32,\n  $3: 36,\n  '$3.5': 40,\n  $4: 44,\n  $true: 44,\n  '$4.5': 48,\n  $5: 52,\n  $6: 64,\n  $7: 74,\n  $8: 84,\n  $9: 94,\n  $10: 104,\n  $11: 124,\n  $12: 144,\n  $13: 164,\n  $14: 184,\n  $15: 204,\n  $16: 224,\n  $17: 224,\n  $18: 244,\n  $19: 264,\n  $20: 284,\n}\n\ntype SizeKeysIn = keyof typeof size\ntype Sizes = {\n  [Key in SizeKeysIn as Key extends `$${infer K}` ? K : Key]: number\n}\ntype SizeKeys = keyof Sizes\n\nexport const spaces = Object.entries(size).map(([k, v]) => {\n  return [k, sizeToSpace(v)] as const\n})\n\nexport const spacesNegative = spaces.slice(1).map(([k, v]) => [`-${k.slice(1)}`, -v])\n\ntype SizeKeysWithNegatives =\n  | Exclude<`-${SizeKeys extends `$${infer Key}` ? Key : SizeKeys}`, '-0'>\n  | SizeKeys\n\nexport const space: {\n  [Key in SizeKeysWithNegatives]: Key extends keyof Sizes ? Sizes[Key] : number\n} = {\n  ...Object.fromEntries(spaces),\n  ...Object.fromEntries(spacesNegative),\n} as any\n\nexport const zIndex = {\n  0: 0,\n  1: 100,\n  2: 200,\n  3: 300,\n  4: 400,\n  5: 500,\n}\n\nexport const radius = {\n  0: 0,\n  1: 3,\n  2: 5,\n  3: 7,\n  4: 9,\n  true: 9,\n  5: 10,\n  6: 16,\n  7: 19,\n  8: 22,\n  9: 26,\n  10: 34,\n  11: 42,\n  12: 50,\n}\n\nexport const tokens = {\n  radius,\n  zIndex,\n  space,\n  size,\n} as const\n","import {\n  blue,\n  blueDark,\n  gray,\n  grayDark,\n  green,\n  greenDark,\n  orange,\n  orangeDark,\n  pink,\n  pinkDark,\n  purple,\n  purpleDark,\n  red,\n  redDark,\n  yellow,\n  yellowDark,\n} from '@tamagui/colors/legacy'\nimport { createThemeBuilder, objectFromEntries } from '@tamagui/theme-builder'\nimport { createTokens } from '@tamagui/web'\nimport { objectKeys, postfixObjKeys } from './utils'\nimport { tokens as v3Tokens } from './v3-tokens'\n\nconst colorTokens = {\n  light: {\n    blue,\n    gray,\n    green,\n    orange,\n    pink,\n    purple,\n    red,\n    yellow,\n  },\n  dark: {\n    blue: blueDark,\n    gray: grayDark,\n    green: greenDark,\n    orange: orangeDark,\n    pink: pinkDark,\n    purple: purpleDark,\n    red: redDark,\n    yellow: yellowDark,\n  },\n}\n\nconst lightShadowColor = 'rgba(0,0,0,0.04)'\nconst lightShadowColorStrong = 'rgba(0,0,0,0.085)'\nconst darkShadowColor = 'rgba(0,0,0,0.2)'\nconst darkShadowColorStrong = 'rgba(0,0,0,0.3)'\n\nconst darkColors = {\n  ...colorTokens.dark.blue,\n  ...colorTokens.dark.gray,\n  ...colorTokens.dark.green,\n  ...colorTokens.dark.orange,\n  ...colorTokens.dark.pink,\n  ...colorTokens.dark.purple,\n  ...colorTokens.dark.red,\n  ...colorTokens.dark.yellow,\n}\n\nconst lightColors = {\n  ...colorTokens.light.blue,\n  ...colorTokens.light.gray,\n  ...colorTokens.light.green,\n  ...colorTokens.light.orange,\n  ...colorTokens.light.pink,\n  ...colorTokens.light.purple,\n  ...colorTokens.light.red,\n  ...colorTokens.light.yellow,\n}\n\nconst color = {\n  white0: 'rgba(255,255,255,0)',\n  white075: 'rgba(255,255,255,0.75)',\n  white05: 'rgba(255,255,255,0.5)',\n  white025: 'rgba(255,255,255,0.25)',\n  black0: 'rgba(10,10,10,0)',\n  black075: 'rgba(10,10,10,0.75)',\n  black05: 'rgba(10,10,10,0.5)',\n  black025: 'rgba(10,10,10,0.25)',\n  white1: '#fff',\n  white2: '#f8f8f8',\n  white3: 'hsl(0, 0%, 96.3%)',\n  white4: 'hsl(0, 0%, 94.1%)',\n  white5: 'hsl(0, 0%, 92.0%)',\n  white6: 'hsl(0, 0%, 90.0%)',\n  white7: 'hsl(0, 0%, 88.5%)',\n  white8: 'hsl(0, 0%, 81.0%)',\n  white9: 'hsl(0, 0%, 56.1%)',\n  white10: 'hsl(0, 0%, 50.3%)',\n  white11: 'hsl(0, 0%, 42.5%)',\n  white12: 'hsl(0, 0%, 9.0%)',\n  black1: '#050505',\n  black2: '#151515',\n  black3: '#191919',\n  black4: '#232323',\n  black5: '#282828',\n  black6: '#323232',\n  black7: '#424242',\n  black8: '#494949',\n  black9: '#545454',\n  black10: '#626262',\n  black11: '#a5a5a5',\n  black12: '#fff',\n  ...postfixObjKeys(lightColors, 'Light'),\n  ...postfixObjKeys(darkColors, 'Dark'),\n}\n\nexport const defaultPalettes = (() => {\n  const transparent = (hsl: string, opacity = 0) =>\n    hsl.replace(`%)`, `%, ${opacity})`).replace(`hsl(`, `hsla(`)\n\n  const getColorPalette = (colors: object, accentColors: object): string[] => {\n    const colorPalette = Object.values(colors)\n    // make the transparent color vibrant and towards the middle\n    const colorI = colorPalette.length - 4\n\n    // accents!\n    const accentPalette = Object.values(accentColors)\n    const accentBackground = accentPalette[0]\n    const accentColor = accentPalette[accentPalette.length - 1]\n\n    // add our transparent colors first/last\n    // and make sure the last (foreground) color is white/black rather than colorful\n    // this is mostly for consistency with the older theme-base\n    return [\n      accentBackground,\n      transparent(colorPalette[0], 0),\n      transparent(colorPalette[0], 0.25),\n      transparent(colorPalette[0], 0.5),\n      transparent(colorPalette[0], 0.75),\n      ...colorPalette,\n      transparent(colorPalette[colorI], 0.75),\n      transparent(colorPalette[colorI], 0.5),\n      transparent(colorPalette[colorI], 0.25),\n      transparent(colorPalette[colorI], 0),\n      accentColor,\n    ]\n  }\n\n  const brandColor = {\n    light: color.blue4Light,\n    dark: color.blue4Dark,\n  }\n\n  const lightPalette = [\n    brandColor.light,\n    color.white0,\n    color.white025,\n    color.white05,\n    color.white075,\n    color.white1,\n    color.white2,\n    color.white3,\n    color.white4,\n    color.white5,\n    color.white6,\n    color.white7,\n    color.white8,\n    color.white9,\n    color.white10,\n    color.white11,\n    color.white12,\n    color.black075,\n    color.black05,\n    color.black025,\n    color.black0,\n    brandColor.dark,\n  ]\n\n  const darkPalette = [\n    brandColor.dark,\n    color.black0,\n    color.black025,\n    color.black05,\n    color.black075,\n    color.black1,\n    color.black2,\n    color.black3,\n    color.black4,\n    color.black5,\n    color.black6,\n    color.black7,\n    color.black8,\n    color.black9,\n    color.black10,\n    color.black11,\n    color.black12,\n    color.white075,\n    color.white05,\n    color.white025,\n    color.white0,\n    brandColor.light,\n  ]\n\n  const lightColorNames = objectKeys(colorTokens.light)\n  const lightPalettes = objectFromEntries(\n    lightColorNames.map(\n      (key, index) =>\n        [\n          `light_${key}`,\n          getColorPalette(\n            colorTokens.light[key],\n            colorTokens.light[lightColorNames[(index + 1) % lightColorNames.length]]\n          ),\n        ] as const\n    )\n  )\n\n  const darkColorNames = objectKeys(colorTokens.dark)\n  const darkPalettes = objectFromEntries(\n    darkColorNames.map(\n      (key, index) =>\n        [\n          `dark_${key}`,\n          getColorPalette(\n            colorTokens.dark[key],\n            colorTokens.dark[darkColorNames[(index + 1) % darkColorNames.length]]\n          ),\n        ] as const\n    )\n  )\n\n  const colorPalettes = {\n    ...lightPalettes,\n    ...darkPalettes,\n  }\n\n  return {\n    light: lightPalette,\n    dark: darkPalette,\n    ...colorPalettes,\n  }\n})()\n\nconst getTemplates = () => {\n  const getBaseTemplates = (scheme: 'dark' | 'light') => {\n    const isLight = scheme === 'light'\n\n    // our palettes have 4 things padding each end until you get to bg/color:\n    // [accentBg, transparent1, transparent2, transparent3, transparent4, background, ...]\n    const bgIndex = 5\n    const lighten = isLight ? -1 : 1\n    const darken = -lighten\n    const borderColor = bgIndex + 3\n\n    // templates use the palette and specify index\n    // negative goes backwards from end so -1 is the last item\n    const base = {\n      accentBackground: 0,\n      accentColor: -0,\n\n      background0: 1,\n      background025: 2,\n      background05: 3,\n      background075: 4,\n      color1: bgIndex,\n      color2: bgIndex + 1,\n      color3: bgIndex + 2,\n      color4: bgIndex + 3,\n      color5: bgIndex + 4,\n      color6: bgIndex + 5,\n      color7: bgIndex + 6,\n      color8: bgIndex + 7,\n      color9: bgIndex + 8,\n      color10: bgIndex + 9,\n      color11: bgIndex + 10,\n      color12: bgIndex + 11,\n      color0: -1,\n      color025: -2,\n      color05: -3,\n      color075: -4,\n      // the background, color, etc keys here work like generics - they make it so you\n      // can publish components for others to use without mandating a specific color scale\n      // the @tamagui/button Button component looks for `$background`, so you set the\n      // dark_red_Button theme to have a stronger background than the dark_red theme.\n      background: bgIndex,\n      backgroundHover: bgIndex + lighten, // always lighten on hover no matter the scheme\n      backgroundPress: bgIndex + darken, // always darken on press no matter the theme\n      backgroundFocus: bgIndex + darken,\n      borderColor,\n      borderColorHover: borderColor + lighten,\n      borderColorPress: borderColor + darken,\n      borderColorFocus: borderColor,\n      color: -bgIndex,\n      colorHover: -bgIndex - 1,\n      colorPress: -bgIndex,\n      colorFocus: -bgIndex - 1,\n      colorTransparent: -1,\n      placeholderColor: -bgIndex - 3,\n      outlineColor: -2,\n    }\n\n    const surface1 = {\n      background: base.background + 1,\n      backgroundHover: base.backgroundHover + 1,\n      backgroundPress: base.backgroundPress + 1,\n      backgroundFocus: base.backgroundFocus + 1,\n      borderColor: base.borderColor + 1,\n      borderColorHover: base.borderColorHover + 1,\n      borderColorFocus: base.borderColorFocus + 1,\n      borderColorPress: base.borderColorPress + 1,\n    }\n\n    const surface2 = {\n      background: base.background + 2,\n      backgroundHover: base.backgroundHover + 2,\n      backgroundPress: base.backgroundPress + 2,\n      backgroundFocus: base.backgroundFocus + 2,\n      borderColor: base.borderColor + 2,\n      borderColorHover: base.borderColorHover + 2,\n      borderColorFocus: base.borderColorFocus + 2,\n      borderColorPress: base.borderColorPress + 2,\n    }\n\n    const surface3 = {\n      background: base.background + 3,\n      backgroundHover: base.backgroundHover + 3,\n      backgroundPress: base.backgroundPress + 3,\n      backgroundFocus: base.backgroundFocus + 3,\n      borderColor: base.borderColor + 3,\n      borderColorHover: base.borderColorHover + 3,\n      borderColorFocus: base.borderColorFocus + 3,\n      borderColorPress: base.borderColorPress + 3,\n    }\n\n    const surfaceActiveBg = {\n      background: base.background + 5,\n      backgroundHover: base.background + 5,\n      backgroundPress: base.backgroundPress + 5,\n      backgroundFocus: base.backgroundFocus + 5,\n    }\n\n    const surfaceActive = {\n      ...surfaceActiveBg,\n      // match border to background when active\n      borderColor: surfaceActiveBg.background,\n      borderColorHover: surfaceActiveBg.backgroundHover,\n      borderColorFocus: surfaceActiveBg.backgroundFocus,\n      borderColorPress: surfaceActiveBg.backgroundPress,\n    }\n\n    const inverseSurface1 = {\n      color: surface1.background,\n      colorHover: surface1.backgroundHover,\n      colorPress: surface1.backgroundPress,\n      colorFocus: surface1.backgroundFocus,\n      background: base.color,\n      backgroundHover: base.colorHover,\n      backgroundPress: base.colorPress,\n      backgroundFocus: base.colorFocus,\n      borderColor: base.color - 2,\n      borderColorHover: base.color - 3,\n      borderColorFocus: base.color - 4,\n      borderColorPress: base.color - 5,\n    }\n\n    const inverseActive = {\n      ...inverseSurface1,\n      background: base.color - 2,\n      backgroundHover: base.colorHover - 2,\n      backgroundPress: base.colorPress - 2,\n      backgroundFocus: base.colorFocus - 2,\n      borderColor: base.color - 2 - 2,\n      borderColorHover: base.color - 3 - 2,\n      borderColorFocus: base.color - 4 - 2,\n      borderColorPress: base.color - 5 - 2,\n    }\n\n    const alt1 = {\n      color: base.color - 1,\n      colorHover: base.colorHover - 1,\n      colorPress: base.colorPress - 1,\n      colorFocus: base.colorFocus - 1,\n    }\n\n    const alt2 = {\n      color: base.color - 2,\n      colorHover: base.colorHover - 2,\n      colorPress: base.colorPress - 2,\n      colorFocus: base.colorFocus - 2,\n    }\n\n    return {\n      base,\n      alt1,\n      alt2,\n      surface1,\n      surface2,\n      surface3,\n      inverseSurface1,\n      inverseActive,\n      surfaceActive,\n    }\n  }\n\n  const lightTemplates = getBaseTemplates('light')\n  const darkTemplates = getBaseTemplates('dark')\n  const templates = {\n    ...objectFromEntries(\n      objectKeys(lightTemplates).map(\n        (name) => [`light_${name}`, lightTemplates[name]] as const\n      )\n    ),\n    ...objectFromEntries(\n      objectKeys(darkTemplates).map(\n        (name) => [`dark_${name}`, darkTemplates[name]] as const\n      )\n    ),\n  }\n  return templates as Record<keyof typeof templates, typeof lightTemplates.base>\n}\n\nexport const defaultTemplates = getTemplates()\n\nconst shadows = {\n  light: {\n    shadowColor: lightShadowColorStrong,\n    shadowColorHover: lightShadowColorStrong,\n    shadowColorPress: lightShadowColor,\n    shadowColorFocus: lightShadowColor,\n  },\n  dark: {\n    shadowColor: darkShadowColorStrong,\n    shadowColorHover: darkShadowColorStrong,\n    shadowColorPress: darkShadowColor,\n    shadowColorFocus: darkShadowColor,\n  },\n}\n\nconst nonInherited = {\n  light: {\n    ...lightColors,\n    ...shadows.light,\n  },\n  dark: {\n    ...darkColors,\n    ...shadows.dark,\n  },\n}\n\nconst overlayThemeDefinitions = [\n  {\n    parent: 'light',\n    theme: {\n      background: 'rgba(0,0,0,0.5)',\n    },\n  },\n  {\n    parent: 'dark',\n    theme: {\n      background: 'rgba(0,0,0,0.8)',\n    },\n  },\n]\n\nconst inverseSurface1 = [\n  {\n    parent: 'active',\n    template: 'inverseActive',\n  },\n  {\n    parent: '',\n    template: 'inverseSurface1',\n  },\n] as any\n\nconst surface1 = [\n  {\n    parent: 'active',\n    template: 'surfaceActive',\n  },\n  {\n    parent: '',\n    template: 'surface1',\n  },\n] as any\n\nconst surface2 = [\n  {\n    parent: 'active',\n    template: 'surfaceActive',\n  },\n  {\n    parent: '',\n    template: 'surface2',\n  },\n] as any\n\nconst surface3 = [\n  {\n    parent: 'active',\n    template: 'surfaceActive',\n  },\n  {\n    parent: '',\n    template: 'surface3',\n  },\n] as any\n\n/**\n * These are optional themes that serve as defaults for components. They don't\n * change color1 through color12 just \"generic\" properties like color,\n * background, borderColor.\n *\n * They can be overridden with the theme prop, or left out entirely for\n * \"un-themed\" components.\n\n */\nexport const defaultComponentThemes = {\n  ListItem: {\n    template: 'surface1',\n  },\n  SelectTrigger: surface1,\n  Card: surface1,\n  Button: surface3,\n  Checkbox: surface2,\n  Switch: surface2,\n  SwitchThumb: inverseSurface1,\n  TooltipContent: surface2,\n  Progress: {\n    template: 'surface1',\n  },\n  RadioGroupItem: surface2,\n  TooltipArrow: {\n    template: 'surface1',\n  },\n  SliderTrackActive: {\n    template: 'surface3',\n  },\n  SliderTrack: {\n    template: 'surface1',\n  },\n  SliderThumb: inverseSurface1,\n  Tooltip: inverseSurface1,\n  ProgressIndicator: inverseSurface1,\n  SheetOverlay: overlayThemeDefinitions,\n  DialogOverlay: overlayThemeDefinitions,\n  ModalOverlay: overlayThemeDefinitions,\n  Input: surface1,\n  TextArea: surface1,\n} as const\n\n/**\n * These are useful for states (alt gets more subtle as it goes up) or emphasis\n * (surface gets more contrasted from the background as it goes up)\n */\n\nexport const defaultSubThemes = {\n  alt1: {\n    template: 'alt1',\n  },\n  alt2: {\n    template: 'alt2',\n  },\n  active: {\n    template: 'surface3',\n  },\n  surface1: {\n    template: 'surface1',\n  },\n  surface2: {\n    template: 'surface2',\n  },\n  surface3: {\n    template: 'surface3',\n  },\n  surface4: {\n    template: 'surfaceActive',\n  },\n} as const\n\n// --- themeBuilder ---\n\nconst themeBuilder = createThemeBuilder()\n  .addPalettes(defaultPalettes)\n  .addTemplates(defaultTemplates)\n  .addThemes({\n    light: {\n      template: 'base',\n      palette: 'light',\n      nonInheritedValues: nonInherited.light,\n    },\n    dark: {\n      template: 'base',\n      palette: 'dark',\n      nonInheritedValues: nonInherited.dark,\n    },\n  })\n  .addChildThemes({\n    orange: {\n      palette: 'orange',\n      template: 'base',\n    },\n    yellow: {\n      palette: 'yellow',\n      template: 'base',\n    },\n    green: {\n      palette: 'green',\n      template: 'base',\n    },\n    blue: {\n      palette: 'blue',\n      template: 'base',\n    },\n    purple: {\n      palette: 'purple',\n      template: 'base',\n    },\n    pink: {\n      palette: 'pink',\n      template: 'base',\n    },\n    red: {\n      palette: 'red',\n      template: 'base',\n    },\n    gray: {\n      palette: 'gray',\n      template: 'base',\n    },\n  })\n  .addChildThemes(defaultSubThemes)\n  .addComponentThemes(defaultComponentThemes, {\n    avoidNestingWithin: ['alt1', 'alt2', 'surface1', 'surface2', 'surface3', 'surface4'],\n  })\n\n// --- themes ---\n\nconst themesIn = themeBuilder.build()\n\ntype ThemeKeys =\n  | keyof typeof defaultTemplates.light_base\n  | keyof typeof nonInherited.light\n\nexport type Theme = Record<ThemeKeys, string>\n\nexport type ThemesOut = Record<keyof typeof themesIn, Theme>\n\nexport const themes = themesIn as any as ThemesOut\n\n// -- tokens ---\n\nexport const tokens = createTokens({\n  color,\n  ...v3Tokens,\n})\n","import type {\n  AnimationConfig,\n  NormalizedTransition,\n  SpringConfig,\n  TransitionPropInput,\n} from './types'\n\nconst SPRING_CONFIG_KEYS: Set<string> = new Set([\n  'stiffness',\n  'damping',\n  'mass',\n  'tension',\n  'friction',\n  'velocity',\n  'overshootClamping',\n  'duration',\n  'bounciness',\n  'speed',\n])\n\n/**\n * Check if a key is a spring config parameter\n */\nfunction isSpringConfigKey(key: string): key is keyof SpringConfig {\n  return SPRING_CONFIG_KEYS.has(key)\n}\n\n/**\n * Normalizes the various transition prop formats into a consistent structure.\n *\n * Supported input formats:\n * - String: \"bouncy\" -> { default: \"bouncy\", enter: null, exit: null, properties: {} }\n * - Object: { x: 'quick', default: 'slow' } -> { default: \"slow\", enter: null, exit: null, properties: { x: \"quick\" } }\n * - Object with enter/exit: { enter: 'bouncy', exit: 'quick' } -> { default: null, enter: \"bouncy\", exit: \"quick\", properties: {} }\n * - Array: ['bouncy', { delay: 100, x: 'quick' }] -> { default: \"bouncy\", enter: null, exit: null, delay: 100, properties: { x: \"quick\" } }\n *\n * @param transition - The transition prop value in any supported format\n * @returns Normalized transition object with consistent structure\n */\nexport function normalizeTransition(\n  transition: TransitionPropInput\n): NormalizedTransition {\n  // Handle null/undefined\n  if (!transition) {\n    return {\n      default: null,\n      enter: null,\n      exit: null,\n      delay: undefined,\n      properties: {},\n    }\n  }\n\n  // String format: \"bouncy\"\n  if (typeof transition === 'string') {\n    return {\n      default: transition,\n      enter: null,\n      exit: null,\n      delay: undefined,\n      properties: {},\n    }\n  }\n\n  // Array format: ['bouncy', { delay: 100, x: 'quick', enter: 'slow', exit: 'fast' }]\n  // Also supports spring config overrides: ['bouncy', { stiffness: 1000, damping: 70 }]\n  if (Array.isArray(transition)) {\n    const [defaultAnimation, configObj] = transition\n    const properties: Record<string, string | AnimationConfig> = {}\n    const springConfig: SpringConfig = {}\n    let delay: number | undefined\n    let enter: string | null = null\n    let exit: string | null = null\n\n    if (configObj && typeof configObj === 'object') {\n      for (const [key, value] of Object.entries(configObj)) {\n        if (key === 'delay' && typeof value === 'number') {\n          delay = value\n        } else if (key === 'enter' && typeof value === 'string') {\n          enter = value\n        } else if (key === 'exit' && typeof value === 'string') {\n          exit = value\n        } else if (isSpringConfigKey(key) && value !== undefined) {\n          // Spring config override: { stiffness: 1000, damping: 70 }\n          springConfig[key] = value as SpringConfig[keyof SpringConfig]\n        } else if (value !== undefined) {\n          // Property-specific animation: string or config object\n          properties[key] = value as string | AnimationConfig\n        }\n      }\n    }\n\n    return {\n      default: defaultAnimation,\n      enter,\n      exit,\n      delay,\n      properties,\n      config: Object.keys(springConfig).length > 0 ? springConfig : undefined,\n    }\n  }\n\n  // Object format: { x: 'quick', y: 'bouncy', default: 'slow', enter: 'bouncy', exit: 'quick' }\n  // Also supports spring config overrides: { default: 'bouncy', stiffness: 1000 }\n  if (typeof transition === 'object') {\n    const properties: Record<string, string | AnimationConfig> = {}\n    const springConfig: SpringConfig = {}\n    let defaultAnimation: string | null = null\n    let enter: string | null = null\n    let exit: string | null = null\n    let delay: number | undefined\n\n    for (const [key, value] of Object.entries(transition)) {\n      if (key === 'default' && typeof value === 'string') {\n        defaultAnimation = value\n      } else if (key === 'enter' && typeof value === 'string') {\n        enter = value\n      } else if (key === 'exit' && typeof value === 'string') {\n        exit = value\n      } else if (key === 'delay' && typeof value === 'number') {\n        delay = value\n      } else if (isSpringConfigKey(key) && value !== undefined) {\n        // Spring config override: { stiffness: 1000, damping: 70 }\n        springConfig[key] = value as SpringConfig[keyof SpringConfig]\n      } else if (value !== undefined) {\n        // Property-specific animation: string or config object\n        properties[key] = value as string | AnimationConfig\n      }\n    }\n\n    return {\n      default: defaultAnimation,\n      enter,\n      exit,\n      delay,\n      properties,\n      config: Object.keys(springConfig).length > 0 ? springConfig : undefined,\n    }\n  }\n\n  // Fallback\n  return {\n    default: null,\n    enter: null,\n    exit: null,\n    delay: undefined,\n    properties: {},\n  }\n}\n\n/**\n * Gets the animation key for a specific property from a normalized transition.\n * Falls back to the default animation if no property-specific one is defined.\n *\n * @param normalized - The normalized transition object\n * @param property - The property name to get animation for (e.g., 'x', 'opacity')\n * @returns The animation key/config or null if none defined\n */\nexport function getAnimationForProperty(\n  normalized: NormalizedTransition,\n  property: string\n): string | AnimationConfig | null {\n  // Check for property-specific animation\n  const propertyAnimation = normalized.properties[property]\n  if (propertyAnimation !== undefined) {\n    return propertyAnimation\n  }\n\n  // Fall back to default\n  return normalized.default\n}\n\n/**\n * Checks if the normalized transition has any animations defined.\n */\nexport function hasAnimation(normalized: NormalizedTransition): boolean {\n  return (\n    normalized.default !== null ||\n    normalized.enter !== null ||\n    normalized.exit !== null ||\n    Object.keys(normalized.properties).length > 0\n  )\n}\n\n/**\n * Gets all property names that have specific animations defined.\n * Does not include 'default' in the list.\n */\nexport function getAnimatedProperties(normalized: NormalizedTransition): string[] {\n  return Object.keys(normalized.properties)\n}\n\n/**\n * Gets the effective animation key based on the current animation state.\n * Priority: enter/exit specific > default > null\n *\n * @param normalized - The normalized transition object\n * @param state - The animation state: 'enter', 'exit', or 'default'\n * @returns The effective animation key or null\n */\nexport function getEffectiveAnimation(\n  normalized: NormalizedTransition,\n  state: 'enter' | 'exit' | 'default'\n): string | null {\n  if (state === 'enter' && normalized.enter) {\n    return normalized.enter\n  }\n  if (state === 'exit' && normalized.exit) {\n    return normalized.exit\n  }\n  return normalized.default\n}\n\n/**\n * Gets the resolved animation config for each key, looking up in animations config.\n * Useful for calculating max duration across all animated properties.\n *\n * @param normalized - The normalized transition object\n * @param animations - The animations config object (driver-specific format)\n * @param keys - Property keys to get animations for\n * @param defaultAnimation - The default animation value to fall back to\n * @returns Map of key -> resolved animation config (or null if not found)\n */\nexport function getAnimationConfigsForKeys<T>(\n  normalized: NormalizedTransition,\n  animations: Record<string, T>,\n  keys: string[],\n  defaultAnimation: T | null\n): Map<string, T | null> {\n  const result = new Map<string, T | null>()\n\n  for (const key of keys) {\n    const propAnimation = normalized.properties[key]\n    let animationValue: T | null = null\n\n    if (typeof propAnimation === 'string') {\n      animationValue = animations[propAnimation] ?? null\n    } else if (\n      propAnimation &&\n      typeof propAnimation === 'object' &&\n      (propAnimation as any).type\n    ) {\n      animationValue = animations[(propAnimation as any).type] ?? null\n    }\n\n    // fall back to default if no per-property config found\n    if (animationValue === null) {\n      animationValue = defaultAnimation\n    }\n\n    result.set(key, animationValue)\n  }\n\n  return result\n}\n","import {\n  normalizeTransition,\n  getAnimatedProperties,\n  hasAnimation as hasNormalizedAnimation,\n  getEffectiveAnimation,\n  getAnimationConfigsForKeys,\n} from '@tamagui/animation-helpers'\nimport { useIsomorphicLayoutEffect } from '@tamagui/constants'\nimport { ResetPresence, usePresence } from '@tamagui/use-presence'\nimport type { AnimationDriver, UniversalAnimatedNumber } from '@tamagui/web'\nimport { transformsToString } from '@tamagui/web'\nimport React, { useState } from 'react' // import { animate } from '@tamagui/cubic-bezier-animator'\n\nconst EXTRACT_MS_REGEX = /(\\d+(?:\\.\\d+)?)\\s*ms/\nconst EXTRACT_S_REGEX = /(\\d+(?:\\.\\d+)?)\\s*s/\n\n/**\n * Helper function to extract duration from CSS animation string\n * Examples: \"ease-in 200ms\" -> 200, \"cubic-bezier(0.215, 0.610, 0.355, 1.000) 400ms\" -> 400\n * \"ease-in 0.5s\" -> 500, \"slow 2s\" -> 2000\n */\nfunction extractDuration(animation: string): number {\n  // Try to match milliseconds first\n  const msMatch = animation.match(EXTRACT_MS_REGEX)\n  if (msMatch) {\n    return Number.parseInt(msMatch[1], 10)\n  }\n\n  // Try to match seconds and convert to milliseconds\n  const sMatch = animation.match(EXTRACT_S_REGEX)\n  if (sMatch) {\n    return Math.round(Number.parseFloat(sMatch[1]) * 1000)\n  }\n\n  // Default to 300ms if no duration found\n  return 300\n}\n\nconst MS_DURATION_REGEX = /(\\d+(?:\\.\\d+)?)\\s*ms/\nconst S_DURATION_REGEX = /(\\d+(?:\\.\\d+)?)\\s*s(?!tiffness)/\n\n/**\n * Apply duration override to a CSS animation string\n * Replaces the existing duration with the override value\n */\nfunction applyDurationOverride(animation: string, durationMs: number): string {\n  // Replace ms duration\n  const msReplaced = animation.replace(MS_DURATION_REGEX, `${durationMs}ms`)\n  if (msReplaced !== animation) {\n    return msReplaced\n  }\n\n  // Replace seconds duration\n  const sReplaced = animation.replace(S_DURATION_REGEX, `${durationMs}ms`)\n  if (sReplaced !== animation) {\n    return sReplaced\n  }\n\n  // No duration found, prepend the duration\n  return `${durationMs}ms ${animation}`\n}\n\n// transform keys that need special handling\nconst TRANSFORM_KEYS = [\n  'x',\n  'y',\n  'scale',\n  'scaleX',\n  'scaleY',\n  'rotate',\n  'rotateX',\n  'rotateY',\n  'rotateZ',\n  'skewX',\n  'skewY',\n] as const\n\n/**\n * Build a CSS transform string from a style object containing transform properties\n */\nfunction buildTransformString(style: Record<string, unknown> | undefined): string {\n  if (!style) return ''\n\n  const parts: string[] = []\n\n  if (style.x !== undefined || style.y !== undefined) {\n    const x = style.x ?? 0\n    const y = style.y ?? 0\n    parts.push(`translate(${x}px, ${y}px)`)\n  }\n  if (style.scale !== undefined) {\n    parts.push(`scale(${style.scale})`)\n  }\n  if (style.scaleX !== undefined) {\n    parts.push(`scaleX(${style.scaleX})`)\n  }\n  if (style.scaleY !== undefined) {\n    parts.push(`scaleY(${style.scaleY})`)\n  }\n  if (style.rotate !== undefined) {\n    const val = style.rotate\n    const unit = typeof val === 'string' && val.includes('deg') ? '' : 'deg'\n    parts.push(`rotate(${val}${unit})`)\n  }\n  if (style.rotateX !== undefined) {\n    parts.push(`rotateX(${style.rotateX}deg)`)\n  }\n  if (style.rotateY !== undefined) {\n    parts.push(`rotateY(${style.rotateY}deg)`)\n  }\n  if (style.rotateZ !== undefined) {\n    parts.push(`rotateZ(${style.rotateZ}deg)`)\n  }\n  if (style.skewX !== undefined) {\n    parts.push(`skewX(${style.skewX}deg)`)\n  }\n  if (style.skewY !== undefined) {\n    parts.push(`skewY(${style.skewY}deg)`)\n  }\n\n  return parts.join(' ')\n}\n\n/**\n * Apply a style object to a DOM node, handling transform keys specially\n */\nfunction applyStylesToNode(\n  node: HTMLElement,\n  style: Record<string, unknown> | undefined\n): void {\n  if (!style) return\n\n  // collect transform values\n  const transformStr = buildTransformString(style)\n  if (transformStr) {\n    node.style.transform = transformStr\n  }\n\n  // apply non-transform properties\n  for (const [key, value] of Object.entries(style)) {\n    if (TRANSFORM_KEYS.includes(key as any)) continue\n    if (value === undefined) continue\n\n    if (key === 'opacity') {\n      node.style.opacity = String(value)\n    } else if (key === 'backgroundColor') {\n      node.style.backgroundColor = String(value)\n    } else if (key === 'color') {\n      node.style.color = String(value)\n    } else {\n      // generic fallback\n      node.style[key as any] = typeof value === 'number' ? `${value}px` : String(value)\n    }\n  }\n}\n\nexport function createAnimations<A extends object>(animations: A): AnimationDriver<A> {\n  const reactionListeners = new WeakMap<any, Set<Function>>()\n\n  return {\n    animations,\n    usePresence,\n    ResetPresence,\n    supportsCSS: true,\n    inputStyle: 'css',\n    outputStyle: 'css',\n    classNameAnimation: true,\n\n    useAnimatedNumber(initial): UniversalAnimatedNumber<Function> {\n      const [val, setVal] = React.useState(initial)\n      const [onFinish, setOnFinish] = useState<Function | undefined>()\n\n      useIsomorphicLayoutEffect(() => {\n        if (onFinish) {\n          onFinish?.()\n          setOnFinish(undefined)\n        }\n      }, [onFinish])\n\n      return {\n        getInstance() {\n          return setVal\n        },\n        getValue() {\n          return val\n        },\n        setValue(next, config, onFinish) {\n          setVal(next)\n          setOnFinish(onFinish)\n          // call reaction listeners with the new value\n          const listeners = reactionListeners.get(setVal)\n          if (listeners) {\n            listeners.forEach((listener) => listener(next))\n          }\n        },\n        stop() {},\n      }\n    },\n\n    useAnimatedNumberReaction({ value }, onValue) {\n      React.useEffect(() => {\n        const instance = value.getInstance()\n        let queue = reactionListeners.get(instance)\n        if (!queue) {\n          const next = new Set<Function>()\n          reactionListeners.set(instance, next)\n          queue = next!\n        }\n        queue.add(onValue)\n        return () => {\n          queue?.delete(onValue)\n        }\n      }, [])\n    },\n\n    useAnimatedNumberStyle(val, getStyle) {\n      return getStyle(val.getValue())\n    },\n\n    // @ts-ignore - styleState is added by createComponent\n    useAnimations: ({\n      props,\n      presence,\n      style,\n      componentState,\n      stateRef,\n      styleState,\n    }: any) => {\n      const isEntering = !!componentState.unmounted\n      const isExiting = presence?.[0] === false\n      const sendExitComplete = presence?.[1]\n\n      // Track if we just finished entering (transition from entering to not entering)\n      // This is needed because the CSS transition happens on the render AFTER t_unmounted is removed\n      const wasEnteringRef = React.useRef(isEntering)\n      const justFinishedEntering = wasEnteringRef.current && !isEntering\n      React.useEffect(() => {\n        wasEnteringRef.current = isEntering\n      })\n\n      // exit cycle guards to prevent stale/duplicate completion\n      const exitCycleIdRef = React.useRef(0)\n      const exitCompletedRef = React.useRef(false)\n      const wasExitingRef = React.useRef(false)\n      const exitInterruptedRef = React.useRef(false)\n\n      // detect transition into/out of exiting state\n      const justStartedExiting = isExiting && !wasExitingRef.current\n      const justStoppedExiting = !isExiting && wasExitingRef.current\n\n      // start new exit cycle only on transition INTO exiting\n      if (justStartedExiting) {\n        exitCycleIdRef.current++\n        exitCompletedRef.current = false\n      }\n      // track interruptions so we know to force-restart transitions\n      if (justStoppedExiting) {\n        exitCycleIdRef.current++\n        exitInterruptedRef.current = true\n      }\n\n      // track previous exiting state\n      React.useEffect(() => {\n        wasExitingRef.current = isExiting\n      })\n\n      // use effectiveTransition computed by createComponent (single source of truth)\n      const effectiveTransition = styleState?.effectiveTransition ?? props.transition\n\n      // Normalize the transition prop to a consistent format\n      const normalized = normalizeTransition(effectiveTransition)\n\n      // Determine animation state and get effective animation\n      // Use 'enter' if we're entering OR if we just finished entering (transition is happening)\n      const animationState = isExiting\n        ? 'exit'\n        : isEntering || justFinishedEntering\n          ? 'enter'\n          : 'default'\n      const effectiveAnimationKey = getEffectiveAnimation(normalized, animationState)\n      const defaultAnimation = effectiveAnimationKey\n        ? animations[effectiveAnimationKey]\n        : null\n      const animatedProperties = getAnimatedProperties(normalized)\n\n      // Determine which properties to animate\n      // - animateOnly prop is an exclusive filter (only animate those properties)\n      // - per-property configs WITHOUT a default = only animate those specific properties\n      // - per-property configs WITH a default = per-property overrides + default for rest\n      const hasDefault =\n        normalized.default !== null ||\n        normalized.enter !== null ||\n        normalized.exit !== null\n      const hasPerPropertyConfigs = animatedProperties.length > 0\n\n      let keys: string[]\n      if (props.animateOnly) {\n        // animateOnly is explicit filter\n        keys = props.animateOnly\n      } else if (hasPerPropertyConfigs && !hasDefault) {\n        // object format without default: { opacity: '200ms' } = only animate opacity\n        keys = animatedProperties\n      } else if (hasPerPropertyConfigs && hasDefault) {\n        // array format or object with default: 'all' first, then per-property overrides\n        // CSS transition specificity: later declarations override earlier ones for the same property\n        keys = ['all', ...animatedProperties]\n      } else {\n        // simple string format: 'quick' = animate all\n        keys = ['all']\n      }\n\n      useIsomorphicLayoutEffect(() => {\n        const host = stateRef.current.host\n        if (!sendExitComplete || !isExiting || !host) return\n        const node = host as HTMLElement\n\n        // capture current cycle id for this effect\n        const cycleId = exitCycleIdRef.current\n\n        // helper to complete exit with guards\n        const completeExit = () => {\n          if (cycleId !== exitCycleIdRef.current) return\n          if (exitCompletedRef.current) return\n          exitCompletedRef.current = true\n          sendExitComplete()\n        }\n\n        // if no properties to animate (animateOnly=[]), complete immediately\n        if (keys.length === 0) {\n          completeExit()\n          return\n        }\n\n        // Force transition restart for interrupted exits\n        // When an exit is interrupted and restarted, the element may already be at\n        // the exit style, so no CSS transition fires. We need to:\n        // 1. Reset to non-exit state\n        // 2. Force reflow\n        // 3. Re-apply exit state to trigger transition\n        let rafId: number | undefined\n        const wasInterrupted = exitInterruptedRef.current\n        // flag to ignore transitioncancel during reset (we intentionally cancel the old transition)\n        let ignoreCancelEvents = wasInterrupted\n        // get enter/exit styles for potential restart\n        const enterStyle = props.enterStyle as Record<string, unknown> | undefined\n        const exitStyle = props.exitStyle as Record<string, unknown> | undefined\n\n        if (wasInterrupted) {\n          exitInterruptedRef.current = false\n          // disable transition, reset to enter state\n          node.style.transition = 'none'\n\n          // reset: apply enter styles (or defaults) for each exit property\n          if (exitStyle) {\n            // build enter state: for each exit key, use enter value or sensible default\n            const resetStyle: Record<string, unknown> = {}\n            for (const key of Object.keys(exitStyle)) {\n              if (enterStyle?.[key] !== undefined) {\n                resetStyle[key] = enterStyle[key]\n              } else if (key === 'opacity') {\n                resetStyle[key] = 1\n              } else if (TRANSFORM_KEYS.includes(key as any)) {\n                // transform defaults: scale=1, others=0\n                resetStyle[key] =\n                  key === 'scale' || key === 'scaleX' || key === 'scaleY' ? 1 : 0\n              }\n            }\n            applyStylesToNode(node, resetStyle)\n          } else {\n            // fallback if no exitStyle defined\n            node.style.opacity = '1'\n            node.style.transform = 'none'\n          }\n\n          // force reflow\n          void node.offsetHeight\n        }\n\n        /**\n         * Exit animation handling for Dialog/Modal components\n         *\n         * The Challenge: When users close dialogs (via Escape key or clicking outside),\n         * the element can disappear from the DOM before CSS transitions finish, which causes:\n         * 1. Dialogs to stick around on screen\n         * 2. Event handlers to stop working\n         *\n         * Fix: Calculate the MAXIMUM duration across all animated properties, not just\n         * the default. With animateOnly and per-property configs, different properties\n         * can have different durations, and we need to wait for the LONGEST one.\n         */\n\n        // calculate max duration across all animated properties\n        let maxDuration = defaultAnimation ? extractDuration(defaultAnimation) : 200\n\n        // check per-property animation durations using shared helper\n        const animationConfigs = getAnimationConfigsForKeys(\n          normalized,\n          animations as Record<string, string>,\n          keys,\n          defaultAnimation\n        )\n        for (const animationValue of animationConfigs.values()) {\n          if (animationValue) {\n            const duration = extractDuration(animationValue)\n            if (duration > maxDuration) {\n              maxDuration = duration\n            }\n          }\n        }\n\n        const delay = normalized.delay ?? 0\n        const fallbackTimeout = maxDuration + delay\n\n        const timeoutId = setTimeout(() => {\n          completeExit()\n        }, fallbackTimeout)\n\n        // track number of transitioning properties to wait for all to finish\n        // (each property fires its own transitionend event)\n        const transitioningProps = new Set(keys)\n        let completedCount = 0\n\n        const onFinishAnimation = (event: TransitionEvent) => {\n          // only count transitions on THIS element, not bubbled from children\n          if (event.target !== node) return\n\n          // map CSS property names to our key names\n          // e.g., transitionend fires with propertyName 'transform' for scale/x/y\n          const eventProp = event.propertyName\n          if (transitioningProps.has(eventProp) || eventProp === 'all') {\n            completedCount++\n            // wait for all properties to finish\n            if (completedCount >= transitioningProps.size) {\n              clearTimeout(timeoutId)\n              completeExit()\n            }\n          }\n        }\n\n        // on cancel, still complete (element is exiting and animation was interrupted)\n        // the guards prevent duplicate completion if this is a stale cycle\n        const onCancelAnimation = () => {\n          // ignore cancel events during reset phase (we intentionally cancel the old transition)\n          if (ignoreCancelEvents) return\n          clearTimeout(timeoutId)\n          completeExit()\n        }\n\n        node.addEventListener('transitionend', onFinishAnimation)\n        node.addEventListener('transitioncancel', onCancelAnimation)\n\n        // For interrupted exits, re-enable transition and re-apply exit styles\n        // This must happen AFTER listeners are set up so we catch the transitionend\n        if (wasInterrupted) {\n          rafId = requestAnimationFrame(() => {\n            if (cycleId !== exitCycleIdRef.current) return\n            // re-enable transition using same logic as normal path\n            const delayStr = normalized.delay ? ` ${normalized.delay}ms` : ''\n            const durationOverride = normalized.config?.duration\n            node.style.transition = keys\n              .map((key) => {\n                const propAnimation = normalized.properties[key]\n                let animationValue: string | null = null\n                if (typeof propAnimation === 'string') {\n                  animationValue = animations[propAnimation]\n                } else if (\n                  propAnimation &&\n                  typeof propAnimation === 'object' &&\n                  propAnimation.type\n                ) {\n                  animationValue = animations[propAnimation.type]\n                } else if (defaultAnimation) {\n                  animationValue = defaultAnimation\n                }\n                // apply duration override if specified (matches normal path)\n                if (animationValue && durationOverride) {\n                  animationValue = applyDurationOverride(animationValue, durationOverride)\n                }\n                return animationValue ? `${key} ${animationValue}${delayStr}` : null\n              })\n              .filter(Boolean)\n              .join(', ')\n            // force reflow again\n            void node.offsetHeight\n            // now apply exit styles - this triggers the transition\n            applyStylesToNode(node, exitStyle)\n            // re-enable cancel event handling now that reset is complete\n            ignoreCancelEvents = false\n          })\n        }\n\n        return () => {\n          clearTimeout(timeoutId)\n          if (rafId !== undefined) cancelAnimationFrame(rafId)\n          node.removeEventListener('transitionend', onFinishAnimation)\n          node.removeEventListener('transitioncancel', onCancelAnimation)\n        }\n      }, [\n        sendExitComplete,\n        isExiting,\n        stateRef,\n        keys,\n        normalized,\n        defaultAnimation,\n        props.enterStyle,\n        props.exitStyle,\n      ])\n\n      // Check if we have any animation to apply\n      if (!hasNormalizedAnimation(normalized)) {\n        return null\n      }\n\n      if (Array.isArray(style.transform)) {\n        style.transform = transformsToString(style.transform)\n      }\n\n      // Build CSS transition string\n      // TODO: we disabled the transform transition, because it will create issue for inverse function and animate function\n      // for non layout transform properties either use animate function or find a workaround to do it with css\n      const delayStr = normalized.delay ? ` ${normalized.delay}ms` : ''\n      const durationOverride = normalized.config?.duration\n      style.transition = keys\n        .map((key) => {\n          // Check for property-specific animation, fall back to default\n          const propAnimation = normalized.properties[key]\n          let animationValue: string | null = null\n\n          if (typeof propAnimation === 'string') {\n            animationValue = animations[propAnimation]\n          } else if (\n            propAnimation &&\n            typeof propAnimation === 'object' &&\n            propAnimation.type\n          ) {\n            animationValue = animations[propAnimation.type]\n          } else if (defaultAnimation) {\n            animationValue = defaultAnimation\n          }\n\n          // Apply global duration override if specified\n          if (animationValue && durationOverride) {\n            animationValue = applyDurationOverride(animationValue, durationOverride)\n          }\n\n          return animationValue ? `${key} ${animationValue}${delayStr}` : null\n        })\n        .filter(Boolean)\n        .join(', ')\n\n      if (process.env.NODE_ENV === 'development' && props['debug'] === 'verbose') {\n        console.info('CSS animation', {\n          props,\n          animations,\n          normalized,\n          defaultAnimation,\n          style,\n          isEntering,\n          isExiting,\n        })\n      }\n\n      return { style, className: isEntering ? 't_unmounted' : '' }\n    },\n  }\n}\n\n// layout animations\n// useIsomorphicLayoutEffect(() => {\n//   if (!host || !props.layout) {\n//     return\n//   }\n//   // @ts-ignore\n//   const boundingBox = host?.getBoundingClientRect()\n//   if (isChanged(initialPositionRef.current, boundingBox)) {\n//     const transform = invert(\n//       host,\n//       boundingBox,\n//       initialPositionRef.current\n//     )\n\n//     animate({\n//       from: transform,\n//       to: { x: 0, y: 0, scaleX: 1, scaleY: 1 },\n//       duration: 1000,\n//       onUpdate: ({ x, y, scaleX, scaleY }) => {\n//         // @ts-ignore\n//         host.style.transform = `translate(${x}px, ${y}px) scaleX(${scaleX}) scaleY(${scaleY})`\n//         // TODO: handle childRef inverse scale\n//         //   childRef.current.style.transform = `scaleX(${1 / scaleX}) scaleY(${\n//         //     1 / scaleY\n//         //   })`\n//       },\n//       // TODO: extract ease-in from string and convert/map it to a cubicBezier array\n//       cubicBezier: [0, 1.38, 1, -0.41],\n//     })\n//   }\n//   initialPositionRef.current = boundingBox\n// })\n\n// style.transition = `${keys} ${animation}${\n//   props.layout ? ',width 0s, height 0s, margin 0s, padding 0s, transform' : ''\n// }`\n\n// const isChanged = (initialBox: any, finalBox: any) => {\n//   // we just mounted, so we don't have complete data yet\n//   if (!initialBox || !finalBox) return false\n\n//   // deep compare the two boxes\n//   return JSON.stringify(initialBox) !== JSON.stringify(finalBox)\n// }\n\n// const invert = (el, from, to) => {\n//   const { x: fromX, y: fromY, width: fromWidth, height: fromHeight } = from\n//   const { x, y, width, height } = to\n\n//   const transform = {\n//     x: x - fromX - (fromWidth - width) / 2,\n//     y: y - fromY - (fromHeight - height) / 2,\n//     scaleX: width / fromWidth,\n//     scaleY: height / fromHeight,\n//   }\n\n//   el.style.transform = `\n","import { createAnimations as c1 } from '@tamagui/animations-css'\n\nconst easeOut = 'cubic-bezier(0.25, 0.1, 0.25, 1)'\nconst bouncy = 'cubic-bezier(0.175, 0.885, 0.32, 1.275)'\nconst kindaBouncyBezier = 'cubic-bezier(0.34, 1.56, 0.64, 1)'\n\nexport const animationsCSS = c1({\n  '0ms': '0ms linear',\n  '30ms': '30ms linear',\n  '50ms': '50ms linear',\n  '75ms': '75ms linear',\n  '100ms': '100ms ease-out',\n  '200ms': '200ms ease-out',\n  '250ms': '250ms ease-out',\n  '300ms': '300ms ease-out',\n  '400ms': '400ms ease-out',\n  '500ms': '500ms ease-out',\n  superBouncy: `300ms cubic-bezier(0.175, 0.885, 0.32, 1.5)`,\n  bouncy: `350ms ${bouncy}`,\n  kindaBouncy: `400ms ${kindaBouncyBezier}`,\n  superLazy: `600ms ${easeOut}`,\n  lazy: `500ms ${easeOut}`,\n  medium: `300ms ${easeOut}`,\n  slowest: `800ms ${easeOut}`,\n  slow: `450ms ${easeOut}`,\n  quick: `150ms ${easeOut}`,\n  quickLessBouncy: `180ms ${easeOut}`,\n  tooltip: `200ms cubic-bezier(0.175, 0.885, 0.32, 1.1)`,\n  quicker: `120ms ${easeOut}`,\n  quickerLessBouncy: `100ms ${easeOut}`,\n  quickest: `80ms ${easeOut}`,\n  quickestLessBouncy: `60ms ${easeOut}`,\n})\n",null,null,"import type { GenericFont } from '@tamagui/web'\nimport { createFont } from '@tamagui/web'\n\nconst genericFontSizes = {\n  1: 10,\n  2: 11,\n  3: 12,\n  4: 14,\n  5: 15,\n  6: 16,\n  7: 20,\n  8: 22,\n  9: 30,\n  10: 42,\n  11: 52,\n  12: 62,\n  13: 72,\n  14: 92,\n  15: 114,\n  16: 124,\n} as const\n\nexport function createGenericFont<A extends GenericFont<keyof typeof genericFontSizes>>(\n  family: string,\n  font: Partial<A> = {},\n  {\n    sizeLineHeight = (val) => val * 1.35,\n  }: {\n    sizeLineHeight?: (val: number) => number\n  } = {}\n): A {\n  const size = font.size || genericFontSizes\n  return createFont({\n    family,\n    size,\n    lineHeight: Object.fromEntries(\n      Object.entries(size).map(([k, v]) => [k, sizeLineHeight(+v)])\n    ) as typeof size,\n    weight: { 0: '300' },\n    letterSpacing: { 4: 0 },\n    ...(font as any),\n  })\n}\n","import { createInterFont } from '@tamagui/font-inter'\nimport { createSilkscreenFont } from '@tamagui/font-silkscreen'\n\nimport { createGenericFont } from './createGenericFont'\n\nconst silkscreenFont = createSilkscreenFont()\n\nconst headingFont = createInterFont(\n  {\n    size: {\n      5: 13,\n      6: 15,\n      9: 32,\n      10: 44,\n    },\n    transform: {\n      6: 'uppercase',\n      7: 'none',\n    },\n    weight: {\n      6: '400',\n      7: '700',\n    },\n    color: {\n      6: '$colorFocus',\n      7: '$color',\n    },\n    letterSpacing: {\n      5: 2,\n      6: 1,\n      7: 0,\n      8: 0,\n      9: -1,\n      10: -1.5,\n      12: -2,\n      14: -3,\n      15: -4,\n    },\n    // for native\n    face: {\n      700: { normal: 'InterBold' },\n      800: { normal: 'InterBold' },\n      900: { normal: 'InterBold' },\n    },\n  },\n  { sizeLineHeight: (size) => Math.round(size * 1.1 + (size < 30 ? 10 : 5)) }\n)\n\nconst bodyFont = createInterFont(\n  {\n    weight: {\n      1: '400',\n    },\n  },\n  {\n    sizeSize: (size) => Math.round(size),\n    sizeLineHeight: (size) => Math.round(size * 1.1 + (size >= 12 ? 8 : 4)),\n  }\n)\n\nconst monoFont = createGenericFont(\n  `\"ui-monospace\", \"SFMono-Regular\", \"SF Mono\", Menlo, Consolas, \"Liberation Mono\", monospace`,\n  {\n    weight: {\n      1: '500',\n    },\n    size: {\n      1: 11,\n      2: 12,\n      3: 13,\n      4: 14,\n      5: 16,\n      6: 18,\n      7: 20,\n      8: 22,\n      9: 30,\n      10: 42,\n      11: 52,\n      12: 62,\n      13: 72,\n      14: 92,\n      15: 114,\n      16: 124,\n    },\n  },\n  {\n    sizeLineHeight: (x) => x * 1.5,\n  }\n)\n\nexport const fonts = {\n  heading: headingFont,\n  body: bodyFont,\n  mono: monoFont,\n  silkscreen: silkscreenFont,\n}\n","export const demoMedia = [500, 620, 780, 900]\nexport const widths = [660, 800, 1020, 1280]\n\n// note order is important!\n// earlier defined = less important\n\nexport const media = {\n  // for site\n  xl: { maxWidth: 1650 },\n  lg: { maxWidth: 1280 },\n  md: { maxWidth: 1020 },\n  sm: { maxWidth: 800 },\n  xs: { maxWidth: 660 },\n  xxs: { maxWidth: 390 },\n  gtXs: { minWidth: 660 + 1 },\n  gtSm: { minWidth: 800 + 1 },\n  gtMd: { minWidth: 1020 + 1 },\n  gtLg: { minWidth: 1280 + 1 },\n  gtXl: { minWidth: 1650 + 1 },\n}\n\n// note all the non \"gt\" ones should be true to start to match mobile-first\n// were aiming for \"xs\" to be the default to \"gtXs\" true too\nexport const mediaQueryDefaultActive = {\n  xl: true,\n  lg: true,\n  md: true,\n  sm: true,\n  xs: true,\n  // false\n  xxs: false,\n}\n","import { tokens, themes as themesIn } from '@tamagui/themes/v3-themes'\nimport { animations } from './v3-animations'\nimport type { CreateTamaguiProps } from '@tamagui/web'\n\nimport { fonts } from './fonts'\nimport { media, mediaQueryDefaultActive } from './media'\n\n// fix vite - react native uses global which it doesn't provide\nglobalThis['global'] ||= globalThis\n\n// v3 shorthands (inlined from deprecated @tamagui/shorthands/v2)\nexport const shorthands = {\n  ussel: 'userSelect',\n  cur: 'cursor',\n  pe: 'pointerEvents',\n  col: 'color',\n  ff: 'fontFamily',\n  fos: 'fontSize',\n  fost: 'fontStyle',\n  fow: 'fontWeight',\n  ls: 'letterSpacing',\n  lh: 'lineHeight',\n  ta: 'textAlign',\n  tt: 'textTransform',\n  ww: 'wordWrap',\n  ac: 'alignContent',\n  ai: 'alignItems',\n  als: 'alignSelf',\n  b: 'bottom',\n  bg: 'backgroundColor',\n  bbc: 'borderBottomColor',\n  bblr: 'borderBottomLeftRadius',\n  bbrr: 'borderBottomRightRadius',\n  bbw: 'borderBottomWidth',\n  blc: 'borderLeftColor',\n  blw: 'borderLeftWidth',\n  bc: 'borderColor',\n  br: 'borderRadius',\n  bs: 'borderStyle',\n  brw: 'borderRightWidth',\n  brc: 'borderRightColor',\n  btc: 'borderTopColor',\n  btlr: 'borderTopLeftRadius',\n  btrr: 'borderTopRightRadius',\n  btw: 'borderTopWidth',\n  bw: 'borderWidth',\n  dsp: 'display',\n  f: 'flex',\n  fb: 'flexBasis',\n  fd: 'flexDirection',\n  fg: 'flexGrow',\n  fs: 'flexShrink',\n  fw: 'flexWrap',\n  h: 'height',\n  jc: 'justifyContent',\n  l: 'left',\n  m: 'margin',\n  mah: 'maxHeight',\n  maw: 'maxWidth',\n  mb: 'marginBottom',\n  mih: 'minHeight',\n  miw: 'minWidth',\n  ml: 'marginLeft',\n  mr: 'marginRight',\n  mt: 'marginTop',\n  mx: 'marginHorizontal',\n  my: 'marginVertical',\n  o: 'opacity',\n  ov: 'overflow',\n  p: 'padding',\n  pb: 'paddingBottom',\n  pl: 'paddingLeft',\n  pos: 'position',\n  pr: 'paddingRight',\n  pt: 'paddingTop',\n  px: 'paddingHorizontal',\n  py: 'paddingVertical',\n  r: 'right',\n  shac: 'shadowColor',\n  shar: 'shadowRadius',\n  shof: 'shadowOffset',\n  shop: 'shadowOpacity',\n  t: 'top',\n  w: 'width',\n  zi: 'zIndex',\n} as const\n\nexport { animations } from './v3-animations'\nexport { tokens, themes } from '@tamagui/themes/v3-themes'\nexport { fonts } from './fonts'\nexport { media, mediaQueryDefaultActive } from './media'\n\nexport const selectionStyles = (theme) =>\n  theme.color5\n    ? {\n        backgroundColor: theme.color5,\n        color: theme.color11,\n      }\n    : null\n\n// tree shake away themes in production\nconst themes =\n  process.env.TAMAGUI_OPTIMIZE_THEMES === 'true' ? ({} as typeof themesIn) : themesIn\n\nexport const config = {\n  animations,\n  themes,\n  media,\n  shorthands,\n  tokens,\n  fonts,\n  selectionStyles,\n  settings: {\n    mediaQueryDefaultActive,\n    defaultFont: 'body',\n    fastSchemeChange: true,\n    shouldAddPrefersColorThemes: true,\n  },\n} satisfies CreateTamaguiProps\n","import { createTamagui } from 'tamagui'\r\nimport { config } from '@tamagui/config/v3'\r\n\r\nconst tamaguiConfig = createTamagui(config)\r\n\r\nexport type AppConfig = typeof tamaguiConfig\r\n\r\ndeclare module 'tamagui' {\r\n  interface TamaguiCustomConfig extends AppConfig {}\r\n}\r\n\r\nexport default tamaguiConfig\r\n","import React from 'react'\r\nimport { TamaguiProvider, Theme } from 'tamagui'\r\nimport config from '../tamagui.config'\r\n\r\ntype ThemeName = keyof typeof config.themes\r\n\r\ntype AppProviderProps = {\r\n  children: React.ReactNode\r\n  defaultTheme?: ThemeName\r\n}\r\n\r\nexport const AppProvider = ({\r\n  children,\r\n  defaultTheme = 'light',\r\n}: AppProviderProps) => {\r\n  return (\r\n    <TamaguiProvider config={config} defaultTheme={defaultTheme}>\r\n      <Theme name={defaultTheme}>\r\n        {children}\r\n      </Theme>\r\n    </TamaguiProvider>\r\n  )\r\n}\r\n","import { Button as TButton, Text } from 'tamagui'\r\n\r\ntype Props = {\r\n  title: string\r\n  onPress?: () => void\r\n  full?: boolean\r\n}\r\n\r\nexport const Button = ({ title, onPress, full }: Props) => {\r\n  return (\r\n    <TButton\r\n      width={full ? '100%' : 'auto'}\r\n      onPress={onPress}\r\n      backgroundColor=\"$blue10\"\r\n      pressStyle={{ backgroundColor: '$blue9' }}\r\n    >\r\n      <Text color=\"white\">{title}</Text>\r\n    </TButton>\r\n  )\r\n}\r\n","import { YStack, Text, Input } from 'tamagui'\r\n\r\ntype Props = {\r\n  label?: string\r\n  value: string\r\n  onChangeText: (text: string) => void\r\n}\r\n\r\nexport const TextField = ({ label, value, onChangeText }: Props) => {\r\n  return (\r\n    <YStack gap=\"$2\">\r\n      {label && <Text fontWeight=\"600\">{label}</Text>}\r\n\r\n      <Input\r\n        value={value}\r\n        onChangeText={onChangeText}\r\n        borderWidth={1}\r\n        borderColor=\"$borderColor\"\r\n      />\r\n    </YStack>\r\n  )\r\n}\r\n","import { YStack } from 'tamagui'\r\n\r\nexport const Card = ({ children }: { children: React.ReactNode }) => {\r\n  return (\r\n    <YStack\r\n      padding=\"$4\"\r\n      borderRadius=\"$6\"\r\n      backgroundColor=\"$background\"\r\n      borderWidth={1}\r\n      borderColor=\"$borderColor\"\r\n      shadowColor=\"$shadowColor\"\r\n      elevation={4}\r\n    >\r\n      {children}\r\n    </YStack>\r\n  )\r\n}\r\n"],"mappings":"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","names":["React","React","timer","runs","typesOfRuns","Set","timings","print","typeRuns","size","totalTime","out","map","name","endsWith","avg","slice","padEnd","total","padStart","join","console","info","start","opts","_a","quiet","time","strings","vars","elapsed","performance","now","tag","templateToString","add","result","forEach","str","i","length","profile","reduce","useContext","React","pseudoDescriptorsBase","hoverStyle","name","priority","pressStyle","stateKey","focusVisibleStyle","focusStyle","focusWithinStyle","disabledStyle","pseudoPriorities","hover","press","focus","focusVisible","focusWithin","disabled","pseudoDescriptors","enterStyle","selector","exitStyle","defaultMediaImportance","Object","keys","length","mergeProps","defaultProps","props","out","key","mergeProp","mergeComponentProps","contextProps","overriddenContext","contextValue","val","pseudoDescriptors","defaultVal","objectIdentityKey","obj","k","key","arg","type","cache","has","get","v","Math","random","set","WeakMap","jsx","createStyledContext","defaultValues","namespace","createReactContext","React","Math","random","useReactMemo","useReactContext","OGContext","OGProvider","Provider","Context","scopedContexts","Map","LastScopeInNamespace","getOrCreateScopedContext","scope","ScopedContext","get","set","getNamespacedScope","children","scopeIn","__disableMergeDefaultValues","values","next","mergeProps","objectIdentityKey","ScopedProvider","value","useStyledContext","lastScopeInNamespace","context","props","ComponentContext","createStyledContext","disableSSR","inText","language","animationDriver","setParentFocusState","insets","createContext","GroupContext","useCallback","useCreateShallowSetState","setter","debug","stateOrGetState","prev","next","update","mergeIfNotShallowEqual","process","env","NODE_ENV","console","groupCollapsed","info","trace","groupEnd","isEqualShallow","key","useEffect","useLayoutEffect","isWeb","isBrowser","window","isServer","isClient","useIsomorphicLayoutEffect","isServer","useEffect","useLayoutEffect","isChrome","navigator","test","userAgent","isWebTouchable","isClient","window","maxTouchPoints","isAndroid","isIos","process","env","TEST_NATIVE_PLATFORM","currentPlatform","useRef","useSyncExternalStore","viewDefaultStyles","webViewFlexCompatStyles","display","alignItems","flexDirection","flexBasis","boxSizing","minHeight","minWidth","flexShrink","Object","assign","MISSING_THEME_MESSAGE","process","env","NODE_ENV","conf","setConfigCalledByThisInstance","haventCalledErrorMessage","process","env","NODE_ENV","MISSING_THEME_MESSAGE","getConfigFromGlobalOrLocal","globalThis","__tamaguiConfig","__tamaguiHasWarnedGlobalFallback","__tamaguiPendingCheck","setTimeout","console","warn","getSetting","key","_a","config","Error","settings","getConfig","config","getConfigFromGlobalOrLocal","Error","process","env","NODE_ENV","getConfigMaybe","tokensMerged","getTokens","prefixed","config","getConfigFromGlobalOrLocal","process","env","NODE_ENV","Error","haventCalledErrorMessage","tokens","tokensParsed","tokensMerged","getTokenObject","value","group","_a","_b","specificTokens","Object","keys","find","cat","getToken","useVariable","isWeb","token","variable","val","getTokenValue","devConfig","camelToHyphen","str","replace","m","toLowerCase","cache","WeakMap","mediaObjectToString","query","has","get","res","Object","entries","map","feature","value","test","join","set","mediaState","process","env","NODE_ENV","Proxy","get","target","key","Error","Reflect","mediaQueryConfig","getMedia","mediaState","mediaKeys","Set","kebabToCamel","str","replace","_","c","toUpperCase","isValidPseudo","pseudoPriorities","getGroupPropParts","groupProp","m","getMedia","name","a","b","split","m2","media","pseudoCandidate","process","env","NODE_ENV","console","warn","pseudo","MEDIA_SEP","prefixes","selectors","groupPseudoToPseudoCSSMap","press","focusVisible","focusWithin","specificities","Array","fill","map","_","i","join","getThemeOrGroupSelector","name","styleInner","isGroup","groupParts","isTheme","precedenceImportancePrefix","selectorStart","lastIndexOf","selectorEnd","selector","slice","precedenceSpace","getSetting","pseudoSelectorName","pseudo","pseudoSelector","presedencePrefix","mediaSelector","replaceAll","createMediaStyle","styleObject","mediaKeyIn","mediaQueries","type","negate","priority","property","identifier","pseudoIn","rules","isPlatform","isNonWindowMedia","negKey","ogPrefix","indexOf","id","MEDIA_SEP","replace","styleRule","groupPriority","groupMediaKey","containerName","nextIdentifier","rule","isHover","specificity","getGroupPropParts","media","nextSelector","selectors","mediaKeys","Object","keys","fromEntries","key","mediaObjectToString","prefixes","k","index","mediaKey","mediaQuery","prefix","includes","mediaKeyRegex","isMediaKey","key","mediaKeys","has","test","getMediaKey","match","initState","mediaKeysOrdered","getMediaKeyImportance","process","env","NODE_ENV","Error","indexOf","listeners","Set","States","WeakMap","setMediaShouldUpdate","ref","enabled","keys","cur","get","set","subscribe","subscriber","listeners","add","delete","useMedia","componentContext","debug","componentState","internalRef","useRef","current","Set","lastState","getMedia","pendingState","size","clear","state","useSyncExternalStore","curKeys","ms","key","process","env","NODE_ENV","console","warn","mediaEmit","getServerSnapshot","Proxy","_","disableMediaTouch","Reflect","initState","_disableMediaTouch","val","getMediaState","mediaGroups","layout","res","Object","fromEntries","map","mediaKey","mediaKeyMatch","getMediaImportanceIfMoreImportant","styleState","isSizeMedia","importance","getMediaKeyImportance","defaultMediaImportance","usedKeys","mediaKeyMatch","key","dimensions","mediaQueries","mediaQueryConfig","Object","keys","every","query","expectedVal","isMax","startsWith","isWidth","endsWith","givenVal","useRef","cache","Map","cacheSize","simpleHash","strIn","hashMin","has","get","str","startsWith","slice","length","hash","valids","added","len","i","char","charCodeAt","isValidCSSCharCode","hashChar","res","Math","abs","clear","set","c","imul","code","composeEventHandlers","og","next","checkDefaultPrevented","event","defaultPrevented","StyleObjectProperty","StyleObjectIdentifier","StyleObjectPseudo","StyleObjectRules","webOnlyStylePropsView","transition","textWrap","backdropFilter","WebkitBackdropFilter","background","borderTop","borderRight","borderBottom","borderLeft","backgroundAttachment","backgroundBlendMode","backgroundClip","backgroundOrigin","backgroundPosition","backgroundRepeat","backgroundSize","borderBottomStyle","borderImage","borderLeftStyle","borderRightStyle","borderTopStyle","caretColor","clipPath","contain","containerType","content","float","mask","maskBorder","maskBorderMode","maskBorderOutset","maskBorderRepeat","maskBorderSlice","maskBorderSource","maskBorderWidth","maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPosition","maskRepeat","maskSize","maskType","objectFit","objectPosition","overflowBlock","overflowInline","overflowX","overflowY","pointerEvents","scrollbarWidth","textEmphasis","touchAction","transformStyle","userSelect","willChange","webOnlyStylePropsText","whiteSpace","wordWrap","textOverflow","textDecorationDistance","WebkitLineClamp","WebkitBoxOrient","cssShorthandLonghands","borderWidth","borderStyle","borderColor","borderTopWidth","borderTopStyle","borderTopColor","borderRightWidth","borderRightStyle","borderRightColor","borderBottomWidth","borderBottomStyle","borderBottomColor","borderLeftWidth","borderLeftStyle","borderLeftColor","outlineWidth","outlineStyle","outlineColor","outlineOffset","textColors","color","textDecorationColor","textShadowColor","tokenCategories","radius","borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","borderStartStartRadius","borderStartEndRadius","borderEndStartRadius","borderEndEndRadius","size","width","height","minWidth","minHeight","maxWidth","maxHeight","blockSize","minBlockSize","maxBlockSize","inlineSize","minInlineSize","maxInlineSize","zIndex","backgroundColor","borderBlockStartColor","borderBlockEndColor","borderBlockColor","borderInlineColor","borderInlineStartColor","borderInlineEndColor","borderEndColor","borderStartColor","shadowColor","caretColor","stylePropsUnitless","WebkitLineClamp","animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","columnCount","flex","flexGrow","flexOrder","flexPositive","flexShrink","flexNegative","fontWeight","gridRow","gridRowEnd","gridRowGap","gridRowStart","gridColumn","gridColumnEnd","gridColumnGap","gridColumnStart","gridTemplateColumns","gridTemplateAreas","lineClamp","opacity","order","orphans","tabSize","widows","zoom","scale","scaleX","scaleY","scaleZ","shadowOpacity","stylePropsTransform","x","y","perspective","skewX","skewY","matrix","rotate","rotateY","rotateX","rotateZ","stylePropsView","backfaceVisibility","borderCurve","cursor","borderBottomEndRadius","borderBottomStartRadius","borderBlockWidth","borderBlockEndWidth","borderBlockStartWidth","borderInlineWidth","borderInlineEndWidth","borderInlineStartWidth","borderBlockStyle","borderBlockEndStyle","borderBlockStartStyle","borderInlineStyle","borderInlineEndStyle","borderInlineStartStyle","borderTopEndRadius","borderTopStartRadius","transform","transformOrigin","alignContent","alignItems","alignSelf","borderEndWidth","borderStartWidth","bottom","display","end","flexBasis","flexDirection","flexWrap","gap","columnGap","rowGap","justifyContent","left","margin","marginBlock","marginBlockEnd","marginBlockStart","marginInline","marginInlineStart","marginInlineEnd","marginBottom","marginEnd","marginHorizontal","marginLeft","marginRight","marginStart","marginTop","marginVertical","overflow","padding","paddingBottom","paddingInline","paddingBlock","paddingBlockStart","paddingInlineEnd","paddingInlineStart","paddingEnd","paddingHorizontal","paddingLeft","paddingRight","paddingStart","paddingTop","paddingVertical","position","right","start","top","inset","insetBlock","insetBlockEnd","insetBlockStart","insetInline","insetInlineEnd","insetInlineStart","direction","shadowOffset","shadowRadius","isAndroid","elevationAndroid","boxShadow","border","filter","backgroundImage","experimental_backgroundImage","boxSizing","mixBlendMode","isolation","outline","webOnlyStylePropsView","stylePropsFont","fontFamily","fontSize","fontStyle","fontVariant","letterSpacing","lineHeight","textTransform","stylePropsTextOnly","textAlign","textDecorationLine","textDecorationStyle","textShadow","textShadowOffset","textShadowRadius","userSelect","verticalAlign","webOnlyStylePropsText","stylePropsText","stylePropsAll","validPseudoKeys","enterStyle","exitStyle","hoverStyle","pressStyle","focusStyle","disabledStyle","focusWithinStyle","focusVisibleStyle","validStyles","Decorated","Symbol","withStaticProperties","component","staticProps","Object","assign","constructCSSVariableName","name","process","env","TAMAGUI_CSS_VARIABLE_PREFIX","createVariable","props","skipHash","isVariable","key","val","isVar","simpleHash","variable","isWeb","createCSSVariable","variableToString","vrble","getValue","v","getVariable","nameOrVariable","group","_a","_b","dynamic","setDidGetVariableValue","tokens","getConfig","tokensParsed","accessed","didGetVariableValue","getVariableValue","token","createCSSVariable","nameProp","includeVar","process","env","NODE_ENV","Error","name","simpleHash","constructCSSVariableName","cache","Map","curKeys","curSchemeKeys","curProps","curState","emptyObject","getThemeProxied","_props","_state","_keys","_schemeKeys","theme","has","get","config","getConfig","track","key","schemeOptimized","current","Set","add","process","env","NODE_ENV","debug","console","info","proxied","Object","fromEntries","entries","flatMap","value","proxied2","val","globalThis","tamaguiAvoidTracking","platform","outVal","getVariable","name","scheme","set","createContext","useCallback","useContext","useId","useSyncExternalStore","ThemeStateContext","createContext","allListeners","Map","listenersByParent","HasRenderedOnce","WeakMap","HadTheme","PendingUpdate","states","localStates","shouldForce","getThemeState","id","states","get","themes","rootThemeState","useThemeState","props","isRoot","keys","schemeKeys","disable","parentId","useContext","ThemeStateContext","Error","process","env","NODE_ENV","MISSING_THEME_MESSAGE","name","componentName","states","get","id","theme","getConfig","themes","light","useId","subscribe","useCallback","cb","listenersByParent","Set","add","allListeners","set","PendingUpdate","shouldForce","delete","localStates","propsKey","getPropsKey","getSnapshot","_a","_b","local","parentState","isSchemeOnlyChange","keysSize","current","size","allKeysSchemeOptimized","canSkipForSchemeChange","needsUpdate","passThrough","HasRenderedOnce","rerender","next","getNextState","debug","console","groupCollapsed","info","groupEnd","Object","assign","globalThis","time","state","useSyncExternalStore","useIsomorphicLayoutEffect","HadTheme","scheduleUpdate","warn","lastState","pendingUpdate","isNew","getNewThemeName","isSameAsParent","shouldRerender","message","trace","scheme","getScheme","isInverse","nextState","parentName","rootThemeState","shouldAvoidRerender","queue","visited","length","parent","shift","children","childId","has","push","forEach","validSchemes","dark","split","forceUpdate","reset","unstyled","themes2","lastPartIndex","lastIndexOf","name2","slice","parentParts","lastName","toLowerCase","pop","subNames","filter","Boolean","found","nameHasScheme","subName","potentialBases","i","join","outer","base","candidates","potential","max","forceClassName","hasThemeUpdatingProps","useThemeWithState","props","isRoot","keys","useRef","schemeKeys","themeState","useThemeState","process","env","NODE_ENV","passThrough","theme","TAMAGUI_DISABLE_NO_THEME_WARNING","console","error","JSON","stringify","getThemeProxied","React","setRef","ref","value","current","composeRefs","refs","node","forEach","useComposedRefs","useCallback","React","useMemo","isDevTools","process","env","NODE_ENV","Function","defaultComponentState","hover","press","pressIn","focus","focusVisible","focusWithin","unmounted","disabled","defaultComponentStateMounted","defaultComponentStateShouldEnter","getWebEvents","events","webStyle","onMouseEnter","onMouseLeave","onPress","onMouseDown","onPressIn","onMouseUp","onPressOut","onTouchStart","onTouchEnd","onFocus","onBlur","getDefaultProps","staticConfig","propsComponentName","isSubText","_a","_b","defaultProps","conf","getConfig","name","componentName","isText","userDefaultProps","hasExplicitFontFamily","fontFamily","color","whiteSpace","wordWrap","React","defaultOffset","height","width","normalizeShadow","shadowColor","shadowOffset","shadowOpacity","shadowRadius","height","width","defaultOffset","fixStyles","style","_a","shadowRadius","shadowColor","shadowOpacity","shadowOffset","Object","assign","normalizeShadow","key","borderDefaults","nativeStyle","isWeb","borderWidth","borderBottomWidth","borderTopWidth","borderLeftWidth","borderRightWidth","normalizeColor","color","opacity","Math","round","stylePropsAllPlusTransforms","stylePropsAll","translateX","translateY","normalizeValueWithProperty","value","property","isWeb","stylePropsUnitless","__getValue","res","transformsToString","transforms","map","transform","type","Object","keys","value","join","normalizeValueWithProperty","getCSSStylesAtomic","style","styleToCSS","out","key","val","pseudoDescriptors","push","getStyleAtomic","isMediaKey","subKey","so","getStyleObject","pseudo","conf","Array","isArray","transform","transformsToString","value","normalizeValueWithProperty","hash","simpleHash","pseudoPrefix","name","getConfigMaybe","identifier","inverseShorthands","rules","createAtomicRules","shadowOffset","shadowRadius","shadowColor","shadowOpacity","offset","defaultOffset","width","height","radius","color","normalizeColor","shadow","boxShadow","textShadowColor","textShadowOffset","textShadowRadius","blurRadius","offsetX","offsetY","textShadow","createDeclarationBlock","important","next","hyphenateStyleName","hcache","toHyphenLower","match","toLowerCase","replace","selectorPriority","res","priority","map","join","property","pseudoIdPostfix","pseudoSelector","selector","cls","cssShorthandLonghands","enterStyle","block","webkitProperty","toUpperCase","slice","finalValue","boxOnly","boxNone","r","totalSelectorsInserted","Map","allSelectors","allRules","trackInsertedStyle","id","next","totalSelectorsInserted","get","set","bailAfterEnv","process","env","TAMAGUI_BAIL_AFTER_SCANNING_X_CSS_RULES","bailAfter","sheet","trackAllRules","updateRules","identifier","rules","trackAllRules","allRules","join","nonce","insertStyleRules","rulesToInsert","sheet","document","head","styleTag","createElement","id","nonce","appendChild","key","styleObject","identifier","StyleObjectIdentifier","shouldInsertStyleRules","rules","StyleObjectRules","allSelectors","join","trackInsertedStyle","updateRules","rule","insertRule","cssRules","length","process","env","NODE_ENV","console","error","maxToInsert","TAMAGUI_INSERT_SELECTOR_TRIES","IS_STATIC","total","totalSelectorsInserted","get","TAMAGUI_STYLE_INSERTION_WARNING_LIMIT","warn","isActivePlatform","key","startsWith","platform","slice","currentPlatform","isActiveTheme","key","activeThemeName","startsWith","slice","log","args","process","env","NODE_ENV","_disableMediaTouch","console","info","err","error","neg1Flex","expandStyle","key","value","getSetting","EXPANSIONS","map","k","all","horiz","vert","xy","borderColor","borderRadius","borderWidth","margin","marginHorizontal","marginVertical","padding","paddingHorizontal","paddingVertical","isWeb","borderStyle","overflow","overscrollBehavior","parent","prefix","slice","exec","index","length","cache","WeakMap","getVariantExtras","styleState","has","get","props","conf","context","theme","styleProps","styledContext","fonts","fontsParsed","language","getFontsForLanguage","next","tokens","tokensParsed","fontFamily","getVariableValue","getSetting","font","set","fontLanguageCache","Object","fromEntries","entries","flatMap","name","lang","langKey","fontShorthand","fontSize","fontWeight","didLogMissingToken","_lastFontFamilyToken","getLastFontFamilyToken","setLastFontFamilyToken","value","getTokenForKey","key","styleProps","styleState","_a","_b","resolveAs","resolveValues","theme","conf","getConfig","context","fontFamily","staticConfig","themeValue","slice","tokensParsed","valOrVar","hasSet","customTokenAccept","accept","val","process","env","NODE_ENV","debug","globalThis","tamaguiAvoidTracking","console","info","specificTokens","language","getFontsForLanguage","fontsParsed","family","fam","defaultFontToken","cat","tokenCategories","res","TAMAGUI_DISABLE_MISSING_TOKEN_LOG","groupCollapsed","groupEnd","spaceVar","space","out","resolveVariableValue","warn","isVariable","get","variable","isObj","x","Array","isArray","normalizeStyle","style","disableNormalize","res","key","prop","pseudoDescriptors","isObj","value","normalizeValueWithProperty","out","expandStyle","Object","assign","fromEntries","fixStyles","tokenPattern","platformResolveValue","_key","value","styleProps","styleState","replace","t","r","getTokenForKey","String","compoundKeys","boxShadow","textShadow","filter","backgroundImage","border","outline","resolveCompoundTokens","key","value","styleProps","styleState","includes","platformResolveValue","resolveRem","value","isRemValue","includes","nativeOnlyProps","accessibilityElementsHidden","accessibilityIgnoresInvertColors","accessibilityLanguage","adjustsFontSizeToFit","allowFontScaling","android_hyphenationFrequency","dataDetectorType","dynamicTypeRamp","elevationAndroid","ellipsizeMode","hapticFeedback","hapticStyle","hitSlop","importantForAccessibility","lineBreakStrategyIOS","maxFontSizeMultiplier","minimumFontScale","needsOffscreenAlphaCompositing","nextFocusDown","nextFocusForward","nextFocusLeft","nextFocusRight","nextFocusUp","onAccessibilityAction","onAccessibilityEscape","onAccessibilityTap","onMagicTap","onTextLayout","pressRetentionOffset","selectionColor","shouldRasterizeIOS","suppressHighlighting","textBreakStrategy","skipProps","untilMeasured","transition","space","animateOnly","disableClassName","debug","componentName","disableOptimization","render","style","group","animatePresence","process","env","NODE_ENV","Object","assign","nativeOnlyProps","propMapper","key","value","styleState","disabled","map","setLastFontFamilyToken","conf","styleProps","staticConfig","variants","noExpand","variantValue","resolveVariants","forEach","key2","value2","disableExpandShorthands","shorthands","originalValue","getTokenForKey","resolved","resolveCompoundTokens","isRemValue","resolveRem","isVariable","resolveVariableValue","resolveValues","fontToken","getLastFontFamilyToken","fontFamily","expanded","expandStyle","max","length","i","nkey","nvalue","parentVariantKey","debug","getVariantDefinition","process","env","NODE_ENV","console","groupCollapsed","info","groupEnd","TAMAGUI_WARN_ON_MISSING_VARIANT","name","componentName","warn","fn","extras","getVariantExtras","fontFamilyResult","isObj","fontFamilyUpdate","inverseShorthands","getFontFamilyFromNameOrVariable","resolveTokensAndVariants","normalizeStyle","noNormalize","next","Object","entries","getVariableValue","input","val","variableToFontNameCache","get","fontsParsed","familyVariable","family","set","WeakMap","_a","_b","theme","res","_key","subKey","noSkip","skipProps","contextProps","context","props","parentStaticConfig","overriddenContextProps","originalContextPropValues","variantOut","val2","pseudoDescriptors","assign","fVal","subObject","tokenCats","spreadName","variant","exact","tokensParsed","slice","fontSizeVariant","fontSizeTokens","has","sortString","a","b","conf","styleOriginalValues","WeakMap","PROP_SPLIT","normalizeGroupKey","key","groupContext","parts","split","plen","length","pseudoPriorities","name","replace","isValidStyleKey","validStyles","accept","getSplitStyles","props","staticConfig","theme","themeName","componentState","styleProps","parentSplitStyles","componentContext","elementType","startedUnhydrated","debug","_a","_b","getConfig","animationDriver","animations","passThrough","isWeb","isAnimated","isReactNative","noNormalize","shorthands","isHOC","isText","isInput","variants","inlineProps","inlineWhenUnflattened","parentStaticConfig","acceptsClassName","viewProps","mediaState","globalMediaState","shouldDoClasses","noClass","rulesToInsert","classNames","space","pseudos","hasMedia","dynamicThemeAccess","pseudoGroups","mediaGroups","className","mediaStylesSeen","stylePropsText","validStylesView","process","env","NODE_ENV","time","styleState","style","usedKeys","context","IS_STATIC","fallbackProps","Proxy","get","_","val","Reflect","has","isClient","isDevTools","console","groupCollapsed","log","asChild","noSkip","disableExpandShorthands","noExpand","styledContext","webContainerType","settings","parentVariants","keyOg","keyInit","valInit","accepted","getSubStyle","defaults","getDefaultProps","defaultVal","skipProps","identifier","containerCSS","addStyleToInsertRules","isValidStyleKeyInit","startsWith","dataSet","disabled","id","isVariant","isStyleLikeKey","isPseudo","validPseudoKeys","isMedia","getMediaKey","isMediaOrPseudo","isStyleProp","shouldPassProp","parentVariant","isHOCShouldPassThrough","shouldPassThrough","variant","passDownProp","groupEnd","fontFamily","fontsParsed","disablePropMap","propMapper","originalVal","_c","_d","_e","isStyledContextProp","mergeStyle","after","pseudoStyleObject","Object","assign","descriptor","pseudoDescriptors","isEnter","isExit","pseudoStyles","getStyleAtomic","info","psuedoStyle","fullKey","StyleObjectProperty","StyleObjectIdentifier","descriptorKey","stateKey","isDisabled","isExiting","unmounted","importance","priority","pseudoOriginalValues","pkey","val2","applyDefaultStyle","curImportance","shouldMerge","key2","k","Math","max","mediaKeyShort","slice","willBeAnimated","Set","add","isActivePlatform","mediaStyle","mediaStyles","getCSSStylesAtomic","property","isSubStyle","out","createMediaStyle","mediaQueryConfig","subKey","StyleObjectPseudo","mergeMediaStyle","originalVal2","mergeMediaByImportance","importanceBump","isThemeMedia","isGroupMedia","groupInfo","getGroupPropParts","groupName","groupState","state","groupPseudoKey","pseudo","groupMediaKey","media","componentGroupState","group","mediaState2","isActive","layout","mediaKeyMatch","componentGroupPseudoState","priority2","mediaOriginalValues","transition","pseudoTransitions","isActiveTheme","subOriginalValues","subSubKey","flatTransforms","fixStyles","noMergeStyle","supportsCSS","styleToCSS","mergeFlatTransforms","Array","isArray","transform","transformsToString","retainedStyles","shouldRetain","$$css","atomic","atomicStyle","value","isAnimatedAndTransitionOnly","animateOnly","includes","nonAnimatedTransitionOnly","styleProp","normalizeStyle","len","i","result","overriddenContextProps","asChildExceptStyleLike","defaultProps","fontFamilyClassName","groupClassName","componentNameFinal","componentName","componentClassName","classList","push","values","join","finalClassName","cnStyles","logs","target","entries","sort","a","b","sortString","forEach","mergeTransform","disableNormalize","contextProps","originalFromState","originalContextPropValues","stylePropsTransform","normalizeValueWithProperty","styleIn","avoidMergeTransform","conf2","styleOut","originalValues","skey","sval","parentTransform","styleOutTransform","merged","outer","pt","pk","j","sk","fk","ck","set","useInsertEffectCompat","React","useInsertionEffect","useIsomorphicLayoutEffect","useSplitStyles","c","d","e","f","g","h","l","res","insertStyleRules","styleObject","shouldInsertStyleRules","updateRules","StyleObjectRules","defaultColor","TAMAGUI_DEFAULT_COLOR","animatableDefaults","fromEntries","tokenCategories","color","map","v","opacity","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skewX","skewY","x","y","borderRadius","obj","backwards","mapTransformKeys","shouldMergeObject","next","mediaKey","isSizeMedia","debugProp","getMediaImportanceIfMoreImportant","defaultValues","isEventHandler","mergeSlotStyleProps","base","overlay","key","baseVal","overlayVal","style","className","ref","composeRefs","test","composeEventHandlers","mergeRenderElementProps","elementProps","viewProps","children","merged","mergeSlotStyleProps","usePointerEvents","_props","_viewProps","resolveEffectivePseudoTransition","prev","next","pseudoTransitions","baseTransition","_a","_b","prevState","hover","press","focus","groups","pressStyle","hoverStyle","focusStyle","key","startsWith","match","groupName","pseudoType","nextGroupPseudo","group","pseudo","prevGroupPseudo","extractPseudoState","state","hooks","setElementProps","node","_a","_b","hooks","subscribeToContextGroup","props","pseudoGroups","mediaGroups","groupContext","process","env","NODE_ENV","console","debug","disposables","Set","name","add","createGroupListener","forEach","d","setStateShallow","parent","dispose","subscribe","layout","pseudo","prev","_a","didChange","group","media","has","mergeIfNotShallowEqual","Object","assign","mediaState","getMediaState","next","React","React","Children","cloneElement","forwardRef","isValidElement","useRef","React","createContext","useContext","jsx","ClientOnlyContext","useIsClientOnly","useContext","ClientOnlyContext","useDidFinishSSR","useSyncExternalStore","subscribe","useEffect","Fragment","jsx","jsxs","node","ThemeDebug","themeState","themeProps","children","process","env","NODE_ENV","isHydrated","useDidFinishSSR","document","createElement","style","height","overflowY","position","zIndex","bottom","left","right","display","border","flexDirection","background","useEffect","body","appendChild","parentState","parentId","getThemeState","createPortal","whiteSpace","maxWidth","overflow","padding","id","JSON","stringify","name","color1","theme","val","isNew","componentName","reset","color","displayName","jsx","Theme","forwardRef","props","ref","disable","children","passThrough","isRoot","_isRoot","_","themeState","useThemeWithState","finalChildren","Children","map","child","isValidElement","cloneElement","React","only","stateRef","useRef","hasEverThemed","getThemedChildren","avoidForwardRef","shallow","forceClassName","state","current","shouldRenderChildrenWithTheme","isNew","hasThemeUpdatingProps","process","env","NODE_ENV","debug","ThemeDebug","themeProps","ThemeStateContext","Provider","value","id","isInverse","name","requiresExtraWrapper","parentId","parentState","getThemeState","Error","toArray","console","warn","themeSpanProps","getThemeClassNameAndColor","isWeb","baseStyle","contain","inertContainedStyle","inertStyle","className","color","style","className2","startsWith","display","empty","themeColor","theme","variableToString","themeClassName","replace","schemePrefix","themeNameParts","split","themeClasses","length","hierarchyClasses","i","push","slice","join","jsx","themeable","Component","staticConfig","optimize","withTheme","React","forwardRef","props","ref","userDefaults","getDefaultProps","componentName","defaultTheme","theme","defaultResetTheme","themeReset","rest","overriddenContextProps","context","key","val","element","filteredProps","compName","debug","name","reset","contents","Theme","children","Provider","contextValue","useContext","displayName","Fragment","jsx","getStyleTags","styles","length","children","map","styleObject","identifier","StyleObjectIdentifier","href","precedence","suppressHydrationWarning","StyleObjectRules","join","useRef","useState","useComponentState","props","animationDriver","staticConfig","config","_a","_b","isHydrated","useDidFinishSSR","needsHydration","useIsClientOnly","useAnimations","isStub","isHOC","stateRef","useRef","current","startedUnhydrated","hasAnimationProp","style","hasAnimatedStyleValue","supportsCSS","inputStyle","curStateRef","hasAnimated","willBeAnimatedClient","willBeAnimated","isServer","disableClassName","presence","animatePresence","usePresence","presenceState","isExiting","isPresent","isEntering","initial","hasEnterStyle","enterStyle","hasAnimationThatNeedsHydrate","isReactNative","initialState","defaultComponentStateShouldEnter","defaultComponentState","defaultComponentStateMounted","disabled","isDisabled","states","useState","state","forceStyle","setState","isAnimated","isWeb","willHydrate","Object","assign","_","groupName","group","setStateShallow","useCreateShallowSetState","debug","variants","process","env","NODE_ENV","console","warn","JSON","stringify","enterVariant","exitVariant","enterExitVariant","custom","isObj","exv","unmounted","noClass","isAnimatedAndHydrated","isClassNameDisabled","acceptsClassName","getSetting","isDisabledManually","classNameAnimation","log","keys","some","k","val","passThrough","accessibilityState","accessibilityDisabled","Children","cloneElement","forwardRef","isValidElement","memo","Fragment","jsx","Slot","memo","forwardRef","props","forwardedRef","children","slotProps","isValidElement","mergedProps","mergeSlotProps","cloneElement","type","avoidForwardRef","ref","composeRefs","Children","count","only","Slottable","displayName","pressMap","isWeb","onPress","onPressOut","onPressIn","child","childProps","isHTMLChild","key","merged","mergeSlotStyleProps","Fragment","jsx","jsxs","time","debugKeyListeners","startVisualizer","componentSetStates","Set","avoidReRenderKeys","window","cancelPresses","forEach","setState","prev","press","pressIn","clear","cancelTouches","hover","addEventListener","process","env","NODE_ENV","_a","devVisualizerConfig","devConfig","visualizer","globalThis","__tamaguiDevVisualizer","show","val","clearTimeout","tm","isShowing","l","resizeListener","removeEventListener","cancelShow","options","key","delay","metaKey","defaultPrevented","setTimeout","BaseText","BaseView","lastInteractionWasKeyboard","value","lastInteractionWasTouch","isWeb","document","createComponent","staticConfig","config","Component","isText","isHOC","component","React","forwardRef","propsIn","forwardedRef","_b","getConfig","internalID","useId","current","context","isReactNative","debugProp","debug","styledContextValue","useContext","overriddenContextProps","componentContext","ComponentContext","hasTextAncestor","inText","TAMAGUI_IS_CORE_NODE","require","timer","start","props","componentName","defaultProps","getDefaultProps","nextProps","overrides","mergeComponentProps","isClient","useEffect","node","overlay","remove","parentNode","removeChild","debugVisualizerHandler","stateRef","host","createElement","style","inset","zIndex","position","borderColor","borderWidth","borderStyle","dataAt","getAttribute","dataIn","tooltip","top","left","padding","background","color","fontSize","lineHeight","fontFamily","innerText","trim","appendChild","add","delete","groupContextParent","GroupContext","animationDriver","animatedBy","animations","default","useAnimations","componentState","useComponentState","isStub","disabled","groupName","hasAnimationProp","hasEnterStyle","isAnimated","isExiting","isHydrated","presence","presenceState","noClass","state","supportsCSS","willBeAnimated","willBeAnimatedClient","startedUnhydrated","avoidReRenders","useIsomorphicLayoutEffect","pendingState","nextState","setStateShallow","allGroupContexts","useMemo","passThrough","listeners","group","emit","state2","subscribe","cb","size","hasDynGroupChildren","pseudo","defaultComponentStateMounted","listener","dispose","renderProp","render","element","BaseComponent","elementType","needsCustomComponent","disableTheme","themeStateProps","disable","shallow","themeShallow","unstyled","name","theme","needsUpdate","isListeningToTheme","displayName","type","focus","focusWithin","isPresent","dataIs","banner","unmounted","ch","children","childLog","length","slice","console","info","isServer","log","groupEnd","groupCollapsed","Object","keys","themeState","useThemeWithState","isStringElement","mediaState","useMedia","setDidGetVariableValue","resolveValues","styleProps","styledContext","themeName","splitStyles","useSplitStyles","isPassthrough","contextForOverride","contextForProps","parentStaticConfig","groupContext","containerType","groupState","layout","width","height","fromPx","updateGroupListeners","updatedState","transition","childrenGroupState","notifyGroupSubscribers","ogSetStateShallow","updateStyleListener","useStyleListener","mediaState2","nextMedia","nextStyles","getSplitStyles","effectiveTransition","resolveEffectivePseudoTransition","prevPseudoState","pseudoTransitions","extractPseudoState","mediaEmitListeners","mediaEmitCleanup","updateListener","next","mediaEmit","nextOrGetNext","isEqualShallow","canAvoidReRender","every","has","untilMeasured","hasMeasured","opacity","dynamicThemeAccess","hasRuntimeMediaKeys","hasMedia","shouldListenForMedia","didGetVariableValue","mediaListeningKeys","setMediaShouldUpdate","viewProps","viewPropsIn","pseudos","splitStylesStyle","classNames","pseudoGroups","mediaGroups","propsWithAnimation","asChild","spaceDirection","_spaceDirection","onPress","onLongPress","onPressIn","onPressOut","onHoverIn","onHoverOut","onMouseUp","onMouseDown","onMouseEnter","onMouseLeave","onFocus","onBlur","separator","forceStyle","_forceStyle","onClick","_themeProp","nonTamaguiProps","animationStyles","shouldUseAnimation","animatedRef","useStyleEmitter","styleState","ref","className","warn","onLayout","composeEventHandlers","e","nativeEvent","hooks","usePropsTransform","willHydrate","composedRef","composeRefs","x","setElementProps","usePointerEvents","Children","toArray","item","error","tag","unPress","cssStyleDeclarationToObject","styleObject","i","prop","getPropertyValue","computed","getComputedStyle","cancelled","requestAnimationFrame","subscribeToContextGroup","objectIdentityKey","groupEmitter","runtimePressStyle","pressStyle","runtimeFocusStyle","focusStyle","runtimeFocusVisibleStyle","focusVisibleStyle","attachFocus","setParentFocusState","hasDynamicGroupChildren","attachPress","runtimeHoverStyle","hoverStyle","needsHoverState","attachHover","shouldAttach","needsPressState","events","focusVisible","assign","getWebEvents","pressGesture","Slot","passEvents","content","display","useChildren","isRenderPropString","out","getCustomRender","ResetPresence","needsReset","hasEverReset","hasEverResetPresence","Provider","getThemedChildren","__disableMergeDefaultValues","getStyleTags","values","rulesToInsert","title","isDevTools","willPrint","print","res","memo","extendStyledConfig","extended","neverFlatten","isStyledHOC","styleable","Component2","extendedConfig","themeable","TAMAGUI_MEMOIZE_STYLEABLE","replace","isValidElement","elementProps","mergedProps","mergeRenderElementProps","fontWeights","processSection","section","keys","defaultValue","sectionKeys","Object","fillValue","fromEntries","Set","map","key","_a","_b","value","createFont","font","sizeKeys","size","processedFont","entries","normal","family","freeze","cache","WeakMap","createVariables","tokens","parentPath","isFont","has","res","i","keyIn","val","isPrefixed","keyWithPrefix","key","slice","isVariable","niceKey","simpleHash","name","finalValue2","createVariable","isWeb","needsPx","finalValue","set","createTokens","tokens","_a","createVariables","process","env","TAMAGUI_TOKEN_PREFIX","ReactNativeStaticConfigs","WeakMap","getReactNativeConfig","Component","_a","getSize","prefetch","RNConfigs","Image","displayName","render","Text","default","State","blurTextInput","TextInput","get","isReactNative","inlineProps","Set","isText","isInput","mergeVariants","parentVariants","ourVariants","level","variants","key","parentVariant","ourVariant","textLikeElements","Set","styledHtml","tag","options","isText","has","variants","name","defaultVariants","context","defaultProps","conf","Component","componentName","isReactNative","acceptsClassName","children","neverFlatten","createComponent","styled","ComponentIn","config","process","env","NODE_ENV","Error","parentStaticConfig","staticConfig","isPlainStyledComponent","isHOC","isStyledHOC","reactNativeConfig","getReactNativeConfig","staticConfigProps","_a","parentDefaultVariants","parentDefaultProps","pdp","key","val","mergeVariants","component","styledExport","Proxy","get","target","prop","React","View","createComponent","acceptsClassName","defaultProps","viewDefaultStyles","validStyles","useProps","props","opts","propsOut","styleOut","usePropsAndStyle","noExpand","noNormalize","resolveValues","usePropsAndStyle","props","opts","_a","_b","staticConfig","forComponent","View","theme","themeState","useThemeWithState","componentName","name","needsUpdate","componentContext","React","useContext","ComponentContext","groupContext","GroupContext","state","disabled","setStateShallow","useComponentState","animationDriver","getConfig","mediaStateNow","noMedia","mediaState","useMedia","splitStyles","useSplitStyles","isAnimated","noSkip","noMergeStyle","noClass","resolveValues","mediaGroups","pseudoGroups","useIsomorphicLayoutEffect","unmounted","subscribeToContextGroup","Object","keys","join","viewProps","style","ellipsisStyle","maxWidth","overflow","textOverflow","whiteSpace","Text","createComponent","componentName","acceptsClassName","isText","defaultProps","display","boxSizing","wordWrap","margin","inlineWhenUnflattened","Set","variants","numberOfLines","WebkitLineClamp","WebkitBoxOrient","ellipsis","true","validStyles","stylePropsTextOnly","displayName","React","jsx","PresenceContext","createContext","ResetPresence","props","parent","useContext","Provider","value","disable","children","React","usePresence","context","useContext","PresenceContext","id","isPresent","isPresent2","onExitComplete","register","useEffect","startTransition","reactStartTransition","callback","View","styled","getVariableValue","isAndroid","isVariable","getElevation","size","extras","tokens","token","sizeNum","val","getSizedElevation","theme","num","val2","true","height","shadowRadius","Math","round","shadowColor","shadowOffset","width","elevationAndroid","fullscreenStyle","position","inset","variants","fullscreen","true","elevation","getElevation","YStack","styled","View","flexDirection","displayName","XStack","ZStack","neverFlatten","isZStack","styled","elevate","true","_","extras","getElevation","props","size","bordered","val","borderWidth","borderColor","circularStyle","borderRadius","padding","circular","tokens","width","height","maxWidth","maxHeight","minWidth","minHeight","chromelessStyle","backgroundColor","borderColor","shadowColor","hoverStyle","themeableVariants","circular","elevate","bordered","true","transparent","chromeless","all","pressStyle","focusStyle","ThemeableStack","styled","YStack","variants","defaultOptions","shift","bounds","getSpace","space","options","getTokenRelative","cacheVariables","cacheWholeVariables","cacheKeys","cacheWholeKeys","stepTokenUpOrDown","type","current","options","defaultOptions","_a","_b","tokens","getTokens","prefixed","sorted","Object","keys","map","k","sort","a","b","val","token","push","key","sortedExcludingHalfSteps","filter","x","endsWith","isString","tokensOrdered","excludeHalfSteps","min","bounds","max","length","currentIndex","indexOf","shift","isVariable","name","index","Math","found","$true","getTokenRelative","getButtonSized","val","tokens","props","_a","circular","paddingHorizontal","height","borderRadius","xSize","getSpace","radiusToken","radius","$true","React","ButtonNestingContext","createContext","getFontSized","sizeTokenIn","font","fontFamily","props","_a","_b","fontSize","sizeToken","getDefaultSizeToken","style","size","lineHeight","fontWeight","weight","letterSpacing","textTransform","transform","fontStyle","color","process","env","NODE_ENV","debug","console","groupCollapsed","isClient","info","groupEnd","SizableText","styled","Text","name","variants","defaultVariants","cache","WeakMap","has","get","sizeTokens","getTokens","sizeDefault","$true","sizeDefaultSpecific","Object","keys","find","x","val","warn","set","SizableText","styled","Text","name","fontFamily","variants","unstyled","false","size","color","getFontSized","defaultVariants","process","env","TAMAGUI_HEADLESS","staticConfig","...","val","extras","sizeProp","props","fontSizeProp","fontSize","React","jsx","wrapChildrenInText","TextComponent","propsIn","extraProps","children","textProps","size","noTextWrap","color","fontFamily","fontSize","fontWeight","letterSpacing","textAlign","fontStyle","maxFontSizeMultiplier","props","Children","toArray","map","child","index","createGlobalState","key","defaultValue","GLOBAL_KEY","getGlobalState","g","globalThis","setGlobalState","newState","get","set","state","createGlobalState","enabled","type","getPortal","isEnabled","get","set","newState","Fragment","jsx","NativePortalHost","name","getPortal","state","type","PortalHost","globalThis","__tamagui_teleport","jsx","NativePortalProvider","children","Fragment","PortalProvider","createContext","ZIndexStackContext","ZIndexHardcodedContext","React","createContext","memo","useCallback","useContext","useMemo","useReducer","allPortalHosts","Map","portalListeners","Fragment","jsx","jsxs","INITIAL_STATE","registerHost","state","hostName","deregisterHost","addUpdatePortal","portalName","node","index","findIndex","item","name","push","removePortal","process","env","NODE_ENV","console","info","splice","reducer","action","type","PortalStateContext","createContext","PortalDispatchContext","usePortalState","useContext","Error","usePortal","dispatch","registerHost2","useCallback","deregisterHost2","addUpdatePortal2","removePortal2","addPortal","updatePortal","PortalProviderComponent","rootHostName","shouldAddRootHost","children","useReducer","transitionDispatch","useMemo","value","startTransition","portalState","getPortal","content","jsx","Provider","jsxs","PortalHost","NativePortalProvider","PortalProvider","memo","displayName","defaultRenderer","Fragment","props","isWeb","PortalHostWeb","NativePortalHost","PortalHostNonNative","useIsomorphicLayoutEffect","allPortalHosts","delete","style","display","ref","_a","set","portalListeners","forEach","x","forwardProps","render","map","next","restForwardProps","React","Children","child","isValidElement","cloneElement","key","getConfig","isVariable","getFontSize","inSize","opts","res","getFontSizeVariable","val","_a","token","getFontSizeToken","conf","fontsParsed","font","defaultFontToken","size","_b","relativeSize","fontSize","tokensParsed","sizeTokens","Object","keys","foundIndex","indexOf","endsWith","replace","process","env","NODE_ENV","console","warn","tokenIndex","Math","min","max","length","React","getIcon","el","props","isValidElement","cloneElement","createElement","useContext","jsx","jsxs","context","createStyledContext","size","variant","color","elevation","Frame","styled","View","name","role","render","type","tabIndex","variants","unstyled","false","justifyContent","alignItems","flexWrap","flexDirection","cursor","backgroundColor","borderWidth","borderColor","hoverStyle","pressStyle","focusVisibleStyle","outlineColor","outlineStyle","outlineWidth","outlined","process","env","TAMAGUI_HEADLESS","circular","themeableVariants","chromeless","...size","val","extras","buttonStyle","getButtonSized","gap","getTokenValue",":number","getElevation","disabled","true","pointerEvents","defaultVariants","Text","SizableText","userSelect","flexGrow","flexShrink","ellipsis","Icon","props","children","scaleIcon","styledContext","useStyledContext","Error","sizeToken","iconSize","getFontSize","getIcon","ButtonContext","ButtonComponent","styleable","propsIn","ref","_a","isNested","ButtonNestingContext","processedProps","useProps","noNormalize","noExpand","icon","iconAfter","finalSize","iconSizeNumber","themedIcon","themedIconAfter","map","icon2","wrappedChildren","wrapChildrenInText","Provider","value","Button","withStaticProperties","Apply","registerFocusable","id","input","React","useWebRef","forwardedRef","ref","useRef","composedRef","useComposedRefs","createTamagui","createTamaguiCore","process","env","NODE_ENV","conf","sizeTokenKeys","hasKeys","expectedKeys","obj","every","k","tamaguiConfig","name","tokenSet","tokensParsed","Error","Object","keys","join","expected","size","received","some","rk","includes","TamaguiProvider","OGProvider","jsx","TamaguiProvider","children","props","OGProvider","ZIndexStackContext","Provider","value","PortalProvider","shouldAddRootHost","View","styled","useTheme","React","Text","getVariableValue","isWeb","defaultStyles","size","fontFamily","borderWidth","outlineWidth","color","isWeb","tabIndex","focusable","borderColor","backgroundColor","minWidth","hoverStyle","focusStyle","focusVisibleStyle","outlineColor","outlineStyle","inputSizeVariant","val","extras","props","tag","rows","multiline","numberOfLines","textAreaSizeVariant","buttonStyles","getButtonSized","paddingHorizontal","getSpace","shift","bounds","fontStyle","getFontSized","lineHeight","_a","lines","height","getVariableValue","paddingVertical","INPUT_NAME","styledBody","name","render","variants","unstyled","false","disabled","true","defaultVariants","process","env","TAMAGUI_HEADLESS","isInput","accept","placeholderTextColor","selectionColor","cursorColor","selectionHandleColor","underlineColorAndroid","validStyles","Text","staticConfig","jsx","StyledInput","styled","View","styledBody","Input","styleable","props","_forwardedRef","_a","_b","disabled","id","onChangeText","onSubmitEditing","onSelectionChange","selection","placeholderTextColor","selectionColor","rows","keyboardAppearance","returnKeyType","submitBehavior","blurOnSubmit","caretHidden","contextMenuHidden","selectTextOnFocus","secureTextEntry","maxFontSizeMultiplier","allowFontScaling","multiline","keyboardType","autoCapitalize","autoCapitalizeProp","autoCorrect","autoCorrectProp","autoFocusNative","textContentType","onEndEditing","onContentSizeChange","onScroll","onKeyPress","clearButtonMode","clearTextOnFocus","enablesReturnKeyAutomatically","dataDetectorTypes","scrollEnabled","passwordRules","rejectResponderTermination","spellCheck","lineBreakStrategyIOS","lineBreakModeIOS","smartInsertDelete","inputAccessoryViewID","inputAccessoryViewButtonLabel","disableKeyboardShortcuts","cursorColor","selectionHandleColor","underlineColorAndroid","importantForAutofill","disableFullscreenUI","inlineImageLeft","inlineImagePadding","returnKeyLabel","textBreakStrategy","textAlignVertical","verticalAlign","showSoftInputOnFocus","numberOfLines","rest","ref","composedRef","useWebRef","theme","useTheme","React","useEffect","node","current","handleSelectionChange","nativeEvent","start","selectionStart","end","selectionEnd","addEventListener","removeEventListener","setSelectionRange","registerFocusable","focusAndSelect","focus","handleKeyDown","e","key","text","target","value","onKeyDown","handleChange","onChange","finalProps","style","variable","Text","TamaguiText","styled","variants","unstyled","false","color","defaultVariants","process","env","TAMAGUI_HEADLESS","ClientOnly","Configuration","ComponentContext","GroupContext","FontLanguage","Theme","View","createComponent","createFont","createShorthands","createStyledContext","createTokens","createVariable","getConfig","getMedia","getCSSStylesAtomic","getThemes","getToken","getTokenValue","getTokens","getVariable","getVariableName","getVariableValue","insertFont","setConfig","setupDev","isBrowser","isChrome","isClient","isServer","isTamaguiComponent","isTamaguiElement","isTouchable","isVariable","isWeb","isWebTouchable","matchMedia","mediaObjectToString","mediaQueryConfig","mediaState","setOnLayoutStrategy","styled","themeable","useDidFinishSSR","useEvent","useGet","useIsTouchDevice","useIsomorphicLayoutEffect","useMedia","useProps","usePropsAndStyle","useStyle","useConfiguration","useTheme","useThemeName","variableToString","withStaticProperties","blue","blue1","blue2","blue3","blue4","blue5","blue6","blue7","blue8","blue9","blue10","blue11","blue12","gray","gray1","gray2","gray3","gray4","gray5","gray6","gray7","gray8","gray9","gray10","gray11","gray12","green","green1","green2","green3","green4","green5","green6","green7","green8","green9","green10","green11","green12","orange","orange1","orange2","orange3","orange4","orange5","orange6","orange7","orange8","orange9","orange10","orange11","orange12","pink","pink1","pink2","pink3","pink4","pink5","pink6","pink7","pink8","pink9","pink10","pink11","pink12","purple","purple1","purple2","purple3","purple4","purple5","purple6","purple7","purple8","purple9","purple10","purple11","purple12","red","red1","red2","red3","red4","red5","red6","red7","red8","red9","red10","red11","red12","yellow","yellow1","yellow2","yellow3","yellow4","yellow5","yellow6","yellow7","yellow8","yellow9","yellow10","yellow11","yellow12","blue","blue1","blue2","blue3","blue4","blue5","blue6","blue7","blue8","blue9","blue10","blue11","blue12","gray","gray1","gray2","gray3","gray4","gray5","gray6","gray7","gray8","gray9","gray10","gray11","gray12","green","green1","green2","green3","green4","green5","green6","green7","green8","green9","green10","green11","green12","orange","orange1","orange2","orange3","orange4","orange5","orange6","orange7","orange8","orange9","orange10","orange11","orange12","pink","pink1","pink2","pink3","pink4","pink5","pink6","pink7","pink8","pink9","pink10","pink11","pink12","purple","purple1","purple2","purple3","purple4","purple5","purple6","purple7","purple8","purple9","purple10","purple11","purple12","red","red1","red2","red3","red4","red5","red6","red7","red8","red9","red10","red11","red12","yellow","yellow1","yellow2","yellow3","yellow4","yellow5","yellow6","yellow7","yellow8","yellow9","yellow10","yellow11","yellow12","isMinusZero","value","Number","NEGATIVE_INFINITY","THEME_INFO","Map","getThemeInfo","theme","name","get","JSON","stringify","setThemeInfo","info","next","cache","set","definition","identityCache","Map","createThemeWithPalettes","palettes","defaultPalette","definition","options","name","skipCache","Error","newDef","key","val","altPaletteName$","altPaletteIndex","split","altPaletteName","slice","parentName","altPalette","next","getValue","createTheme","palette","cacheKey","JSON","stringify","has","get","theme","Object","fromEntries","entries","map","offset","nonInheritedValues","setThemeInfo","set","value","max","length","isMinusZero","index","Math","min","objectEntries","obj","Object","entries","objectFromEntries","arr","fromEntries","createMask","createMask2","name","mask","applyMask","theme","mask","options","parentName","nextName","info","getThemeInfo","Error","process","env","NODE_ENV","next","applyMaskStateless","setThemeInfo","definition","palette","name","_a","skip","nonInheritedValues","key","maskOptions","template","createTheme","cache","Map","ThemeBuilder","constructor","state","_getThemeFn","_addedThemes","addPalettes","palettes","addTemplates","templates","addMasks","masks","objectFromEntries","objectEntries","map","key","val","createMask","addThemes","themes","push","type","args","addComponentThemes","childThemeDefinition","options","addChildThemes","currentThemes","Error","currentThemeNames","Object","keys","incomingThemeNames","namesWithDefinitions","flatMap","prefix","avoidNestingWithin","some","avoidName","startsWith","endsWith","subName","fullName","definition","name","includes","filter","Boolean","childThemes","fromEntries","next","getTheme","fn","build","_a","_b","out","maskedThemes","themeName","nameParts","split","parentName","slice","length","join","definitions","themeDefinition","Array","isArray","found","find","d","parent","theme","mask","palette","paletteName","template","templateName","parentDefinition","attemptParentName","msg","process","env","NODE_ENV","JSON","stringify","createThemeWithPalettes","level","scheme","test","parentNames","maskName","maskFunction","parentTheme","mask2","childOpts","childOptions","assign","applyMask","createThemeBuilder","postfixObjKeys","obj","postfix","Object","fromEntries","entries","map","k","v","sizeToSpace","Math","round","floor","objectKeys","obj","Object","keys","size","$0","$1","$2","$3","$4","$true","$5","$6","$7","$8","$9","$10","$11","$12","$13","$14","$15","$16","$17","$18","$19","$20","spaces","Object","entries","map","k","v","sizeToSpace","spacesNegative","slice","space","fromEntries","zIndex","radius","true","tokens","colorTokens","light","blue","gray","green","orange","pink","purple","red","yellow","dark","lightShadowColor","lightShadowColorStrong","darkShadowColor","darkShadowColorStrong","darkColors","lightColors","color","white0","white075","white05","white025","black0","black075","black05","black025","white1","white2","white3","white4","white5","white6","white7","white8","white9","white10","white11","white12","black1","black2","black3","black4","black5","black6","black7","black8","black9","black10","black11","black12","postfixObjKeys","defaultPalettes","transparent","hsl","opacity","replace","getColorPalette","colors","accentColors","colorPalette","Object","values","colorI","length","accentPalette","accentBackground","accentColor","brandColor","blue4Light","blue4Dark","lightPalette","darkPalette","lightColorNames","objectKeys","lightPalettes","objectFromEntries","map","key","index","darkColorNames","darkPalettes","colorPalettes","getTemplates","getBaseTemplates","scheme","isLight","bgIndex","lighten","darken","borderColor","base","background0","background025","background05","background075","color1","color2","color3","color4","color5","color6","color7","color8","color9","color10","color11","color12","color0","color025","color05","color075","background","backgroundHover","backgroundPress","backgroundFocus","borderColorHover","borderColorPress","borderColorFocus","colorHover","colorPress","colorFocus","colorTransparent","placeholderColor","outlineColor","surface12","surface22","surface32","surfaceActiveBg","surfaceActive","inverseSurface12","inverseActive","alt1","alt2","surface1","surface2","surface3","inverseSurface1","lightTemplates","darkTemplates","name","defaultTemplates","shadows","shadowColor","shadowColorHover","shadowColorPress","shadowColorFocus","nonInherited","overlayThemeDefinitions","parent","theme","template","defaultComponentThemes","ListItem","SelectTrigger","Card","Button","Checkbox","Switch","SwitchThumb","TooltipContent","Progress","RadioGroupItem","TooltipArrow","SliderTrackActive","SliderTrack","SliderThumb","Tooltip","ProgressIndicator","SheetOverlay","DialogOverlay","ModalOverlay","Input","TextArea","defaultSubThemes","active","surface4","themeBuilder","createThemeBuilder","addPalettes","addTemplates","addThemes","palette","nonInheritedValues","addChildThemes","addComponentThemes","avoidNestingWithin","themesIn","build","themes","tokens","createTokens","v3Tokens","SPRING_CONFIG_KEYS","Set","isSpringConfigKey","key","has","normalizeTransition","transition","default","enter","exit","delay","properties","Array","isArray","defaultAnimation","configObj","springConfig","value","Object","entries","config","keys","length","hasAnimation","normalized","default","enter","exit","Object","keys","properties","length","getAnimatedProperties","getEffectiveAnimation","state","getAnimationConfigsForKeys","animations","defaultAnimation","_a","_b","result","Map","key","propAnimation","animationValue","type","set","React","useState","EXTRACT_MS_REGEX","EXTRACT_S_REGEX","extractDuration","animation","msMatch","match","Number","parseInt","sMatch","Math","round","parseFloat","MS_DURATION_REGEX","S_DURATION_REGEX","applyDurationOverride","durationMs","msReplaced","replace","sReplaced","TRANSFORM_KEYS","buildTransformString","style","_a","_b","parts","x","y","push","scale","scaleX","scaleY","rotate","val","unit","includes","rotateX","rotateY","rotateZ","skewX","skewY","join","applyStylesToNode","node","transformStr","transform","key","value","Object","entries","opacity","String","backgroundColor","color","createAnimations","animations","reactionListeners","WeakMap","usePresence","ResetPresence","supportsCSS","inputStyle","outputStyle","classNameAnimation","useAnimatedNumber","initial","setVal","onFinish","setOnFinish","useIsomorphicLayoutEffect","getInstance","getValue","setValue","next","config","onFinish2","listeners","get","forEach","listener","stop","useAnimatedNumberReaction","onValue","useEffect","instance","queue","Set","set","add","delete","useAnimatedNumberStyle","getStyle","useAnimations","props","presence","componentState","stateRef","styleState","isEntering","unmounted","isExiting","sendExitComplete","wasEnteringRef","useRef","justFinishedEntering","current","exitCycleIdRef","exitCompletedRef","wasExitingRef","exitInterruptedRef","justStartedExiting","justStoppedExiting","effectiveTransition","transition","normalized","normalizeTransition","effectiveAnimationKey","getEffectiveAnimation","defaultAnimation","animatedProperties","getAnimatedProperties","hasDefault","default","enter","exit","hasPerPropertyConfigs","length","keys","animateOnly","host","cycleId","completeExit","rafId","wasInterrupted","ignoreCancelEvents","enterStyle","exitStyle","resetStyle","offsetHeight","maxDuration","animationConfigs","getAnimationConfigsForKeys","animationValue","values","duration","delay","fallbackTimeout","timeoutId","setTimeout","transitioningProps","completedCount","onFinishAnimation","event","target","eventProp","propertyName","has","size","clearTimeout","onCancelAnimation","addEventListener","requestAnimationFrame","delayStr2","durationOverride2","map","propAnimation","properties","type","filter","Boolean","cancelAnimationFrame","removeEventListener","hasNormalizedAnimation","Array","isArray","transformsToString","delayStr","durationOverride","process","env","NODE_ENV","debug","console","info","className","easeOut","bouncy","kindaBouncyBezier","animationsCSS","c1","superBouncy","kindaBouncy","superLazy","lazy","medium","slowest","slow","quick","quickLessBouncy","tooltip","quicker","quickerLessBouncy","quickest","quickestLessBouncy","createFont","getVariableValue","isWeb","createInterFont","font","sizeLineHeight","size","sizeSize","Object","fromEntries","entries","defaultSizes","map","k","v","family","lineHeight","weight","letterSpacing","true","createFont","isWeb","createSilkscreenFont","font","family","size","lineHeight","Object","fromEntries","entries","map","k","v","Math","round","weight","letterSpacing","genericFontSizes","createGenericFont","family","font","sizeLineHeight","val","size","createFont","lineHeight","Object","fromEntries","entries","map","k","v","weight","letterSpacing","silkscreenFont","createSilkscreenFont","headingFont","createInterFont","size","transform","weight","color","letterSpacing","face","normal","sizeLineHeight","Math","round","bodyFont","sizeSize","monoFont","createGenericFont","x","fonts","heading","body","mono","silkscreen","media","xl","maxWidth","lg","md","sm","xs","xxs","gtXs","minWidth","gtSm","gtMd","gtLg","gtXl","mediaQueryDefaultActive","globalThis","global","shorthands","ussel","cur","pe","col","ff","fos","fost","fow","ls","lh","ta","tt","ww","ac","ai","als","b","bg","bbc","bblr","bbrr","bbw","blc","blw","bc","br","bs","brw","brc","btc","btlr","btrr","btw","bw","dsp","f","fb","fd","fg","fs","fw","h","jc","l","m","mah","maw","mb","mih","miw","ml","mr","mt","mx","my","o","ov","p","pb","pl","pos","pr","pt","px","py","r","shac","shar","shof","shop","t","w","zi","selectionStyles","theme","color5","backgroundColor","color","color11","themes2","process","env","TAMAGUI_OPTIMIZE_THEMES","themesIn","config","animations","themes","media","tokens","fonts","settings","mediaQueryDefaultActive","defaultFont","fastSchemeChange","shouldAddPrefersColorThemes","jsx","Theme","jsx","Button","Text","jsx","jsxs","Text","jsx"]}